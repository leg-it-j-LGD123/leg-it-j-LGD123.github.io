<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hello World</title>
    <url>/2024/05/23/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>Markdown语法与外挂标签写法汇总</title>
    <url>/2022/08/09/2022-08-09-Markdown%E8%AF%AD%E6%B3%95%E4%B8%8E%E5%A4%96%E6%8C%82%E6%A0%87%E7%AD%BE%E5%86%99%E6%B3%95%E6%B1%87%E6%80%BB/</url>
    <content><![CDATA[<h1 id="1-Markdown语法自带格式"><a href="#1-Markdown语法自带格式" class="headerlink" title="1.Markdown语法自带格式"></a>1.Markdown语法自带格式</h1><div class="note info flat"><p>参考：<a href="https://blog.csdn.net/u014061630/article/details/81359144">Markdown语法图文全面详解(10分钟学会)</a></p>
</div>
<div class="note warning flat"><p>注意：此页面偶尔会存在CSS冲突问题!</p>
</div>
<h2 id="1-1-代码块"><a href="#1-1-代码块" class="headerlink" title="1.1 代码块"></a>1.1 代码块</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">示例源码</button><button type="button" class="tab " data-href="分栏-2">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">\```shell</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">VSCode终端</span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cmder终端</span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br><span class="line">\```</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">VSCode终端</span></span><br><span class="line">hexo clean; hexo s</span><br><span class="line">hexo clean; hexo g; hexo d</span><br><span class="line">git add .; git commit -m &quot;npm publish&quot;; npm version patch; </span><br><span class="line">git push</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cmder终端</span></span><br><span class="line">hexo clean &amp;&amp; hexo s</span><br><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;npm publish&quot; &amp;&amp; npm version patch</span><br><span class="line">git push</span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="1-2-多级标题"><a href="#1-2-多级标题" class="headerlink" title="1.2 多级标题"></a>1.2 多级标题</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">示例源码</button><button type="button" class="tab " data-href="分栏-2">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># H1</span></span><br><span class="line"><span class="section">## H2</span></span><br><span class="line"><span class="section">### H3</span></span><br><span class="line"><span class="section">#### H4</span></span><br><span class="line"><span class="section">##### H5</span></span><br><span class="line"><span class="section">###### H6</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><p>见本文章标题!</p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="1-3-文字样式"><a href="#1-3-文字样式" class="headerlink" title="1.3 文字样式"></a>1.3 文字样式</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">示例源码</button><button type="button" class="tab " data-href="分栏-2">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">u</span>&gt;</span></span>下划线演示<span class="language-xml"><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">文字<span class="strong">**加粗**</span>演示</span><br><span class="line"></span><br><span class="line">文字<span class="emphasis">*斜体*</span>演示</span><br><span class="line"></span><br><span class="line">文本<span class="code">`高亮`</span>演示</span><br><span class="line"></span><br><span class="line">文本~~删除~~线演示</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span> = <span class="string">5</span>&gt;</span></span>5号字<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">face</span>=<span class="string">&quot;黑体&quot;</span>&gt;</span></span>黑体<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">blue</span>&gt;</span></span>蓝色<span class="language-xml"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">td</span> <span class="attr">bgcolor</span>=<span class="string">MistyRose</span>&gt;</span></span>这里的背景色是：MistyRosen，此处输入任意想输入的内容<span class="language-xml"><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><p><u>下划线演示</u></p>
<p>文字<strong>加粗</strong>演示</p>
<p>文字<em>斜体</em>演示</p>
<p>文本<code>高亮</code>演示</p>
<p>文本<del>删除</del>线演示</p>
<font size = 5>5号字</font>
<font face="黑体">黑体</font>
<font color=blue>蓝色</font>

<table><tr><td bgcolor=MistyRose>这里的背景色是：MistyRosen，此处输入任意想输入的内容</td></tr></table></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<div class="note info flat"><p>上述要点可参考:<a href="https://blog.csdn.net/qq_43732429/article/details/108034518">【Markdown语法】字体颜色大小及文字底色设置</a></p>
</div>
<h2 id="1-4-引用"><a href="#1-4-引用" class="headerlink" title="1.4 引用"></a>1.4 引用</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">示例源码</button><button type="button" class="tab " data-href="分栏-2">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="quote">&gt;  Java</span></span><br><span class="line"><span class="quote">&gt; 二级引用演示</span></span><br><span class="line"><span class="quote">&gt; MySQL</span></span><br><span class="line"><span class="quote">&gt; &gt;外键</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;事务</span></span><br><span class="line"><span class="quote">&gt; &gt;</span></span><br><span class="line"><span class="quote">&gt; &gt;<span class="strong">**行级锁**</span>(引用内部一样可以用格式)</span></span><br><span class="line"><span class="quote">&gt; </span></span><br><span class="line"><span class="quote">&gt; ....</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><blockquote>
<p> Java<br>二级引用演示<br>MySQL</p>
<blockquote>
<p>外键</p>
<p>事务</p>
<p><strong>行级锁</strong>(引用内部一样可以用格式)</p>
</blockquote>
<p>….</p>
</blockquote></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="1-5-分割线"><a href="#1-5-分割线" class="headerlink" title="1.5 分割线"></a>1.5 分割线</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">示例源码</button><button type="button" class="tab " data-href="分栏-2">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><hr>
<hr></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="1-6-列表-跟空格都可以"><a href="#1-6-列表-跟空格都可以" class="headerlink" title="1.6 列表(*,+,-跟空格都可以)"></a>1.6 列表(*,+,-跟空格都可以)</h2><h3 id="1-6-1-无序列表"><a href="#1-6-1-无序列表" class="headerlink" title="1.6.1 无序列表"></a>1.6.1 无序列表</h3><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">示例源码</button><button type="button" class="tab " data-href="分栏-2">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="bullet">*</span> Java</span><br><span class="line"><span class="bullet">*</span> Python</span><br><span class="line"><span class="bullet">*</span> ...</span><br><span class="line"></span><br><span class="line"><span class="bullet">+</span> Java</span><br><span class="line"><span class="bullet">+</span> Python</span><br><span class="line"><span class="bullet">+</span> ...</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> Java</span><br><span class="line"><span class="bullet">-</span> Python</span><br><span class="line"><span class="bullet">-</span> ...</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ul>
<li>Java</li>
<li>Python</li>
<li>…</li>
</ul>
<ul>
<li>Java</li>
<li>Python</li>
<li>…</li>
</ul>
<ul>
<li>Java</li>
<li>Python</li>
<li>…</li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h3 id="1-6-2-有序列表"><a href="#1-6-2-有序列表" class="headerlink" title="1.6.2 有序列表"></a>1.6.2 有序列表</h3><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">示例源码</button><button type="button" class="tab " data-href="分栏-2">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 注意后面有空格</span></span><br><span class="line"><span class="bullet">1.</span> </span><br><span class="line"><span class="bullet">2.</span> </span><br><span class="line"><span class="bullet">3.</span> </span><br><span class="line"><span class="bullet">4.</span> </span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li></li>
<li></li>
<li></li>
<li></li>
</ol></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="1-7-图片"><a href="#1-7-图片" class="headerlink" title="1.7 图片"></a>1.7 图片</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">示例源码</button><button type="button" class="tab " data-href="分栏-2">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 本地图片</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/assets/pusheencode.webp&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;示例图片&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:50%;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="section"># 在线图片</span></span><br><span class="line">![<span class="string">code</span>](<span class="link">https://cdn.jsdelivr.net/gh/fomalhaut1998/markdown_pic/img/code.png</span>)</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><p>本地图片:<br><img src="/assets/pusheencode.webp" alt="示例图片" style="zoom:50%;" /><br>在线图片:<br><img src="https://cdn.jsdelivr.net/gh/fomalhaut1998/markdown_pic/img/code.png" alt="code"></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="1-8-表格"><a href="#1-8-表格" class="headerlink" title="1.8 表格"></a>1.8 表格</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">示例源码</button><button type="button" class="tab " data-href="分栏-2">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">| 项目标号 | 资金     | 备注 |</span><br><span class="line">| -------- | -------- | ---- |</span><br><span class="line">| 1        | 100，000 | 无   |</span><br><span class="line">| 2        | 200，000 | 无   |</span><br><span class="line">| 3        | 300,600  | 重要 |</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><div class="table-container">
<table>
<thead>
<tr>
<th>项目标号</th>
<th>资金</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>100，000</td>
<td>无</td>
</tr>
<tr>
<td>2</td>
<td>200，000</td>
<td>无</td>
</tr>
<tr>
<td>3</td>
<td>300,600</td>
<td>重要</td>
</tr>
</tbody>
</table>
</div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="1-9-公式"><a href="#1-9-公式" class="headerlink" title="1.9 公式"></a>1.9 公式</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">示例源码</button><button type="button" class="tab " data-href="分栏-2">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">$$</span><br><span class="line">\Gamma(z)=\int<span class="emphasis">_0^\infty t^&#123;z-1&#125;e^&#123;-t&#125;dt.</span></span><br><span class="line"><span class="emphasis">$$</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><script type="math/tex; mode=display">
\Gamma(z)=\int_0^\infty t^{z-1}e^{-t}dt.</script></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h1 id="2-Butterfly外挂标签"><a href="#2-Butterfly外挂标签" class="headerlink" title="2.Butterfly外挂标签"></a>2.Butterfly外挂标签</h1><div class="note info flat"><p>这部分参考安知鱼:<a href="https://anzhiy.cn/posts/7d58.html">基于Butterfly的外挂标签引入</a></p>
</div>
<h2 id="2-1-行内文本样式-text"><a href="#2-1-行内文本样式-text" class="headerlink" title="2.1 行内文本样式 text"></a>2.1 行内文本样式 text</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">示例源码</button><button type="button" class="tab " data-href="分栏-3">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% u 文本内容 %&#125;</span><br><span class="line">&#123;% emp 文本内容 %&#125;</span><br><span class="line">&#123;% wavy 文本内容 %&#125;</span><br><span class="line">&#123;% del 文本内容 %&#125;</span><br><span class="line">&#123;% kbd 文本内容 %&#125;</span><br><span class="line">&#123;% psw 文本内容 %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="bullet">1.</span> 带 &#123;% u 下划线 %&#125; 的文本</span><br><span class="line"><span class="bullet">2.</span> 带 &#123;% emp 着重号 %&#125; 的文本</span><br><span class="line"><span class="bullet">3.</span> 带 &#123;% wavy 波浪线 %&#125; 的文本</span><br><span class="line"><span class="bullet">4.</span> 带 &#123;% del 删除线 %&#125; 的文本</span><br><span class="line"><span class="bullet">5.</span> 键盘样式的文本 &#123;% kbd command %&#125; + &#123;% kbd D %&#125;</span><br><span class="line"><span class="bullet">6.</span> 密码样式的文本：&#123;% psw 这里没有验证码 %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-3"><ol>
<li>带 <u>下划线</u> 的文本</li>
<li>带 <emp>着重号</emp> 的文本</li>
<li>带 <wavy>波浪线</wavy> 的文本</li>
<li>带 <del>删除线</del> 的文本</li>
<li>键盘样式的文本 <kbd>command</kbd> + <kbd>D</kbd></li>
<li>密码样式的文本：<psw>这里没有验证码</psw></li>
</ol></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-2-行内文本-span"><a href="#2-2-行内文本-span" class="headerlink" title="2.2 行内文本 span"></a>2.2 行内文本 span</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">配置参数</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% span 样式参数(参数以空格划分), 文本内容 %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><code>字体</code>: logo, code</li>
<li><code>颜色</code>: red,yellow,green,cyan,blue,gray</li>
<li><code>大小</code>: small, h4, h3, h2, h1, large, huge, ultra</li>
<li><code>对齐方向</code>: left, center, right</li>
</ol></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> 彩色文字</span><br><span class="line">在一段话中方便插入各种颜色的标签，包括：&#123;% span red, 红色 %&#125;、&#123;% span yellow, 黄色 %&#125;、&#123;% span green, 绿色 %&#125;、&#123;% span cyan, 青色 %&#125;、&#123;% span blue, 蓝色 %&#125;、&#123;% span gray, 灰色 %&#125;。</span><br><span class="line"><span class="bullet">-</span> 超大号文字</span><br><span class="line">文档「开始」页面中的标题部分就是超大号文字。</span><br><span class="line">&#123;% span center logo large, Volantis %&#125;</span><br><span class="line">&#123;% span center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><ul>
<li>彩色文字<br>在一段话中方便插入各种颜色的标签，包括：<span class='p red'>红色</span>、<span class='p yellow'>黄色</span>、<span class='p green'>绿色</span>、<span class='p cyan'>青色</span>、<span class='p blue'>蓝色</span>、<span class='p gray'>灰色</span>。</li>
<li>超大号文字<br>文档「开始」页面中的标题部分就是超大号文字。<br><span class='p center logo large'>Volantis</span><br><span class='p center small'>A Wonderful Theme for Hexo</span></li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-3-段落文本-p"><a href="#2-3-段落文本-p" class="headerlink" title="2.3 段落文本 p"></a>2.3 段落文本 p</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">配置参数</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% p 样式参数(参数以空格划分), 文本内容 %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><code>字体</code>: logo, code</li>
<li><code>颜色</code>: red,yellow,green,cyan,blue,gray</li>
<li><code>大小</code>: small, h4, h3, h2, h1, large, huge, ultra</li>
<li><code>对齐方向</code>: left, center, right</li>
</ol></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="bullet">-</span> 彩色文字</span><br><span class="line">在一段话中方便插入各种颜色的标签，包括：&#123;% p red, 红色 %&#125;、&#123;% p yellow, 黄色 %&#125;、&#123;% p green, 绿色 %&#125;、&#123;% p cyan, 青色 %&#125;、&#123;% p blue, 蓝色 %&#125;、&#123;% p gray, 灰色 %&#125;。</span><br><span class="line"><span class="bullet">-</span> 超大号文字</span><br><span class="line">文档「开始」页面中的标题部分就是超大号文字。</span><br><span class="line">&#123;% p center logo large, Volantis %&#125;</span><br><span class="line">&#123;% p center small, A Wonderful Theme for Hexo %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><ul>
<li>彩色文字<br>在一段话中方便插入各种颜色的标签，包括：<p class='p red'>红色</p>、<p class='p yellow'>黄色</p>、<p class='p green'>绿色</p>、<p class='p cyan'>青色</p>、<p class='p blue'>蓝色</p>、<p class='p gray'>灰色</p>。</li>
<li>超大号文字<br>文档「开始」页面中的标题部分就是超大号文字。<p class='p center logo large'>Volantis</p>
<p class='p center small'>A Wonderful Theme for Hexo</p>
</li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-4-引用note"><a href="#2-4-引用note" class="headerlink" title="2.4 引用note"></a>2.4 引用note</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">通用配置</button><button type="button" class="tab " data-href="分栏-2">语法格式</button><button type="button" class="tab " data-href="分栏-3">参数配置</button><button type="button" class="tab " data-href="分栏-4">示例源码</button><button type="button" class="tab " data-href="分栏-5">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">note:</span><br><span class="line">  # Note tag style values:</span><br><span class="line">  #  - simple    bs-callout old alert style. Default.</span><br><span class="line">  #  - modern    bs-callout new (v2-v3) alert style.</span><br><span class="line">  #  - flat      flat callout style with background, like on Mozilla or StackOverflow.</span><br><span class="line">  #  - disabled  disable all CSS styles import of note tag.</span><br><span class="line">  style: simple</span><br><span class="line">  icons: false</span><br><span class="line">  border<span class="emphasis">_radius: 3</span></span><br><span class="line"><span class="emphasis">  # Offset lighter of background in % for modern and flat styles (modern: -12 | 12; flat: -18 | 6).</span></span><br><span class="line"><span class="emphasis">  # Offset also applied to label tag variables. This option can work with disabled note tag.</span></span><br><span class="line"><span class="emphasis">  light_</span>bg<span class="emphasis">_offset: 0</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 自带icon</span></span><br><span class="line">&#123;% note [class] [no-icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br><span class="line"><span class="section"># 外部icon</span></span><br><span class="line">&#123;% note [color] [icon] [style] %&#125;</span><br><span class="line">Any content (support inline tags too.io).</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-3"><p>1.自带icon</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>参数</th>
<th style="text-align:center">用法</th>
</tr>
</thead>
<tbody>
<tr>
<td>class</td>
<td style="text-align:center">【可选】标识，不同的标识有不同的配色 （ default / primary / success / info / warning / danger ）</td>
</tr>
<tr>
<td>no-icon</td>
<td style="text-align:center">【可选】不显示 icon</td>
</tr>
<tr>
<td>style</td>
<td style="text-align:center">【可选】可以覆盖配置中的 style （simple/modern/flat/disabled）</td>
</tr>
</tbody>
</table>
</div>
<p>2.外部icon</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>参数</th>
<th style="text-align:center">用法</th>
</tr>
</thead>
<tbody>
<tr>
<td>class</td>
<td style="text-align:center">【可选】标识，不同的标识有不同的配色 （ default / blue / pink / red / purple / orange / green ）</td>
</tr>
<tr>
<td>no-icon</td>
<td style="text-align:center">【可选】可配置自定义 icon (只支持 fontawesome 图标, 也可以配置 no-icon )</td>
</tr>
<tr>
<td>style</td>
<td style="text-align:center">【可选】可以覆盖配置中的 style （simple/modern/flat/disabled）</td>
</tr>
</tbody>
</table>
</div></div><div class="tab-item-content" id="分栏-4"><details class="folding-tag" blue><summary> 1.自带icon </summary>
              <div class='content'>
              <p>1.<code>simple</code>样式<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note simple %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default simple %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary simple %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success simple %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info simple %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning simple %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger simple %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><br>2.<code>modern</code>样式<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note modern %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default modern %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary modern %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success modern %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info modern %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning modern %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger modern %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure></p><p>3.<code>flat</code>样式</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note flat %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default flat %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary flat %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success flat %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info flat %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning flat %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger flat %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>样式</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note disabled %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default disabled %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary disabled %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success disabled %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info disabled %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning disabled %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger disabled %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>样式</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;默认 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note default no-icon %&#125;default 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note primary no-icon %&#125;primary 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note success no-icon %&#125;success 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note info no-icon %&#125;info 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note warning no-icon %&#125;warning 提示块标签&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note danger no-icon %&#125;danger 提示块标签&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
              </div>
            </details>



<details class="folding-tag" blue><summary> 2.外部icon </summary>
              <div class='content'>
              <p>1.<code>simple</code>样式</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; simple %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; simple %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; simple %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; simple%&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; simple %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; simple %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; simple %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>2.<code>modern</code>样式</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; modern %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; modern %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; modern%&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; modern %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; modern %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; modern %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>3.<code>flat</code>样式</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; flat %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; flat %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; flat %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; flat%&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; flat %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; flat %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; flat %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>4.<code>disabled</code>样式</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note &#x27;fab fa-cc-visa&#x27; disabled %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue &#x27;fas fa-bullhorn&#x27; disabled %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink &#x27;fas fa-car-crash&#x27; disabled %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red &#x27;fas fa-fan&#x27; disabled %&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange &#x27;fas fa-battery-half&#x27; disabled %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple &#x27;far fa-hand-scissors&#x27; disabled %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green &#x27;fab fa-internet-explorer&#x27; disabled %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><p>5.<code>no-icon</code>样式</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% note no-icon %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note blue no-icon %&#125;2021年快到了....&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note pink no-icon %&#125;小心开车 安全至上&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note red no-icon %&#125;这是三片呢？还是四片？&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note orange no-icon %&#125;你是刷 Visa 还是 UnionPay&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note purple no-icon %&#125;剪刀石头布&#123;% endnote %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% note green no-icon %&#125;前端最讨厌的浏览器&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
              </div>
            </details></div><div class="tab-item-content" id="分栏-5"><details class="folding-tag" blue><summary> 1.自带icon </summary>
              <div class='content'>
              <p>1.<code>simple</code>样式</p><div class="note simple"><p>默认 提示块标签</p></div><div class="note default simple"><p>default 提示块标签</p></div><div class="note primary simple"><p>primary 提示块标签</p></div><div class="note success simple"><p>success 提示块标签</p></div><div class="note info simple"><p>info 提示块标签</p></div><div class="note warning simple"><p>warning 提示块标签</p></div><div class="note danger simple"><p>danger 提示块标签</p></div>2.`modern`样式<div class="note modern"><p>默认 提示块标签</p></div><div class="note default modern"><p>default 提示块标签</p></div><div class="note primary modern"><p>primary 提示块标签</p></div><div class="note success modern"><p>success 提示块标签</p></div><div class="note info modern"><p>info 提示块标签</p></div><div class="note warning modern"><p>warning 提示块标签</p></div><div class="note danger modern"><p>danger 提示块标签</p></div><p>3.<code>flat</code>样式</p><div class="note flat"><p>默认 提示块标签</p></div><div class="note default flat"><p>default 提示块标签</p></div><div class="note primary flat"><p>primary 提示块标签</p></div><div class="note success flat"><p>success 提示块标签</p></div><div class="note info flat"><p>info 提示块标签</p></div><div class="note warning flat"><p>warning 提示块标签</p></div><div class="note danger flat"><p>danger 提示块标签</p></div><p>4.<code>disabled</code>样式</p><div class="note disabled"><p>默认 提示块标签</p></div><div class="note default disabled"><p>default 提示块标签</p></div><div class="note primary disabled"><p>primary 提示块标签</p></div><div class="note success disabled"><p>success 提示块标签</p></div><div class="note info disabled"><p>info 提示块标签</p></div><div class="note warning disabled"><p>warning 提示块标签</p></div><div class="note danger disabled"><p>danger 提示块标签</p></div><p>5.<code>no-icon</code>样式</p><div class="note no-icon flat"><p>默认 提示块标签</p></div><div class="note default no-icon flat"><p>default 提示块标签</p></div><div class="note primary no-icon flat"><p>primary 提示块标签</p></div><div class="note success no-icon flat"><p>success 提示块标签</p></div><div class="note info no-icon flat"><p>info 提示块标签</p></div><div class="note warning no-icon flat"><p>warning 提示块标签</p></div><div class="note danger no-icon flat"><p>danger 提示块标签</p></div>
              </div>
            </details>



<details class="folding-tag" blue><summary> 2.外部icon </summary>
              <div class='content'>
              <p>1.<code>simple</code>样式</p><div class="note icon-padding simple"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue icon-padding simple"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding simple"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p></div><div class="note red icon-padding simple"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p></div><div class="note orange icon-padding simple"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple icon-padding simple"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p></div><div class="note green icon-padding simple"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p></div><p>2.<code>modern</code>样式</p><div class="note icon-padding modern"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding modern"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p></div><div class="note red icon-padding modern"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p></div><div class="note orange icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple icon-padding modern"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p></div><div class="note green icon-padding modern"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p></div><p>3.<code>flat</code>样式</p><div class="note icon-padding flat"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue icon-padding flat"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding flat"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p></div><div class="note red icon-padding flat"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p></div><div class="note orange icon-padding flat"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple icon-padding flat"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p></div><div class="note green icon-padding flat"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p></div><p>4.<code>disabled</code>样式</p><div class="note icon-padding disabled"><i class="note-icon fab fa-cc-visa"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue icon-padding disabled"><i class="note-icon fas fa-bullhorn"></i><p>2021年快到了….</p></div><div class="note pink icon-padding disabled"><i class="note-icon fas fa-car-crash"></i><p>小心开车 安全至上</p></div><div class="note red icon-padding disabled"><i class="note-icon fas fa-fan"></i><p>这是三片呢？还是四片？</p></div><div class="note orange icon-padding disabled"><i class="note-icon fas fa-battery-half"></i><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple icon-padding disabled"><i class="note-icon far fa-hand-scissors"></i><p>剪刀石头布</p></div><div class="note green icon-padding disabled"><i class="note-icon fab fa-internet-explorer"></i><p>前端最讨厌的浏览器</p></div><p>5.<code>no-icon</code>样式</p><div class="note no-icon flat"><p>你是刷 Visa 还是 UnionPay</p></div><div class="note blue no-icon flat"><p>2021年快到了….</p></div><div class="note pink no-icon flat"><p>小心开车 安全至上</p></div><div class="note red no-icon flat"><p>这是三片呢？还是四片？</p></div><div class="note orange no-icon flat"><p>你是刷 Visa 还是 UnionPay</p></div><div class="note purple no-icon flat"><p>剪刀石头布</p></div><div class="note green no-icon flat"><p>前端最讨厌的浏览器</p></div>
              </div>
            </details></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-5-上标标签-tip"><a href="#2-5-上标标签-tip" class="headerlink" title="2.5 上标标签 tip"></a>2.5 上标标签 tip</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">配置参数</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tip [参数，可选] %&#125;文本内容&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><code>样式</code>: success,error,warning,bolt,ban,home,sync,cogs,key,bell</li>
<li><code>自定义图标</code>: 支持fontawesome。</li>
</ol></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tip %&#125;default&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip info %&#125;info&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip success %&#125;success&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip error %&#125;error&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip warning %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bolt %&#125;bolt&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban %&#125;ban&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip home %&#125;home&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip sync %&#125;sync&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip cogs %&#125;cogs&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip key %&#125;key&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip bell %&#125;bell&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip fa-atom %&#125;自定义font awesome图标&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><div class="tip "><p>default</p>
</div>
<div class="tip info"><p>info</p>
</div>
<div class="tip success"><p>success</p>
</div>
<div class="tip error"><p>error</p>
</div>
<div class="tip warning"><p>warning</p>
</div>
<div class="tip bolt"><p>bolt</p>
</div>
<div class="tip ban"><p>ban</p>
</div>
<div class="tip home"><p>home</p>
</div>
<div class="tip sync"><p>sync</p>
</div>
<div class="tip cogs"><p>cogs</p>
</div>
<div class="tip key"><p>key</p>
</div>
<div class="tip bell"><p>bell</p>
</div>
<div class="tip fa-atom"><p>自定义font awesome图标</p>
</div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-6-动态标签-anima"><a href="#2-6-动态标签-anima" class="headerlink" title="2.6 动态标签 anima"></a>2.6 动态标签 anima</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">示例源码</button><button type="button" class="tab " data-href="分栏-2">配置参数</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tip [参数，可选] %&#125;文本内容&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><div class="note info flat"><ol>
<li>将所需的CSS类添加到图标（或DOM中的任何元素）。</li>
<li>对于父级悬停样式，需要给目标元素添加指定CSS类，同时还要给目标元素的父级元素添加CSS类<code>faa-parent animated-hover</code>。（详情见示例及示例源码）<br>You can regulate the speed of the animation by adding the CSS class or . faa-fastfaa-slow</li>
<li>可以通过给目标元素添加CSS类<code>faa-fast</code>或<code>faa-slow</code>来控制动画快慢。</li>
</ol>
</div></div><div class="tab-item-content" id="分栏-3"><p>   1.On DOM load（当页面加载时显示动画）</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure>
<p>2.调整动画速度<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated faa-fast %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated faa-slow %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><br>3.On hover（当鼠标悬停时显示动画）<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tip warning faa-horizontal animated-hover %&#125;warning&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-flash animated-hover %&#125;ban&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure><br>4.On parent hover（当鼠标悬停在父级元素时显示动画）<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tip warning faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-horizontal&quot;</span>&gt;</span></span>warning<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br><span class="line">&#123;% tip ban faa-parent animated-hover %&#125;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;faa-flash&quot;</span>&gt;</span></span>ban<span class="language-xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&#123;% endtip %&#125;</span><br></pre></td></tr></table></figure></p></div><div class="tab-item-content" id="分栏-4"><p>1.On DOM load（当页面加载时显示动画）</p>
<div class="tip warning faa-horizontal animated"><p>warning</p>
</div>
<div class="tip ban faa-flash animated"><p>ban</p>
</div>
2.调整动画速度
<div class="tip warning faa-horizontal animated faa-fast"><p>warning</p>
</div>
<div class="tip ban faa-flash animated faa-slow"><p>ban</p>
</div>
3.On hover（当鼠标悬停时显示动画）
<div class="tip warning faa-horizontal animated-hover"><p>warning</p>
</div>
<div class="tip ban faa-flash animated-hover"><p>ban</p>
</div>
4.On parent hover（当鼠标悬停在父级元素时显示动画）
<div class="tip warning faa-parent animated-hover"><p class="faa-horizontal">warning</p></div>
<div class="tip ban faa-parent animated-hover"><p class="faa-flash">ban</p></div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-7-复选列表-checkbox"><a href="#2-7-复选列表-checkbox" class="headerlink" title="2.7 复选列表 checkbox"></a>2.7 复选列表 checkbox</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">配置参数</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% checkbox 样式参数（可选）, 文本（支持简单md） %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><code>样式</code>: plus, minus, times</li>
<li><code>颜色</code>: red,yellow,green,cyan,blue,gray</li>
<li><code>选中状态</code>: checked</li>
</ol></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% checkbox 纯文本测试 %&#125;</span><br><span class="line">&#123;% checkbox checked, 支持简单的 [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) 语法 %&#125;</span><br><span class="line">&#123;% checkbox red, 支持自定义颜色 %&#125;</span><br><span class="line">&#123;% checkbox green checked, 绿色 + 默认选中 %&#125;</span><br><span class="line">&#123;% checkbox yellow checked, 黄色 + 默认选中 %&#125;</span><br><span class="line">&#123;% checkbox cyan checked, 青色 + 默认选中 %&#125;</span><br><span class="line">&#123;% checkbox blue checked, 蓝色 + 默认选中 %&#125;</span><br><span class="line">&#123;% checkbox plus green checked, 增加 %&#125;</span><br><span class="line">&#123;% checkbox minus yellow checked, 减少 %&#125;</span><br><span class="line">&#123;% checkbox times red checked, 叉 %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><div class='checkbox'><input type="checkbox" />
            <p>纯文本测试</p>
            </div>
<div class='checkbox checked'><input type="checkbox" checked="checked"/>
            <p>支持简单的 <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> 语法</p>
            </div>
<div class='checkbox red'><input type="checkbox" />
            <p>支持自定义颜色</p>
            </div>
<div class='checkbox green checked'><input type="checkbox" checked="checked"/>
            <p>绿色 + 默认选中</p>
            </div>
<div class='checkbox yellow checked'><input type="checkbox" checked="checked"/>
            <p>黄色 + 默认选中</p>
            </div>
<div class='checkbox cyan checked'><input type="checkbox" checked="checked"/>
            <p>青色 + 默认选中</p>
            </div>
<div class='checkbox blue checked'><input type="checkbox" checked="checked"/>
            <p>蓝色 + 默认选中</p>
            </div>
<div class='checkbox plus green checked'><input type="checkbox" checked="checked"/>
            <p>增加</p>
            </div>
<div class='checkbox minus yellow checked'><input type="checkbox" checked="checked"/>
            <p>减少</p>
            </div>
<div class='checkbox times red checked'><input type="checkbox" checked="checked"/>
            <p>叉</p>
            </div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-8-单选列表-radio"><a href="#2-8-单选列表-radio" class="headerlink" title="2.8 单选列表 radio"></a>2.8 单选列表 radio</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">配置参数</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% radio 样式参数（可选）, 文本（支持简单md） %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><code>颜色</code>: red,yellow,green,cyan,blue,gray</li>
<li><code>选中状态</code>: checked</li>
</ol></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% radio 纯文本测试 %&#125;</span><br><span class="line">&#123;% radio checked, 支持简单的 [<span class="string">markdown</span>](<span class="link">https://guides.github.com/features/mastering-markdown/</span>) 语法 %&#125;</span><br><span class="line">&#123;% radio red, 支持自定义颜色 %&#125;</span><br><span class="line">&#123;% radio green, 绿色 %&#125;</span><br><span class="line">&#123;% radio yellow, 黄色 %&#125;</span><br><span class="line">&#123;% radio cyan, 青色 %&#125;</span><br><span class="line">&#123;% radio blue, 蓝色 %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><div class='checkbox'><input type="radio" />
            <p>纯文本测试</p>
            </div>
<div class='checkbox checked'><input type="radio" checked="checked"/>
            <p>支持简单的 <a href="https://guides.github.com/features/mastering-markdown/">markdown</a> 语法</p>
            </div>
<div class='checkbox red'><input type="radio" />
            <p>支持自定义颜色</p>
            </div>
<div class='checkbox green'><input type="radio" />
            <p>绿色</p>
            </div>
<div class='checkbox yellow'><input type="radio" />
            <p>黄色</p>
            </div>
<div class='checkbox cyan'><input type="radio" />
            <p>青色</p>
            </div>
<div class='checkbox blue'><input type="radio" />
            <p>蓝色</p>
            </div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-9-时间轴-timeline"><a href="#2-9-时间轴-timeline" class="headerlink" title="2.9 时间轴 timeline"></a>2.9 时间轴 timeline</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">配置参数</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% timeline 时间线标题（可选）[,color] %&#125;</span><br><span class="line">&lt;!-- timeline 时间节点（标题） --&gt;</span><br><span class="line">正文内容</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&lt;!-- timeline 时间节点（标题） --&gt;</span><br><span class="line">正文内容</span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><code>title</code>:标题/时间线</li>
<li><code>color</code>:<code>timeline</code>颜色:default(留空) / blue / pink / red / purple / orange / green</li>
</ol></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% timeline 时间轴样式,blue %&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-07-24 [<span class="string">2.6.6 -&gt; 3.0</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 如果有 <span class="code">`hexo-lazyload-image`</span> 插件，需要删除并重新安装最新版本，设置 <span class="code">`lazyload.isSPA: true`</span>。</span><br><span class="line"><span class="bullet">2.</span> 2.x 版本的 css 和 js 不适用于 3.x 版本，如果使用了 <span class="code">`use_cdn: true`</span> 则需要删除。</span><br><span class="line"><span class="bullet">3.</span> 2.x 版本的 fancybox 标签在 3.x 版本中被重命名为 gallery 。</span><br><span class="line"><span class="bullet">4.</span> 2.x 版本的置顶 <span class="code">`top: true`</span> 改为了 <span class="code">`pin: true`</span>，并且同样适用于 <span class="code">`layout: page`</span> 的页面。</span><br><span class="line"><span class="bullet">5.</span> 如果使用了 <span class="code">`hexo-offline`</span> 插件，建议卸载，3.0 版本默认开启了 pjax 服务。</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-05-15 [<span class="string">2.6.3 -&gt; 2.6.6</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6</span>) --&gt;</span><br><span class="line"></span><br><span class="line">不需要额外处理。</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- timeline 2020-04-20 [<span class="string">2.6.2 -&gt; 2.6.3</span>](<span class="link">https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3</span>) --&gt;</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 全局搜索 <span class="code">`seotitle`</span> 并替换为 <span class="code">`seo_title`</span>。</span><br><span class="line"><span class="bullet">2.</span> group 组件的索引规则有变，使用 group 组件的文章内，<span class="code">`group: group_name`</span> 对应的组件名必须是 <span class="code">`group_name`</span>。</span><br><span class="line"><span class="bullet">2.</span> group 组件的列表名优先显示文章的 <span class="code">`short_title`</span> 其次是 <span class="code">`title`</span>。</span><br><span class="line"></span><br><span class="line">&lt;!-- endtimeline --&gt;</span><br><span class="line"></span><br><span class="line">&#123;% endtimeline %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><div class="timeline blue"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>时间轴样式</p>
</div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-07-24 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases">2.6.6 -&gt; 3.0</a></p>
</div></div><div class='timeline-item-content'><ol>
<li>如果有 <code>hexo-lazyload-image</code> 插件，需要删除并重新安装最新版本，设置 <code>lazyload.isSPA: true</code>。</li>
<li>2.x 版本的 css 和 js 不适用于 3.x 版本，如果使用了 <code>use_cdn: true</code> 则需要删除。</li>
<li>2.x 版本的 fancybox 标签在 3.x 版本中被重命名为 gallery 。</li>
<li>2.x 版本的置顶 <code>top: true</code> 改为了 <code>pin: true</code>，并且同样适用于 <code>layout: page</code> 的页面。</li>
<li>如果使用了 <code>hexo-offline</code> 插件，建议卸载，3.0 版本默认开启了 pjax 服务。</li>
</ol>
</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-05-15 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.6">2.6.3 -&gt; 2.6.6</a></p>
</div></div><div class='timeline-item-content'><p>不需要额外处理。</p>
</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>2020-04-20 <a href="https://github.com/volantis-x/hexo-theme-volantis/releases/tag/2.6.3">2.6.2 -&gt; 2.6.3</a></p>
</div></div><div class='timeline-item-content'><ol>
<li>全局搜索 <code>seotitle</code> 并替换为 <code>seo_title</code>。</li>
<li>group 组件的索引规则有变，使用 group 组件的文章内，<code>group: group_name</code> 对应的组件名必须是 <code>group_name</code>。</li>
<li>group 组件的列表名优先显示文章的 <code>short_title</code> 其次是 <code>title</code>。</li>
</ol>
</div></div></div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-10-链接卡片-link"><a href="#2-10-链接卡片-link" class="headerlink" title="2.10 链接卡片 link"></a>2.10 链接卡片 link</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">示例源码</button><button type="button" class="tab " data-href="分栏-3">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% link 标题, 链接, 图片链接（可选） %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% link 糖果屋教程贴, https://akilar.top/posts/615e2dec/, https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-3"><div class="tag link"><a class="link-card" title="糖果屋教程贴" href="https://akilar.top/posts/615e2dec/"><div class="left"><img src="https://cdn.cbd.int/akilar-candyassets@1.0.36/image/siteicon/favicon.ico"/></div><div class="right"><p class="text">糖果屋教程贴</p><p class="url">https://akilar.top/posts/615e2dec/</p></div></a></div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-11-按钮-btns"><a href="#2-11-按钮-btns" class="headerlink" title="2.11 按钮 btns"></a>2.11 按钮 btns</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">参数配置</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% btns 样式参数 %&#125;</span><br><span class="line">&#123;% cell 标题, 链接, 图片或者图标 %&#125;</span><br><span class="line">&#123;% cell 标题, 链接, 图片或者图标 %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li>圆角样式：rounded, circle</li>
<li>增加文字样式：可以在容器内增加 <code>&lt;b&gt;</code>标题<code>&lt;/b&gt;</code>和<code>&lt;p&gt;</code>描述文字<code>&lt;/p&gt;</code></li>
<li>布局方式：<br>默认为自动宽度，适合视野内只有一两个的情况。</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>wide</td>
<td>宽一点的按钮</td>
</tr>
<tr>
<td>fill</td>
<td>填充布局，自动铺满至少一行，多了会换行</td>
</tr>
<tr>
<td>center</td>
<td>居中，按钮之间是固定间距</td>
</tr>
<tr>
<td>around</td>
<td>居中分散</td>
</tr>
<tr>
<td>grid2</td>
<td>等宽最多2列，屏幕变窄会适当减少列数</td>
</tr>
<tr>
<td>grid3</td>
<td>等宽最多3列，屏幕变窄会适当减少列数</td>
</tr>
<tr>
<td>grid4</td>
<td>等宽最多4列，屏幕变窄会适当减少列数</td>
</tr>
<tr>
<td>grid5</td>
<td>等宽最多5列，屏幕变窄会适当减少列数</td>
</tr>
</tbody>
</table>
</div></div><div class="tab-item-content" id="分栏-3"><p>1.如果需要显示类似「团队成员」之类的一组含有头像的链接</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% btns circle grid5 %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% cell xaoxuu, https://xaoxuu.com, https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure>
<p>2.或者含有图标的按钮<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% btns rounded grid5 %&#125;</span><br><span class="line">&#123;% cell 下载源码, /, fas fa-download %&#125;</span><br><span class="line">&#123;% cell 查看文档, /, fas fa-book-open %&#125;</span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure></p>
<p>3.圆形图标 + 标题 + 描述 + 图片 + 网格5列 + 居中<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% btns circle center grid5 %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>心率管家<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p red, 专业版 %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_pro.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1&#x27;</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&#x27;fab fa-apple&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">b</span>&gt;</span></span>心率管家<span class="language-xml"><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span></span><br><span class="line">  &#123;% p green, 免费版 %&#125;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_lite.png&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&#123;% endbtns %&#125;</span><br></pre></td></tr></table></figure></p></div><div class="tab-item-content" id="分栏-4"><p>1.如果需要显示类似「团队成员」之类的一组含有头像的链接</p>
<div class="btns circle grid5">
            <a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a>
<a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a>
<a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a>
<a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a>
<a class="button" href='https://xaoxuu.com' title='xaoxuu'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png'>xaoxuu</a>
          </div>
2.或者含有图标的按钮
<div class="btns rounded grid5">
            <a class="button" href='/' title='下载源码'><i class='fas fa-download'></i>下载源码</a>
<a class="button" href='/' title='查看文档'><i class='fas fa-book-open'></i>查看文档</a>
          </div>
3.圆形图标 + 标题 + 描述 + 图片 + 网格5列 + 居中
<div class="btns circle center grid5">
            <a href='https://apps.apple.com/cn/app/heart-mate-pro-hrm-utility/id1463348922?ls=1'>
  <i class='fab fa-apple'></i>
  <b>心率管家</b>
  <p class='p red'>专业版</p>
  <img src='https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_pro.png'>
</a>
<a href='https://apps.apple.com/cn/app/heart-mate-lite-hrm-utility/id1475747930?ls=1'>
  <i class='fab fa-apple'></i>
  <b>心率管家</b>
  <p class='p green'>免费版</p>
  <img src='https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/qrcode/heartmate_lite.png'>
</a>
          </div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-12-github卡片-ghcard"><a href="#2-12-github卡片-ghcard" class="headerlink" title="2.12 github卡片 ghcard"></a>2.12 github卡片 ghcard</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">参数配置</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% ghcard 用户名, 其它参数（可选） %&#125;</span><br><span class="line">&#123;% ghcard 用户名/仓库, 其它参数（可选） %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><p>使用<code>,</code>分割各个参数。写法为：<code>参数名=参数值</code><br>以下只写几个常用参数值。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><strong>参数名</strong></th>
<th>取值</th>
<th>释义</th>
</tr>
</thead>
<tbody>
<tr>
<td>hide</td>
<td>stars,commits,prs,issues,contribs</td>
<td>隐藏指定统计</td>
</tr>
<tr>
<td>count_private</td>
<td>true</td>
<td>将私人项目贡献添加到总提交计数中</td>
</tr>
<tr>
<td>show_icons</td>
<td>true</td>
<td>显示图标</td>
</tr>
<tr>
<td>theme</td>
<td>查阅:<a href="https://github.com/anuraghazra/github-readme-stats/blob/master/themes/README.md">Available Themes</a></td>
<td>主题</td>
</tr>
</tbody>
</table>
</div></div><div class="tab-item-content" id="分栏-3"><p>1.用户信息卡片</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">| &#123;% ghcard fomalhaut1998 %&#125; | &#123;% ghcard fomalhaut1998, theme=vue %&#125; |</span><br><span class="line">| -- | -- |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=buefy %&#125; | &#123;% ghcard fomalhaut1998, theme=solarized-light %&#125; |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=onedark %&#125; | &#123;% ghcard fomalhaut1998, theme=solarized-dark %&#125; |</span><br><span class="line">| &#123;% ghcard fomalhaut1998, theme=algolia %&#125; | &#123;% ghcard fomalhaut1998, theme=calm %&#125; |</span><br></pre></td></tr></table></figure>
<p>2.仓库信息卡片</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=vue %&#125; |</span><br><span class="line">| -- | -- |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=buefy %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=solarized-light %&#125; |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=onedark %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=solarized-dark %&#125; |</span><br><span class="line">| &#123;% ghcard volantis-x/hexo-theme-volantis, theme=algolia %&#125; | &#123;% ghcard volantis-x/hexo-theme-volantis, theme=calm %&#125; |</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><p>1.用户信息卡片</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&show_owner=true"/></a></th>
<th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=vue&show_owner=true"/></a></th>
</tr>
</thead>
<tbody>
<tr>
<td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=buefy&show_owner=true"/></a></td>
<td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=solarized-light&show_owner=true"/></a></td>
</tr>
<tr>
<td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=onedark&show_owner=true"/></a></td>
<td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=solarized-dark&show_owner=true"/></a></td>
</tr>
<tr>
<td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=algolia&show_owner=true"/></a></td>
<td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/fomalhaut1998"><img src="https://github-readme-stats.vercel.app/api/?username=fomalhaut1998&theme=calm&show_owner=true"/></a></td>
</tr>
</tbody>
</table>
</div>
<p>2.仓库信息卡片</p>
<div class="table-container">
<table>
<thead>
<tr>
<th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&show_owner=true"/></a></th>
<th><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=vue&show_owner=true"/></a></th>
</tr>
</thead>
<tbody>
<tr>
<td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=buefy&show_owner=true"/></a></td>
<td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=solarized-light&show_owner=true"/></a></td>
</tr>
<tr>
<td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=onedark&show_owner=true"/></a></td>
<td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=solarized-dark&show_owner=true"/></a></td>
</tr>
<tr>
<td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=algolia&show_owner=true"/></a></td>
<td><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/volantis-x/hexo-theme-volantis"><img src="https://github-readme-stats.vercel.app/api/pin/?username=volantis-x&repo=hexo-theme-volantis&theme=calm&show_owner=true"/></a></td>
</tr>
</tbody>
</table>
</div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-13-github徽标-ghbdage"><a href="#2-13-github徽标-ghbdage" class="headerlink" title="2.13 github徽标 ghbdage"></a>2.13 github徽标 ghbdage</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">配置参数</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% bdage [right],[left],[logo]||[color],[link],[title]||[option] %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><code>left</code>：徽标左边的信息，必选参数。</li>
<li><code>right</code>: 徽标右边的信息，必选参数，</li>
<li><code>logo</code>：徽标图标，图标名称详见<a href="https://simpleicons.org/">simpleicons</a>，可选参数。</li>
<li><code>color</code>：徽标右边的颜色，可选参数。</li>
<li><code>link</code>：指向的链接，可选参数。</li>
<li><code>title</code>：徽标的额外信息，可选参数。主要用于优化SEO，但<code>object</code>标签不会像<code>a</code>标签一样在鼠标悬停显示<code>title</code>信息。</li>
<li><code>option</code>：自定义参数，支持<a href="https://shields.io/">shields.io</a>的全部API参数支持，具体参数可以参看上文中的拓展写法示例。形式为<code>name1=value2&amp;name2=value2</code>。</li>
</ol></div><div class="tab-item-content" id="分栏-3"><p>1.基本参数,定义徽标左右文字和图标</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% bdage Theme,Butterfly %&#125;</span><br><span class="line">&#123;% bdage Frame,Hexo,hexo %&#125;</span><br></pre></td></tr></table></figure>
<p>2.信息参数，定义徽标右侧内容背景色，指向链接</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% bdage CDN,JsDelivr,jsDelivr||abcdef,https://metroui.org.ua/index.html,本站使用JsDelivr为静态资源提供CDN加速 %&#125;</span><br><span class="line">//如果是跨顺序省略可选参数，仍然需要写个逗号,用作分割</span><br><span class="line">&#123;% bdage Source,GitHub,GitHub||,https://github.com/ %&#125;</span><br></pre></td></tr></table></figure>
<p>3.拓展参数，支持shields的API的全部参数内容</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% bdage Hosted,Vercel,Vercel||brightgreen,https://vercel.com/,本站采用双线部署，默认线路托管于Vercel||style=social&amp;logoWidth=20 %&#125;</span><br><span class="line">//如果是跨顺序省略可选参数组，仍然需要写双竖线||用作分割</span><br><span class="line">&#123;% bdage Hosted,Vercel,Vercel||||style=social&amp;logoWidth=20&amp;logoColor=violet %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><p>1.基本参数,定义徽标左右文字和图标</p>
<object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Butterfly-Theme-orange?logo=&color=orange&link=&"></object>
<object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Hexo-Frame-orange?logo=hexo&color=orange&link=&"></object>

<p>2.信息参数，定义徽标右侧内容背景色，指向链接</p>
<object class="ghbdage" style="margin-inline:5px" title="本站使用JsDelivr为静态资源提供CDN加速" standby="loading..." data="https://img.shields.io/badge/JsDelivr-CDN-orange?logo=jsDelivr&color=abcdef&link=https://metroui.org.ua/index.html&"></object>
//如果是跨顺序省略可选参数，仍然需要写个逗号,用作分割
<object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/GitHub-Source-orange?logo=GitHub&color=orange&link=https://github.com/&"></object>

<p>3.拓展参数，支持shields的API的全部参数内容</p>
<object class="ghbdage" style="margin-inline:5px" title="本站采用双线部署，默认线路托管于Vercel" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=brightgreen&link=https://vercel.com/&style=social&logoWidth=20"></object>
//如果是跨顺序省略可选参数组，仍然需要写双竖线||用作分割
<object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Vercel-Hosted-orange?logo=Vercel&color=orange&link=&style=social&logoWidth=20&logoColor=violet"></object></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-14-网站卡片-sites"><a href="#2-14-网站卡片-sites" class="headerlink" title="2.14 网站卡片 sites"></a>2.14 网站卡片 sites</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">示例源码</button><button type="button" class="tab " data-href="分栏-3">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site 标题, url=链接, screenshot=截图链接, avatar=头像链接（可选）, description=描述（可选） %&#125;</span><br><span class="line">&#123;% site 标题, url=链接, screenshot=截图链接, avatar=头像链接（可选）, description=描述（可选） %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% sitegroup %&#125;</span><br><span class="line">&#123;% site xaoxuu, url=https://xaoxuu.com, screenshot=https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg, avatar=https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/avatar/avatar.png, description=简约风格 %&#125;</span><br><span class="line">&#123;% site inkss, url=https://inkss.cn, screenshot=https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg, avatar=https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg, description=这是一段关于这个网站的描述文字 %&#125;</span><br><span class="line">&#123;% site MHuiG, url=https://blog.mhuig.top, screenshot=https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png, avatar=https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png, description=这是一段关于这个网站的描述文字 %&#125;</span><br><span class="line">&#123;% site Colsrch, url=https://colsrch.top, screenshot=https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png, avatar=https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg, description=这是一段关于这个网站的描述文字 %&#125;</span><br><span class="line">&#123;% site Linhk1606, url=https://linhk1606.github.io, screenshot=https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png, avatar=https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png, description=这是一段关于这个网站的描述文字 %&#125;</span><br><span class="line">&#123;% endsitegroup %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-3"><div class="site-card-group"><a class="site-card" href="https://fomalhaut1998.com"><div class="img"><img src="https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/fomalhaut1998/cdn-assets/avatar/avatar.png"/><span class="title">fomalhaut1998</span><span class="desc">简约风格</span></div></a>
<a class="site-card" href="https://inkss.cn"><div class="img"><img src="https://i.loli.net/2020/08/21/Vzbu3i8fXs6Nh5Y.jpg"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg"/><span class="title">inkss</span><span class="desc">这是一段关于这个网站的描述文字</span></div></a>
<a class="site-card" href="https://blog.mhuig.top"><div class="img"><img src="https://i.loli.net/2020/08/22/d24zpPlhLYWX6D1.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/MHuiG/imgbed@master/data/p.png"/><span class="title">MHuiG</span><span class="desc">这是一段关于这个网站的描述文字</span></div></a>
<a class="site-card" href="https://colsrch.top"><div class="img"><img src="https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png"/></div><div class="info"><img src="https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg"/><span class="title">Colsrch</span><span class="desc">这是一段关于这个网站的描述文字</span></div></a>
<a class="site-card" href="https://linhk1606.github.io"><div class="img"><img src="https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png"/></div><div class="info"><img src="https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png"/><span class="title">Linhk1606</span><span class="desc">这是一段关于这个网站的描述文字</span></div></a></div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-15-行内图片-inlineimage"><a href="#2-15-行内图片-inlineimage" class="headerlink" title="2.15 行内图片 inlineimage"></a>2.15 行内图片 inlineimage</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">参数配置</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% inlineimage 图片链接, height=高度（可选） %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><code>高度</code>：height=20px</li>
</ol></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">这是 &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif %&#125; 一段话。</span><br><span class="line"></span><br><span class="line">这又是 &#123;% inlineimage https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif, height=40px %&#125; 一段话。</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><p>这是 <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/0000.gif" style="height:1.5em"/> 一段话。</p>
<p>这又是 <img no-lazy class="inline" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/aru-l/5150.gif" style="height:40px;"/> 一段话。</p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-16-单张图片-image"><a href="#2-16-单张图片-image" class="headerlink" title="2.16 单张图片 image"></a>2.16 单张图片 image</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">参数配置</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% image 链接, width=宽度（可选）, height=高度（可选）, alt=描述（可选）, bg=占位颜色（可选） %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li>图片宽度高度：width=300px, height=32px</li>
<li>图片描述：alt=图片描述（butterfly需要在主题配置文件中开启图片描述）</li>
<li>占位背景色：bg=#f2f2f2</li>
</ol></div><div class="tab-item-content" id="分栏-3"><p>1.添加描述：<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, alt=每天下课回宿舍的路，没有什么故事。 %&#125;</span><br></pre></td></tr></table></figure><br>2.指定宽度<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px %&#125;</span><br></pre></td></tr></table></figure><br>3.指定宽度并添加描述：<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px, alt=每天下课回宿舍的路，没有什么故事。 %&#125;</span><br></pre></td></tr></table></figure><br>4.设置占位背景色：<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% image https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg, width=400px, bg=#1D0C04, alt=优化不同宽度浏览的观感 %&#125;</span><br></pre></td></tr></table></figure></p></div><div class="tab-item-content" id="分栏-4"><p>1.添加描述：</p>
<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="每天下课回宿舍的路，没有什么故事。"/></div><span class="image-caption">每天下课回宿舍的路，没有什么故事。</span></div>
2..指定宽度
<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" style="width:400px;"/></div></div>
3.指定宽度并添加描述：
<div class="img-wrap"><div class="img-bg"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="每天下课回宿舍的路，没有什么故事。" style="width:400px;"/></div><span class="image-caption">每天下课回宿舍的路，没有什么故事。</span></div>
4.设置占位背景色：
<div class="img-wrap"><div class="img-bg" style="background:#1D0C04"><img class="img" src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper-minimalist/2020/025.jpg" alt="优化不同宽度浏览的观感" style="width:400px;"/></div><span class="image-caption">优化不同宽度浏览的观感</span></div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-17-音频-audio"><a href="#2-17-音频-audio" class="headerlink" title="2.17 音频 audio"></a>2.17 音频 audio</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">示例源码</button><button type="button" class="tab " data-href="分栏-3">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% audio 音频链接 %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% audio https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3 %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-3"><div class="audio"><audio controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3' type='audio/mp3'>Your browser does not support the audio tag.</audio></div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-18-视频-video"><a href="#2-18-视频-video" class="headerlink" title="2.18 视频 video"></a>2.18 视频 video</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">标签语法</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% video 视频链接 %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><code>对齐方向</code>：left, center, right</li>
<li><code>列数</code>：逗号后面直接写列数，支持 1 ～ 4 列。</li>
</ol></div><div class="tab-item-content" id="分栏-3"><p>1.100%宽度</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br></pre></td></tr></table></figure>
<p>2.50%宽度<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% videos, 2 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure><br>3.25%宽度</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% videos, 4 %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG<span class="emphasis">_0341.mov %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_</span>0341.mov %&#125;</span><br><span class="line">&#123;% endvideos %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><p>1.100%宽度</p>
<div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>
2.50%宽度
<div class="videos" col='2'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>
<div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>
<div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>
<div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div>
3.25%宽度
<div class="videos" col='4'><div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>
<div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>
<div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>
<div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>
<div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>
<div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>
<div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div>
<div class="video"><video controls preload><source src='https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov' type='video/mp4'>Your browser does not support the video tag.</video></div></div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-19-相册-gallery"><a href="#2-19-相册-gallery" class="headerlink" title="2.19 相册 gallery"></a>2.19 相册 gallery</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">参数配置</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><p>1.gallerygroup 相册图库<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line">&#123;% galleryGroup name description link img-url %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br>2.gallery 相册<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">markdown 圖片格式</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure></p></div><div class="tab-item-content" id="分栏-2"><ul>
<li>gallerygroup 相册图库</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>参数名</th>
<th>释义</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>图库名字</td>
</tr>
<tr>
<td>description</td>
<td>图库描述</td>
</tr>
<tr>
<td>link</td>
<td>链接到对应相册的地址</td>
</tr>
<tr>
<td>img-url</td>
<td>图库封面</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li><p>gallery 相册</p>
<p>区别于旧版的Gallery相册,新的Gallery相册会自动根据图片长度进行排版，书写也更加方便，与markdown格式一样。可根据需要插入到相应的md。无需再自己配置长宽。<strong>建议在粘贴时故意使用长短、大小、横竖不一的图片</strong>，会有更好的效果。（尺寸完全相同的图片只会平铺输出，效果很糟糕）</p>
</li>
</ul></div><div class="tab-item-content" id="分栏-3"><p>1.gallerygroup 相册图库</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;gallery-group-main&quot;</span>&gt;</span></span></span><br><span class="line">&#123;% galleryGroup MC 在Rikkaの六花服务器里留下的足迹 &#x27;/gallery/MC/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg %&#125;</span><br><span class="line">&#123;% galleryGroup Gundam 哦咧哇gundam哒！ &#x27;/gallery/Gundam/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907110508327.png %&#125;</span><br><span class="line">&#123;% galleryGroup I-am-Akilar 某种意义上也算自拍吧 &#x27;/gallery/I-am-Akilar/&#x27; https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907113116651.png %&#125;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>2.gallery 相册</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% gallery %&#125;</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg</span>)</span><br><span class="line">![](<span class="link">https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg</span>)</span><br><span class="line">&#123;% endgallery %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><p>1.gallerygroup 相册图库</p>
<div class="gallery-group-main">
<figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/1.jpg' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">MC</div>
  <p>在Rikkaの六花服务器里留下的足迹</p>
  <a href='/gallery/MC/'></a>
  </figcaption>
  </figure>

<figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907110508327.png' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">Gundam</div>
  <p>哦咧哇gundam哒！</p>
  <a href='/gallery/Gundam/'></a>
  </figcaption>
  </figure>

<figure class="gallery-group">
  <img class="gallery-group-img no-lightbox" src='https://cdn.cbd.int/akilar-candyassets@1.0.36/image/20200907113116651.png' alt="Group Image Gallery">
  <figcaption>
  <div class="gallery-group-name">I-am-Akilar</div>
  <p>某种意义上也算自拍吧</p>
  <a href='/gallery/I-am-Akilar/'></a>
  </figcaption>
  </figure>

</div>
2.gallery 相册

<div class="gallery-container" data-type="data" data-button="">
      <div class="gallery-data">[{"url":"https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg","alt":""},{"url":"https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg","alt":""}]</div>
      <div class="gallery-items">
      </div>
    </div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-20-折叠框-folding"><a href="#2-20-折叠框-folding" class="headerlink" title="2.20 折叠框 folding"></a>2.20 折叠框 folding</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">示例源码</button><button type="button" class="tab " data-href="分栏-3">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><p>1.gallerygroup 相册图库<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% folding 参数（可选）, 标题 %&#125;</span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span>)</span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure><br><!-- tab 参数配置 --></p>
<ol>
<li><p><code>颜色</code>：blue, cyan, green, yellow, red</p>
</li>
<li><p><code>状态</code>：状态填写 open 代表默认打开。</p>
</li>
</ol></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% folding 查看图片测试 %&#125;</span><br><span class="line"></span><br><span class="line">![](<span class="link">https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg</span>)</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding cyan open, 查看默认打开的折叠框 %&#125;</span><br><span class="line"></span><br><span class="line">这是一个默认打开的折叠框。</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding green, 查看代码测试 %&#125;</span><br><span class="line">假装这里有代码块（代码块没法嵌套代码块）</span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding yellow, 查看列表测试 %&#125;</span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> haha</span><br><span class="line"><span class="bullet">-</span> hehe</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding red, 查看嵌套测试 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding blue, 查看嵌套测试2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% folding 查看嵌套测试3 %&#125;</span><br><span class="line"></span><br><span class="line">hahaha <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png&#x27;</span> <span class="attr">style</span>=<span class="string">&#x27;height:24px&#x27;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% endfolding %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-3"><details class="folding-tag" ><summary> 查看图片测试 </summary>
              <div class='content'>
              <p><img src="https://cdn.jsdelivr.net/gh/volantis-x/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg" alt=""></p>
              </div>
            </details>

<details class="folding-tag" cyan open><summary> 查看默认打开的折叠框 </summary>
              <div class='content'>
              <p>这是一个默认打开的折叠框。</p>
              </div>
            </details>

<details class="folding-tag" green><summary> 查看代码测试 </summary>
              <div class='content'>
              <p>假装这里有代码块（代码块没法嵌套代码块）</p>
              </div>
            </details>

<details class="folding-tag" yellow><summary> 查看列表测试 </summary>
              <div class='content'>
              <ul><li>haha</li><li>hehe</li></ul>
              </div>
            </details>

<details class="folding-tag" red><summary> 查看嵌套测试 </summary>
              <div class='content'>
              <details class="folding-tag" blue><summary> 查看嵌套测试2 </summary>              <div class='content'>              <details class="folding-tag" ><summary> 查看嵌套测试3 </summary>              <div class='content'>              <p>hahaha <span><img src='https://cdn.jsdelivr.net/gh/volantis-x/cdn-emoji/tieba/%E6%BB%91%E7%A8%BD.png' style='height:24px'></span></p>              </div>            </details>              </div>            </details>
              </div>
            </details></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-21-分栏-tab"><a href="#2-21-分栏-tab" class="headerlink" title="2.21 分栏 tab"></a>2.21 分栏 tab</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">配置参数</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs Unique name, [index] %&#125;</span><br><span class="line">&lt;!-- tab [Tab caption] [@icon] --&gt;</span><br><span class="line">Any content (support inline tags too).</span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><p>Unique name :</p>
<ul>
<li><p>选项卡块标签的唯一名称，不带逗号。</p>
</li>
<li><p>将在#id中用作每个标签及其索引号的前缀。</p>
</li>
<li><p>如果名称中包含空格，则对于生成#id，所有空格将由破折号代替。</p>
</li>
<li><p>仅当前帖子/页面的URL必须是唯一的！</p>
</li>
</ul>
</li>
<li><p>[index]:</p>
<ul>
<li><p>活动选项卡的索引号。</p>
</li>
<li><p>如果未指定，将选择第一个标签（1）。</p>
</li>
<li><p>如果index为-1，则不会选择任何选项卡。</p>
</li>
<li><p>可选参数。</p>
</li>
</ul>
</li>
<li><p>[Tab caption]:</p>
<ul>
<li><p>当前选项卡的标题。</p>
</li>
<li><p>如果未指定标题，则带有制表符索引后缀的唯一名称将用作制表符的标题。</p>
</li>
<li><p>如果未指定标题，但指定了图标，则标题将为空。</p>
</li>
<li><p>可选参数。</p>
</li>
</ul>
</li>
<li><p>[@icon]:</p>
<ul>
<li><p>FontAwesome图标名称（全名，看起来像“ fas fa-font”）</p>
</li>
<li><p>可以指定带空格或不带空格；</p>
</li>
<li><p>例如’Tab caption @icon’ 和 ‘Tab caption@icon’.</p>
</li>
<li><p>可选参数。</p>
</li>
</ul>
</li>
</ol></div><div class="tab-item-content" id="分栏-3"><p>1.Demo 1 - 预设选择第一个【默认】</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>
<p>2.Demo 2 - 预设选择tabs</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test2, 3 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>
<p>3.Demo 3 - 没有预设值</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test3, -1 %&#125;</span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 1.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 2.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab --&gt;</span><br><span class="line"><span class="strong">**This is Tab 3.**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure>
<p>4.Demo 4 - 自定义Tab名 + 只有icon + icon和Tab名</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% tabs test4 %&#125;</span><br><span class="line">&lt;!-- tab 第一个Tab --&gt;</span><br><span class="line"><span class="strong">**tab名字为第一个Tab**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab @fab fa-apple-pay --&gt;</span><br><span class="line"><span class="strong">**只有图标 没有Tab名字**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- tab 炸弹@fas fa-bomb --&gt;</span><br><span class="line"><span class="strong">**名字+icon**</span></span><br><span class="line">&lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><p>1.Demo 1 - 预设选择第一个【默认】</p>
<div class="tabs" id="test1"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test1-1">test1 1</button><button type="button" class="tab " data-href="test1-2">test1 2</button><button type="button" class="tab " data-href="test1-3">test1 3</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>This is Tab 1.</strong></p></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<p>2.Demo 2 - 预设选择tabs</p>
<div class="tabs" id="test2"><ul class="nav-tabs"><button type="button" class="tab " data-href="test2-1">test2 1</button><button type="button" class="tab " data-href="test2-2">test2 2</button><button type="button" class="tab  active" data-href="test2-3">test2 3</button></ul><div class="tab-contents"><div class="tab-item-content" id="test2-1"><p><strong>This is Tab 1.</strong></p></div><div class="tab-item-content" id="test2-2"><p><strong>This is Tab 2.</strong></p></div><div class="tab-item-content active" id="test2-3"><p><strong>This is Tab 3.</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<p>3.Demo 3 - 没有预设值</p>
<div class="tabs" id="test3"><ul class="nav-tabs no-default"><button type="button" class="tab " data-href="test3-1">test3 1</button><button type="button" class="tab " data-href="test3-2">test3 2</button><button type="button" class="tab " data-href="test3-3">test3 3</button></ul><div class="tab-contents"><div class="tab-item-content" id="test3-1"><p><strong>This is Tab 1.</strong></p></div><div class="tab-item-content" id="test3-2"><p><strong>This is Tab 2.</strong></p></div><div class="tab-item-content" id="test3-3"><p><strong>This is Tab 3.</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<p>4.Demo 4 - 自定义Tab名 + 只有icon + icon和Tab名</p>
<div class="tabs" id="test4"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="test4-1">第一个Tab</button><button type="button" class="tab " data-href="test4-2"><i class="fab fa-apple-pay" style="text-align: center;"></i></button><button type="button" class="tab " data-href="test4-3"><i class="fas fa-bomb"></i>炸弹</button></ul><div class="tab-contents"><div class="tab-item-content active" id="test4-1"><p><strong>tab名字为第一个Tab</strong></p></div><div class="tab-item-content" id="test4-2"><p><strong>只有图标 没有Tab名字</strong></p></div><div class="tab-item-content" id="test4-3"><p><strong>名字+icon</strong></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-22-诗词标签-poem"><a href="#2-22-诗词标签-poem" class="headerlink" title="2.22 诗词标签 poem"></a>2.22 诗词标签 poem</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">参数配置</button><button type="button" class="tab " data-href="分栏-2">示例源码</button><button type="button" class="tab " data-href="分栏-3">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><ol>
<li><code>title</code>：诗词标题</li>
<li><code>author</code>：作者，可以不写</li>
</ol></div><div class="tab-item-content" id="分栏-2"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% poem 水调歌头,苏轼 %&#125;</span><br><span class="line">丙辰中秋，欢饮达旦，大醉，作此篇，兼怀子由。</span><br><span class="line">明月几时有？把酒问青天。</span><br><span class="line">不知天上宫阙，今夕是何年？</span><br><span class="line">我欲乘风归去，又恐琼楼玉宇，高处不胜寒。</span><br><span class="line">起舞弄清影，何似在人间？</span><br><span class="line"></span><br><span class="line">转朱阁，低绮户，照无眠。</span><br><span class="line">不应有恨，何事长向别时圆？</span><br><span class="line">人有悲欢离合，月有阴晴圆缺，此事古难全。</span><br><span class="line">但愿人长久，千里共婵娟。</span><br><span class="line">&#123;% endpoem %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-3"><div class='poem'><div class='poem-title'>水调歌头</div><div class='poem-author'>苏轼</div><p>丙辰中秋，欢饮达旦，大醉，作此篇，兼怀子由。<br>明月几时有？把酒问青天。<br>不知天上宫阙，今夕是何年？<br>我欲乘风归去，又恐琼楼玉宇，高处不胜寒。<br>起舞弄清影，何似在人间？</p>
<p>转朱阁，低绮户，照无眠。<br>不应有恨，何事长向别时圆？<br>人有悲欢离合，月有阴晴圆缺，此事古难全。<br>但愿人长久，千里共婵娟。</p>
</div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-23-阿里图标-icon"><a href="#2-23-阿里图标-icon" class="headerlink" title="2.23 阿里图标 icon"></a>2.23 阿里图标 icon</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">参数配置</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% icon [icon-xxxx],[font-size] %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><code>icon-xxxx</code>：表示图标<code>font-class</code>,可以在自己的阿里矢量图标库项目的<code>font-class</code>引用方案内查询并复制。</li>
<li><code>font-size</code>：表示图标大小，直接填写数字即可，单位为<code>em</code>。图标大小默认值为<code>1em</code>。</li>
</ol></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% icon icon-rat<span class="emphasis">_zi %&#125;&#123;% icon icon-rat,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-ox_</span>chou,3 %&#125;&#123;% icon icon-ox,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-tiger<span class="emphasis">_yin,5 %&#125;&#123;% icon icon-tiger,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rabbit_</span>mao,1 %&#125;&#123;% icon icon-rabbit,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dragon<span class="emphasis">_chen,3 %&#125;&#123;% icon icon-dragon,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-snake_</span>si,5 %&#125;&#123;% icon icon-snake,6 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-horse<span class="emphasis">_wu %&#125;&#123;% icon icon-horse,2 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-goat_</span>wei,3 %&#125;&#123;% icon icon-goat,4 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-monkey<span class="emphasis">_shen,5 %&#125;&#123;% icon icon-monkey,6 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-rooster_</span>you %&#125;&#123;% icon icon-rooster,2 %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% icon icon-dog<span class="emphasis">_xu,3 %&#125;&#123;% icon icon-dog,4 %&#125;</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">&#123;% icon icon-boar_</span>hai,5 %&#125;&#123;% icon icon-boar,6 %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rat_zi"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rat"></use></svg>

<svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-ox_chou"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-ox"></use></svg>

<svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-tiger_yin"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-tiger"></use></svg>

<svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rabbit_mao"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rabbit"></use></svg>

<svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dragon_chen"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dragon"></use></svg>

<svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-snake_si"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-snake"></use></svg>

<svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-horse_wu"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-horse"></use></svg>

<svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-goat_wei"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-goat"></use></svg>

<svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-monkey_shen"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-monkey"></use></svg>

<svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rooster_you"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rooster"></use></svg>

<svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dog_xu"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dog"></use></svg>

<svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-boar_hai"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-boar"></use></svg></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-24-特效标签wow"><a href="#2-24-特效标签wow" class="headerlink" title="2.24 特效标签wow"></a>2.24 特效标签wow</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">示例源码</button><button type="button" class="tab " data-href="分栏-2">渲染演示</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% wow [animete],[duration],[delay],[offset],[iteration] %&#125;</span><br><span class="line">内容</span><br><span class="line">&#123;% endwow %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><code>animate</code>: 动画样式，效果详见<a href="https://animate.style/">animate.css参考文档</a></li>
<li><code>duration</code>: 选填项，动画持续时间，单位可以是<code>ms</code>也可以是<code>s</code>。例如<code>3s</code>，<code>700ms</code>。</li>
<li><code>delay</code>: 选填项，动画开始的延迟时间，单位可以是<code>ms</code>也可以是<code>s</code>。例如<code>3s</code>，<code>700ms</code>。</li>
<li><code>offset</code>: 选填项，开始动画的距离（相对浏览器底部）</li>
<li><code>iteration</code>: 选填项，动画重复的次数</li>
</ol></div><div class="tab-item-content" id="分栏-3"><p>1.flip动画效果。<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`动画效果，持续`5s`，延时`5s`，离底部`100`距离时启动，重复`10`次</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><br>2.zoomIn动画效果，持续5s，延时5s，离底部100距离时启动，重复10次<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__zoomIn,5s,5s,100,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note blue &#x27;fas fa-bullhorn&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`zoomIn`动画效果，持续`5s`，延时`5s`，离底部`100`距离时启动，重复`10`次</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><br>3.slideInRight动画效果，持续5s，延时5s<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__slideInRight,5s,5s %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note orange &#x27;fas fa-car&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`slideInRight`动画效果，持续`5s`，延时`5s`。</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure><br>4.heartBeat动画效果，延时5s，重复10次。此处注意不用的参数位置要留空，用逗号间隔。<br><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% wow animate<span class="strong">__heartBeat,,5s,,10 %&#125;</span></span><br><span class="line"><span class="strong">&#123;% note red &#x27;fas fa-battery-half&#x27; modern%&#125;</span></span><br><span class="line"><span class="strong">`heartBeat`动画效果，延时`5s`，重复`10`次。</span></span><br><span class="line"><span class="strong">&#123;% endnote %&#125;</span></span><br><span class="line"><span class="strong">&#123;% endwow %&#125;</span></span><br></pre></td></tr></table></figure></p></div><div class="tab-item-content" id="分栏-4"><p>1.flip动画效果。</p>
<div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>动画效果，持续<code>5s</code>，延时<code>5s</code>，离底部<code>100</code>距离时启动，重复<code>10</code>次</p>
</div></div>

<p>2.zoomIn动画效果，持续5s，延时5s，离底部100距离时启动，重复10次</p>
<div class='wow animate__zoomIn' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset='100'  data-wow-iteration='10' ><div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><code>zoomIn</code>动画效果，持续<code>5s</code>，延时<code>5s</code>，离底部<code>100</code>距离时启动，重复<code>10</code>次</p>
</div></div>

<p>3.slideInRight动画效果，持续5s，延时5s</p>
<div class='wow animate__slideInRight' data-wow-duration='5s' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='' ><div class="note orange icon-padding modern"><i class="note-icon fas fa-car"></i><p><code>slideInRight</code>动画效果，持续<code>5s</code>，延时<code>5s</code>。</p>
</div></div>

<p>4.heartBeat动画效果，延时5s，重复10次。此处注意不用的参数位置要留空，用逗号间隔。</p>
<div class='wow animate__heartBeat' data-wow-duration='' data-wow-delay='5s' data-wow-offset=''  data-wow-iteration='10' ><div class="note red icon-padding modern"><i class="note-icon fas fa-battery-half"></i><p><code>heartBeat</code>动画效果，延时<code>5s</code>，重复<code>10</code>次。</p>
</div></div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-25-进度条-progress"><a href="#2-25-进度条-progress" class="headerlink" title="2.25  进度条 progress"></a>2.25  进度条 progress</h2><div class="note info flat"><p>进度条标签参考<a href="https://rongbuqiu.com/jdt.html">沂佰孜猫-给HEXO文章添加彩色进度条</a>。<br>源样式提取自<a href="https://zwying0814.gitbook.io/cuteen/">Cuteen</a>主题。</p>
</div>
<div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">参数配置</button><button type="button" class="tab " data-href="分栏-2">标签语法</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% progress [width] [color] [text] %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><code>width</code>: 0到100的阿拉伯数字</li>
<li><code>color</code>: 颜色，取值有red,yellow,green,cyan,blue,gray</li>
<li><code>text</code>:进度条上的文字内容</li>
</ol></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% progress 10 red 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 30 yellow 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 50 green 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 70 cyan 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 90 blue 进度条样式预览 %&#125;</span><br><span class="line">&#123;% progress 100 gray 进度条样式预览 %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-red"  style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div>
<div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-yellow"  style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div>
<div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-green"  style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div>
<div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-cyan"  style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div>
<div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-blue"  style="width: 90%" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div>
<div class="progress"><div class="progress-bar-animated progress-bar progress-bar-striped bg-gray"  style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><p>进度条样式预览</p></div></div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-26-注释-notation"><a href="#2-26-注释-notation" class="headerlink" title="2.26 注释 notation"></a>2.26 注释 notation</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">参数配置</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% nota [label] , [text] %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><p><code>label</code>: 注释词汇</p>
</li>
<li><p><code>text</code>: 悬停显示的注解内容</p>
</li>
</ol></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% nota 把鼠标移动到我上面试试 ,可以看到注解内容出现在顶栏 %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><p><span class='nota' data-nota='可以看到注解内容出现在顶栏'>把鼠标移动到我上面试试</span></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-27-气泡注释-bubble"><a href="#2-27-气泡注释-bubble" class="headerlink" title="2.27 气泡注释 bubble"></a>2.27 气泡注释 bubble</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">参数配置</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% bubble [content] , [notation] ,[background-color] %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><code>content</code>: 注释词汇</li>
<li><code>notation</code>: 悬停显示的注解内容</li>
<li><code>background-color</code>: 可选，气泡背景色。默认为“#71a4e3”</li>
</ol></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">最近我学到了不少新玩意儿（虽然对很多大佬来说这些已经是旧技术了），比如CSS的&#123;% bubble 兄弟相邻选择器,&quot;例如 h1 + p &#123;margin-top:50px;&#125;&quot; %&#125;，&#123;% bubble flex布局,&quot;Flex 是 Flexible Box 的缩写，意为&quot;弹性布局&quot;，用来为盒状模型提供最大的灵活性&quot;,&quot;#ec5830&quot; %&#125;，&#123;% bubble transform变换,&quot;transform 属性向元素应用 2D 或 3D 转换。该属性允许我们对元素进行旋转、缩放、移动或倾斜。&quot;,&quot;#1db675&quot; %&#125;，animation的&#123;% bubble 贝塞尔速度曲线,&quot;贝塞尔曲线(Bézier curve)，又称贝兹曲线或贝济埃曲线，是应用于二维图形应用程序的数学曲线。一般的矢量图形软件通过它来精确画出曲线，贝兹曲线由线段与节点组成，节点是可拖动的支点，线段像可伸缩的皮筋&quot;,&quot;#de4489&quot; %&#125;写法，还有今天刚看到的&#123;% bubble clip-path,&quot;clip-path属性使用裁剪方式创建元素的可显示区域。区域内的部分显示，区域外的隐藏。&quot;,&quot;#868fd7&quot; %&#125;属性。这些对我来说很新颖的概念狠狠的冲击着我以前积累起来的设计思路。</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><p>最近我学到了不少新玩意儿（虽然对很多大佬来说这些已经是旧技术了），比如CSS的<span class="bubble-content">兄弟相邻选择器</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#71a4e3;">例如 h1 + p {margin-top:50px;}</span>&lt;/span&gt;，<span class="bubble-content">flex布局</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#ec5830;">Flex 是 Flexible Box 的缩写，意为弹性布局”，用来为盒状模型提供最大的灵活性”</span>&lt;/span&gt;，<span class="bubble-content">transform变换</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#1db675;">transform 属性向元素应用 2D 或 3D 转换。该属性允许我们对元素进行旋转、缩放、移动或倾斜。</span>&lt;/span&gt;，animation的<span class="bubble-content">贝塞尔速度曲线</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#de4489;">贝塞尔曲线(Bézier curve)，又称贝兹曲线或贝济埃曲线，是应用于二维图形应用程序的数学曲线。一般的矢量图形软件通过它来精确画出曲线，贝兹曲线由线段与节点组成，节点是可拖动的支点，线段像可伸缩的皮筋</span>&lt;/span&gt;写法，还有今天刚看到的<span class="bubble-content">clip-path</span><span class="bubble-notation"><span class="bubble-item" style="background-color:#868fd7;">clip-path属性使用裁剪方式创建元素的可显示区域。区域内的部分显示，区域外的隐藏。</span>&lt;/span&gt;属性。这些对我来说很新颖的概念狠狠的冲击着我以前积累起来的设计思路。</p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-28-引用文献-reference"><a href="#2-28-引用文献-reference" class="headerlink" title="2.28 引用文献 reference"></a>2.28 引用文献 reference</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">参数配置</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% referto [id] , [literature] %&#125;</span><br><span class="line">&#123;% referfrom [id] , [literature] , [url] %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><p>referto 引用上标</p>
<ul>
<li><p><code>id</code>: 上标序号内容，需与referfrom标签的id对应才能实现跳转</p>
</li>
<li><p><code>literature</code>: 引用的参考文献名称</p>
</li>
</ul>
</li>
<li><p>referfrom 引用出处</p>
<ul>
<li><p><code>id</code>: 序号内容，需与referto标签的id对应才能实现 跳转</p>
</li>
<li><p><code>literature</code>: 引用的参考文献名称</p>
</li>
<li><p><code>url</code>: 引用的参考文献链接，可省略</p>
</li>
</ul>
</li>
</ol></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">Akilarの糖果屋(akilar.top)是一个私人性质的博客&#123;% referto &#x27;[1]&#x27;,&#x27;Akilarの糖果屋群聊简介&#x27; %&#125;，从各类教程至生活点滴，无话不谈。建群的目的是提供一个闲聊的场所。博客采用Hexo框架&#123;% referto &#x27;[2]&#x27;,&#x27;Hexo中文文档&#x27; %&#125;，Butterfly主题&#123;% referto &#x27;[3]&#x27;,&#x27;Butterfly 安装文档(一) 快速开始&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">本项目参考了Volantis&#123;% referto &#x27;[4]&#x27;,&#x27;hexo-theme-volantis 标签插件&#x27; %&#125;的标签样式。引入<span class="code">`[tag].js`</span>，并针对<span class="code">`butterfly`</span>主题修改了相应的<span class="code">`[tag].styl`</span>。在此鸣谢<span class="code">`Volantis`</span>主题众开发者。</span><br><span class="line">主要参考内容包括各个volantis的内置标签插件文档&#123;% referto &#x27;[5]&#x27;,&#x27;Volantis文档:内置标签插件&#x27; %&#125;</span><br><span class="line">Butterfly主题的各个衍生魔改&#123;% referto &#x27;[6]&#x27;,&#x27;Butterfly 安装文档:标签外挂（Tag Plugins&#x27; %&#125;&#123;% referto &#x27;[7]&#x27;,&#x27;小弋の生活馆全样式预览&#x27; %&#125;&#123;% referto &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27; %&#125;&#123;% referto &#x27;[9]&#x27;,&#x27;小康的butterfly主题使用文档&#x27; %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% referfrom &#x27;[1]&#x27;,&#x27;Akilarの糖果屋群聊简介&#x27;,&#x27;https://jq.qq.com/?<span class="emphasis">_wv=1027&amp;k=pGLB2C0N&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[2]&#x27;,&#x27;Hexo中文文档&#x27;,&#x27;https://hexo.io/zh-cn/docs/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[3]&#x27;,&#x27;Butterfly 安装文档(一) 快速开始&#x27;,&#x27;https://butterfly.js.org/posts/21cfbf15/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[4]&#x27;,&#x27;hexo-theme-volantis 标签插件&#x27;,&#x27;https://volantis.js.org/v5/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[5]&#x27;,&#x27;Volantis文档:内置标签插件&#x27;,&#x27;https://volantis.js.org/tag-plugins/&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[6]&#x27;,&#x27;Butterfly 安装文档:标签外挂（Tag Plugins&#x27;,&#x27;https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[7]&#x27;,&#x27;小弋の生活馆全样式预览&#x27;,&#x27;https://lovelijunyi.gitee.io/posts/c898.html&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[8]&#x27;,&#x27;l-lin-font-awesome-animation&#x27;,&#x27;https://github.com/l-lin/font-awesome-animation&#x27; %&#125;</span></span><br><span class="line"><span class="emphasis">&#123;% referfrom &#x27;[9]&#x27;,&#x27;小康的butterfly主题使用文档&#x27;,&#x27;https://www.antmoe.com/posts/3b43914f/&#x27; %&#125;</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><p>Akilarの糖果屋(akilar.top)是一个私人性质的博客<span class="hidden-anchor" id="referto_[1]">&lt;/span&gt;<sup class="reference"><a href="#referfrom_[1]">[1]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Akilarの糖果屋群聊简介</span><span class="reference-title">参考资料</span>&lt;/span&gt;&lt;/span&gt;，从各类教程至生活点滴，无话不谈。建群的目的是提供一个闲聊的场所。博客采用Hexo框架<span class="hidden-anchor" id="referto_[2]">&lt;/span&gt;<sup class="reference"><a href="#referfrom_[2]">[2]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Hexo中文文档</span><span class="reference-title">参考资料</span>&lt;/span&gt;&lt;/span&gt;，Butterfly主题<span class="hidden-anchor" id="referto_[3]">&lt;/span&gt;<sup class="reference"><a href="#referfrom_[3]">[3]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly 安装文档(一) 快速开始</span><span class="reference-title">参考资料</span>&lt;/span&gt;&lt;/span&gt;</p>
<p>本项目参考了Volantis<span class="hidden-anchor" id="referto_[4]">&lt;/span&gt;<sup class="reference"><a href="#referfrom_[4]">[4]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">hexo-theme-volantis 标签插件</span><span class="reference-title">参考资料</span>&lt;/span&gt;&lt;/span&gt;的标签样式。引入<code>[tag].js</code>，并针对<code>butterfly</code>主题修改了相应的<code>[tag].styl</code>。在此鸣谢<code>Volantis</code>主题众开发者。<br>主要参考内容包括各个volantis的内置标签插件文档<span class="hidden-anchor" id="referto_[5]">&lt;/span&gt;<sup class="reference"><a href="#referfrom_[5]">[5]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Volantis文档:内置标签插件</span><span class="reference-title">参考资料</span>&lt;/span&gt;&lt;/span&gt;<br>Butterfly主题的各个衍生魔改<span class="hidden-anchor" id="referto_[6]">&lt;/span&gt;<sup class="reference"><a href="#referfrom_[6]">[6]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">Butterfly 安装文档:标签外挂（Tag Plugins</span><span class="reference-title">参考资料</span>&lt;/span&gt;&lt;/span&gt;<span class="hidden-anchor" id="referto_[7]">&lt;/span&gt;<sup class="reference"><a href="#referfrom_[7]">[7]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">小弋の生活馆全样式预览</span><span class="reference-title">参考资料</span>&lt;/span&gt;&lt;/span&gt;<span class="hidden-anchor" id="referto_[8]">&lt;/span&gt;<sup class="reference"><a href="#referfrom_[8]">[8]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">l-lin-font-awesome-animation</span><span class="reference-title">参考资料</span>&lt;/span&gt;&lt;/span&gt;<span class="hidden-anchor" id="referto_[9]">&lt;/span&gt;<sup class="reference"><a href="#referfrom_[9]">[9]</a></sup><span class="reference-bubble"><span class="reference-item"><span class="reference-literature">小康的butterfly主题使用文档</span><span class="reference-title">参考资料</span>&lt;/span&gt;&lt;/span&gt;</p>
<div class="reference-source"><span class="hidden-anchor" id="referfrom_[1]"></span><a class="reference-anchor" href="#referto_[1]">[1]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://jq.qq.com/?_wv=1027&k=pGLB2C0N">Akilarの糖果屋群聊简介</a></div>
<div class="reference-source"><span class="hidden-anchor" id="referfrom_[2]"></span><a class="reference-anchor" href="#referto_[2]">[2]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://hexo.io/zh-cn/docs/">Hexo中文文档</a></div>
<div class="reference-source"><span class="hidden-anchor" id="referfrom_[3]"></span><a class="reference-anchor" href="#referto_[3]">[3]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/21cfbf15/">Butterfly 安装文档(一) 快速开始</a></div>
<div class="reference-source"><span class="hidden-anchor" id="referfrom_[4]"></span><a class="reference-anchor" href="#referto_[4]">[4]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/v5/tag-plugins/">hexo-theme-volantis 标签插件</a></div>
<div class="reference-source"><span class="hidden-anchor" id="referfrom_[5]"></span><a class="reference-anchor" href="#referto_[5]">[5]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://volantis.js.org/tag-plugins/">Volantis文档:内置标签插件</a></div>
<div class="reference-source"><span class="hidden-anchor" id="referfrom_[6]"></span><a class="reference-anchor" href="#referto_[6]">[6]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://butterfly.js.org/posts/4aa8abbe/#%E6%A8%99%E7%B1%A4%E5%A4%96%E6%8E%9B%EF%BC%88Tag-Plugins%EF%BC%89">Butterfly 安装文档:标签外挂（Tag Plugins</a></div>
<div class="reference-source"><span class="hidden-anchor" id="referfrom_[7]"></span><a class="reference-anchor" href="#referto_[7]">[7]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://lovelijunyi.gitee.io/posts/c898.html">小弋の生活馆全样式预览</a></div>
<div class="reference-source"><span class="hidden-anchor" id="referfrom_[8]"></span><a class="reference-anchor" href="#referto_[8]">[8]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://github.com/l-lin/font-awesome-animation">l-lin-font-awesome-animation</a></div>
<div class="reference-source"><span class="hidden-anchor" id="referfrom_[9]"></span><a class="reference-anchor" href="#referto_[9]">[9]<div class="reference-anchor-up fa-solid fa-angles-up"></div></a><a class="reference-link" href="https://www.antmoe.com/posts/3b43914f/">小康的butterfly主题使用文档</a></div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-29-PDF展示"><a href="#2-29-PDF展示" class="headerlink" title="2.29 PDF展示"></a>2.29 PDF展示</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">参数配置</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% pdf 文件路径 %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li><code>文件路径</code>: 可以是相对路径或者是在线链接</li>
</ol></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section"># 1.本地文件:在md文件路径下创建一个同名文件夹，其内放pdf文件名为xxx.pdf的文件</span></span><br><span class="line">&#123;% pdf xxx.pdf %&#125;</span><br><span class="line"><span class="section"># 2.在线链接</span></span><br><span class="line">&#123;% pdf https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/小作文讲义.pdf %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><p>2.在线链接(要放到最外层才能起作用)</p>
<pre><code>&lt;div class=&quot;row&quot;&gt;
&lt;embed src=&quot;https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/pdf/小作文讲义.pdf&quot; width=&quot;100%&quot; height=&quot;550&quot; type=&quot;application/pdf&quot;&gt;
&lt;/div&gt;
</code></pre></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-30-Hexo-tag-map-插件"><a href="#2-30-Hexo-tag-map-插件" class="headerlink" title="2.30 Hexo-tag-map 插件"></a>2.30 Hexo-tag-map 插件</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">参数配置</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% + 标签值 + 经度 + 纬度 + 文本 + 缩放等级 + 宽 + 高 + 默认图层 + %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">地图名</th>
<th style="text-align:center">标签值 &lt;必填&gt;</th>
<th style="text-align:center">宽 (默认 100%) / 高 (默认 360px)</th>
<th style="text-align:center">缩放等级 (默认 14)</th>
<th style="text-align:center">宽 (默认 100%) / 高 (默认 360px)</th>
<th style="text-align:center">默认图层 (默认 1)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">混合地图</td>
<td style="text-align:center">map</td>
<td style="text-align:center">百分数或具体值 (100% 或 360px)</td>
<td style="text-align:center">取值 3~18</td>
<td style="text-align:center">百分数或具体值 (100% 或 360px)</td>
<td style="text-align:center">取值 1~7</td>
</tr>
<tr>
<td style="text-align:center">谷歌地图</td>
<td style="text-align:center">googleMap</td>
<td style="text-align:center">百分数或具体值 (100% 或 360px)</td>
<td style="text-align:center">取值 1~20</td>
<td style="text-align:center">百分数或具体值 (100% 或 360px)</td>
<td style="text-align:center">取值 1~3</td>
</tr>
<tr>
<td style="text-align:center">高德地图</td>
<td style="text-align:center">gaodeMap</td>
<td style="text-align:center">百分数或具体值 (100% 或 360px)</td>
<td style="text-align:center">取值 3~18</td>
<td style="text-align:center">百分数或具体值 (100% 或 360px)</td>
<td style="text-align:center">取值 1~3</td>
</tr>
<tr>
<td style="text-align:center">百度地图</td>
<td style="text-align:center">baiduMap</td>
<td style="text-align:center">百分数或具体值 (100% 或 360px)</td>
<td style="text-align:center">取值 4~18</td>
<td style="text-align:center">百分数或具体值 (100% 或 360px)</td>
<td style="text-align:center">取值 1~2</td>
</tr>
<tr>
<td style="text-align:center">Geoq 地图</td>
<td style="text-align:center">geoqMap</td>
<td style="text-align:center">百分数或具体值 (100% 或 360px)</td>
<td style="text-align:center">取值 1~18</td>
<td style="text-align:center">百分数或具体值 (100% 或 360px)</td>
<td style="text-align:center">取值 1~5</td>
</tr>
<tr>
<td style="text-align:center">openstreet 地图</td>
<td style="text-align:center">openstreetMap</td>
<td style="text-align:center">百分数或具体值 (100% 或 360px)</td>
<td style="text-align:center">取值 1~18</td>
<td style="text-align:center">百分数或具体值 (100% 或 360px)</td>
<td style="text-align:center">不支持此参数</td>
</tr>
</tbody>
</table>
</div>
<ol>
<li>参数之间，用英文逗号相隔</li>
<li>参数必须按上述事例顺序输入，不得为空</li>
<li>同一个页面，同一组经纬度值，只能插入一个相同标签值的地图 (若有需要，可以将第二个地图上，经度或纬度末尾删除一两个数)</li>
<li>参数取值必须在上述范围内</li>
<li>默认图层：即地图叠加层的值，默认常规地图还是卫星地图，可按地图显示顺序取值</li>
<li>缩放等级，数字越大，地图比例尺越小，显示的越精细</li>
<li>除标签值外，其他参数选填，但 每个参数的左边的参数必填</li>
<li>谷歌地图需要外网才能加载查看</li>
</ol>
<p>坐标获取：<a href="https://lbs.amap.com/tools/picker">高德地图坐标拾取系统</a> 、<a href="https://api.map.baidu.com/lbsapi/getpoint/index.html">百度地图坐标拾取系统</a></p></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% map 120.101101,30.239119 %&#125;</span><br><span class="line">&#123;% googleMap 120.101101,30.239119, 这里是西湖灵隐寺，据说求姻缘很灵验哦！ %&#125;</span><br><span class="line">&#123;% geoqMap 120.101101,30.239119, 这里是西湖灵隐寺，据说求姻缘很灵验哦！, 13, 90%, 320px, 3 %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><p><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div class="map-box" style="margin: 0.8rem 0 1.6rem 0;"><div id="map-120.101101-30.239119" style="max-width:100%; height:360px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div>&lt;/div&gt;<script type="text/javascript">var normalm=L.tileLayer.chinaProvider('GaoDe.Normal.Map',{maxZoom:20,minZoom:1,attribution:'高德地图'});var imgm=L.tileLayer.chinaProvider('GaoDe.Satellite.Map',{maxZoom:20,minZoom:1,attribution:'高德地图'});var imga=L.tileLayer.chinaProvider('GaoDe.Satellite.Annotion',{maxZoom:20,minZoom:1,attribution:'高德地图'});var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:20,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'});routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:21,minZoom:1});var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:21,minZoom:1,attribution:'Google Maps'}),routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:21,minZoom:1,attribution:'Google Maps'});var normalm1=L.tileLayer.chinaProvider('Geoq.Normal.Map',{maxZoom:21,minZoom:1,attribution:'GeoQ'});var normal=L.layerGroup([normalm]),image=L.layerGroup([imgm,imga]);var baseLayers={"高德地图":normal,"智图地图":normalm1,"谷歌地图":normalMap,"高德卫星地图":imgm,"谷歌卫星地图":satelliteMap,"高德卫星标注":image,"谷歌卫星标注":routeMap};var mymap=L.map('map-120.101101-30.239119',{center:[30.239119,120.101101],zoom:14,layers:[normal],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'放大',zoomOutTitle:'缩小'}).addTo(mymap);</script><br><br></p>
<p><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div id="googleMap-120.101101-30.239119" style="max-width:100%; height:360px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div><script type="text/javascript">var normalMap=L.tileLayer.chinaProvider('Google.Normal.Map',{maxZoom:22,minZoom:1,attribution:'Google Maps'}),satelliteMap=L.tileLayer.chinaProvider('Google.Satellite.Map',{maxZoom:22,minZoom:1,attribution:'Google Maps'}),routeMap=L.tileLayer.chinaProvider('Google.Satellite.Annotion',{maxZoom:22,minZoom:1,attribution:'Google Maps'});var baseLayers={"谷歌地图":normalMap,"谷歌卫星图":satelliteMap,"谷歌卫星标注": routeMap};var overlayLayers={};var mymap=L.map("googleMap-120.101101-30.239119",{center:[30.239119,120.101101],zoom:14,layers:[normalMap],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'放大',zoomOutTitle:'缩小'}).addTo(mymap);var marker = L.marker(['30.239119','120.101101']).addTo(mymap);marker.bindPopup("这里是西湖灵隐寺，据说求姻缘很灵验哦！").openPopup();</script><br><br></p>
<p><link rel="stylesheet" href="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.css"><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet@1.7.1.js"></script><script data-pjax src="//unpkg.com/hexo-tag-map/lib/leaflet.ChineseTmsProviders@1.0.4.js"></script><div id="geoqMap-120.101101-30.239119" style="max-width:90%; height:320px;display: block;margin:0 auto;z-index:1;border-radius: 5px;"></div><script type="text/javascript">var normalm1=L.tileLayer.chinaProvider('Geoq.Normal.Map',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm2=L.tileLayer.chinaProvider('Geoq.Normal.PurplishBlue',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm3=L.tileLayer.chinaProvider('Geoq.Normal.Gray',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm4=L.tileLayer.chinaProvider('Geoq.Normal.Warm',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normalm5=L.tileLayer.chinaProvider('Geoq.Theme.Hydro',{maxZoom:20,minZoom:1,attribution:'GeoQ'});var normal=L.layerGroup([normalm1,normalm2,normalm3,normalm4,normalm5]);var baseLayers={"智图地图":normalm1,"午夜蓝":normalm2,"灰色":normalm3,"暖色":normalm4,"水系":normalm5};var mymap=L.map("geoqMap-120.101101-30.239119",{center:[30.239119,120.101101],zoom:13,layers:[normalm3],zoomControl:false});L.control.layers(baseLayers,null).addTo(mymap);L.control.zoom({zoomInTitle:'放大',zoomOutTitle:'缩小'}).addTo(mymap);var marker = L.marker(['30.239119','120.101101']).addTo(mymap);marker.bindPopup("这里是西湖灵隐寺，据说求姻缘很灵验哦！").openPopup();</script><br><br></p></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="2-31-隐藏块"><a href="#2-31-隐藏块" class="headerlink" title="2.31 隐藏块"></a>2.31 隐藏块</h2><div class="tabs" id="分栏"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="分栏-1">标签语法</button><button type="button" class="tab " data-href="分栏-2">参数配置</button><button type="button" class="tab " data-href="分栏-3">示例源码</button><button type="button" class="tab " data-href="分栏-4">渲染演示</button></ul><div class="tab-contents"><div class="tab-item-content active" id="分栏-1"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% hideBlock display,bg,color %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-2"><ol>
<li>content：要隐藏的内容</li>
<li>display：展示前按钮显示的文字（可选）</li>
<li>bg：按钮的背景颜色（可选）</li>
<li>color：按钮显示的文字的颜色（可选）</li>
</ol></div><div class="tab-item-content" id="分栏-3"><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&#123;% hideBlock 点我预览, blue %&#125;</span><br><span class="line">这里有张图片：</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://s1.vika.cn/space/2022/10/30/b35fce448bc9404a8d65c3ce1e6e46eb&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;image (1)&quot;</span> <span class="attr">style</span>=<span class="string">&quot;zoom:67%;&quot;</span> /&gt;</span></span></span><br><span class="line">&#123;% endhideBlock %&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="分栏-4"><div class="hide-block"><button type="button" class="hide-button" style="background-color:  blue;">点我预览
    </button><div class="hide-content"><p>这里有张图片：<br><img src="https://s1.vika.cn/space/2022/10/30/b35fce448bc9404a8d65c3ce1e6e46eb" alt="image (1)" style="zoom:67%;" /></p>
</div></div></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>]]></content>
      <categories>
        <category>教程</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>面试题</tag>
      </tags>
  </entry>
  <entry>
    <title>vue router</title>
    <url>/2023/08/09/vue-router/</url>
    <content><![CDATA[<h1 id="Vue-router路由"><a href="#Vue-router路由" class="headerlink" title="Vue-router路由"></a>Vue-router路由</h1><h2 id="1-Vue路由简介和基础使用"><a href="#1-Vue路由简介和基础使用" class="headerlink" title="1 Vue路由简介和基础使用"></a>1 Vue路由简介和基础使用</h2><h3 id="1-1-什么是路由"><a href="#1-1-什么是路由" class="headerlink" title="1.1 什么是路由"></a>1.1 什么是路由</h3><ul>
<li>路由器：设备和ip的映射关系</li>
<li>nodejs路由：接口和服务的映射关系</li>
<li>前端路由：路径和组件的映射关系</li>
</ul>
<h3 id="1-2-为什么使用路由"><a href="#1-2-为什么使用路由" class="headerlink" title="1.2 为什么使用路由"></a>1.2 为什么使用路由</h3><blockquote>
<p>目标: 在一个页面里, 切换业务场景</p>
</blockquote>
<p>具体使用示例: 网易云音乐 <a href="https://music.163.com/">https://music.163.com/</a></p>
<p>单页面应用(SPA): 所有功能在一个html页面上实现</p>
<p>前端路由作用: 实现业务场景切换</p>
<p>优点：</p>
<ul>
<li><p>整体不刷新页面，用户体验更好</p>
</li>
<li><p>数据传递容易, 开发效率高</p>
</li>
</ul>
<p>缺点：</p>
<ul>
<li><p>开发成本高(需要学习专门知识)</p>
</li>
<li><p>首次加载会比较慢一点。不利于seo</p>
</li>
</ul>
<h3 id="1-3-vue-router介绍"><a href="#1-3-vue-router介绍" class="headerlink" title="1.3 vue-router介绍"></a>1.3 vue-router介绍</h3><blockquote>
<p>目标: 如何在Vue项目中集成路由</p>
</blockquote>
<p>官网: <a href="https://router.vuejs.org/zh/">https://router.vuejs.org/zh/</a></p>
<p>vue-router模块包</p>
<p>它和 Vue.js 深度集成</p>
<p>可以定义 - 视图表(映射规则)</p>
<p>模块化的</p>
<p>提供2个内置全局组件</p>
<p>声明式导航自动激活的 CSS class 的链接</p>
<p>……</p>
<h3 id="1-4-组件分类"><a href="#1-4-组件分类" class="headerlink" title="1.4 组件分类"></a>1.4 组件分类</h3><blockquote>
<p>目标:  .vue文件分2类, 一个是页面组件, 一个是复用组件</p>
</blockquote>
<p>.vue文件本质无区别, 方便大家学习和理解, 总结的一个经验</p>
<p>src/views(或pages) 文件夹 和 src/components文件夹</p>
<ul>
<li>页面组件 - 页面展示 - 配合路由用</li>
<li>复用组件 - 展示数据/常用于复用</li>
</ul>
<blockquote>
<p>总结: views下的页面组件, 配合路由切换, components下的一般引入到views下的vue中复用展示数据</p>
</blockquote>
<h3 id="1-5-vue-router使用"><a href="#1-5-vue-router使用" class="headerlink" title="1.5 vue-router使用"></a>1.5 vue-router使用</h3><blockquote>
<p>目标: 学会vue官方提供的vue-router路由系统功能模块使用</p>
</blockquote>
<p><a href="https://router.vuejs.org/zh/">vue-router文档</a></p>
<ul>
<li>安装</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add vue-router</span><br></pre></td></tr></table></figure>
<ul>
<li>导入路由</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>使用路由插件</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在vue中，使用使用vue的插件，都需要调用Vue.use()</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>创建路由规则数组</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/find&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Find</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/my&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">My</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/part&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Part</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<ul>
<li>创建路由对象 -  传入规则</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>关联到vue实例</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>components换成router-view</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结: 下载路由模块, 编写对应规则注入到vue实例上, 使用router-view挂载点显示切换的路由</p>
<p>总结: 一切都围绕着hash值变化为准</p>
</blockquote>
<h2 id="2-声明式导航"><a href="#2-声明式导航" class="headerlink" title="2 声明式导航"></a>2 声明式导航</h2><h3 id="2-1-基础使用"><a href="#2-1-基础使用" class="headerlink" title="2.1 基础使用"></a>2.1 基础使用</h3><blockquote>
<p>目标: 可用全局组件router-link来替代a标签</p>
</blockquote>
<ol>
<li>vue-router提供了一个全局组件 router-link</li>
<li>router-link实质上最终会渲染成a链接 to属性等价于提供 href属性(to无需#)</li>
<li>router-link提供了声明式导航高亮的功能(自带类名)</li>
</ol>
<blockquote>
<p>总结: 链接导航, 用router-link配合to, 实现点击切换路由</p>
</blockquote>
<h3 id="2-2-跳转传参"><a href="#2-2-跳转传参" class="headerlink" title="2.2 跳转传参"></a>2.2 跳转传参</h3><blockquote>
<p>目标: 在跳转路由时, 可以给路由对应的组件内传值</p>
</blockquote>
<p>在router-link上的to属性传值, 语法格式如下</p>
<ul>
<li><p>/path?参数名=值</p>
</li>
<li><p>/path/值 – 需要路由对象提前配置 path: “/path/参数名”</p>
</li>
</ul>
<p>对应页面组件接收传递过来的值</p>
<ul>
<li><p>$route.query.参数名</p>
</li>
<li><p>$route.params.参数名</p>
</li>
</ul>
<ol>
<li><p>创建components/Part.vue - 准备接收路由上传递的参数和值</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;p&gt;关注明星&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;发现精彩&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;寻找伙伴&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;加入我们&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;人名: &#123;&#123; $route.query.name &#125;&#125; -- &#123;&#123; $route.params.username &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>路由定义</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/part&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Part</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/part/:username&quot;</span>, <span class="comment">// 有:的路径代表要接收具体的值</span></span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Part</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
</li>
<li><p>导航跳转, 传值给MyGoods.vue组件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;router-link to=&quot;/part?name=小传&quot;&gt;朋友-小传&lt;/router-link&gt;</span><br><span class="line">&lt;router-link to=&quot;/part/小智&quot;&gt;朋友-小智&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>总结: </p>
<p>?key=value   用$route.query.key 取值</p>
<p>/值   提前在路由规则/path/:key  用$route.params.key  取值</p>
</blockquote>
<h2 id="3-重定向和模式"><a href="#3-重定向和模式" class="headerlink" title="3 重定向和模式"></a>3 重定向和模式</h2><h3 id="3-1-重定向"><a href="#3-1-重定向" class="headerlink" title="3.1 重定向"></a>3.1 重定向</h3><blockquote>
<p>目标: 匹配path后, 强制切换到目标path上</p>
</blockquote>
<ul>
<li>网页打开url默认hash值是/路径</li>
<li>redirect是设置要重定向到哪个路由路径</li>
</ul>
<p>例如: 网页默认打开, 匹配路由”/“, 强制切换到”/find”上</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>, <span class="comment">// 默认hash值路径</span></span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&quot;/find&quot;</span> <span class="comment">// 重定向到/find</span></span><br><span class="line">    <span class="comment">// 浏览器url中#后的路径被改变成/find-重新匹配数组规则</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结: 强制重定向后, 还会重新来数组里匹配一次规则</p>
</blockquote>
<h3 id="3-2-404页面"><a href="#3-2-404页面" class="headerlink" title="3.2 404页面"></a>3.2 404页面</h3><blockquote>
<p>目标: 如果路由hash值, 没有和数组里规则匹配</p>
</blockquote>
<p>默认给一个404页面</p>
<p>语法: 路由最后, path匹配*(任意路径) – 前面不匹配就命中最后这个, 显示对应组件页面</p>
<ol>
<li><p>创建NotFound页面</p>
</li>
<li><p>在main.js - 修改路由配置</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">NotFound</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/NotFound&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// ...省略了其他配置</span></span><br><span class="line">  <span class="comment">// 404在最后(规则是从前往后逐个比较path)</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;*&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">NotFound</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>总结: 如果路由未命中任何规则, 给出一个兜底的404页面</p>
</blockquote>
<h3 id="3-2-路由-模式设置"><a href="#3-2-路由-模式设置" class="headerlink" title="3.2 路由 - 模式设置"></a>3.2 路由 - 模式设置</h3><blockquote>
<p>目标: 修改路由在地址栏的模式</p>
</blockquote>
<p>hash路由例如:  <a href="http://localhost:8080/#/home">http://localhost:8080/#/home</a></p>
<p>history路由例如: <a href="http://localhost:8080/home">http://localhost:8080/home</a>  (以后上线需要服务器端支持, 否则找的是文件夹)</p>
<p><a href="https://router.vuejs.org/zh/api/#mode">模式文档</a></p>
<p>在main.js中设置</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;history&quot;</span> <span class="comment">// 打包上线后需要后台支持, 模式是hash</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="4-编程式导航"><a href="#4-编程式导航" class="headerlink" title="4 编程式导航"></a>4 编程式导航</h2><h3 id="4-1-基础使用"><a href="#4-1-基础使用" class="headerlink" title="4.1 基础使用"></a>4.1 基础使用</h3><blockquote>
<p>目标: 用JS代码来进行跳转</p>
</blockquote>
<p>语法:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;路由路径&quot;</span>, <span class="comment">// 都去 router/index.js定义</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;路由名&quot;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ol>
<li>main.js - 路由数组里, 给路由起名字</li>
</ol>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    path<span class="punctuation">:</span> <span class="string">&quot;/find&quot;</span><span class="punctuation">,</span></span><br><span class="line">    name<span class="punctuation">:</span> <span class="string">&quot;Find&quot;</span><span class="punctuation">,</span></span><br><span class="line">    component<span class="punctuation">:</span> Find</span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    path<span class="punctuation">:</span> <span class="string">&quot;/my&quot;</span><span class="punctuation">,</span></span><br><span class="line">    name<span class="punctuation">:</span> <span class="string">&quot;My&quot;</span><span class="punctuation">,</span></span><br><span class="line">    component<span class="punctuation">:</span> My</span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    path<span class="punctuation">:</span> <span class="string">&quot;/part&quot;</span><span class="punctuation">,</span></span><br><span class="line">    name<span class="punctuation">:</span> <span class="string">&quot;Part&quot;</span><span class="punctuation">,</span></span><br><span class="line">    component<span class="punctuation">:</span> Part</span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
<ol>
<li>App.vue - 换成span 配合js的编程式导航跳转</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class=&quot;footer_wrap&quot;&gt;</span><br><span class="line">      &lt;span @click=&quot;btn(&#x27;/find&#x27;, &#x27;Find&#x27;)&quot;&gt;发现音乐&lt;/span&gt;</span><br><span class="line">      &lt;span @click=&quot;btn(&#x27;/my&#x27;, &#x27;My&#x27;)&quot;&gt;我的音乐&lt;/span&gt;</span><br><span class="line">      &lt;span @click=&quot;btn(&#x27;/part&#x27;, &#x27;Part&#x27;)&quot;&gt;朋友&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;top&quot;&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 目标: 编程式导航 - js方式跳转路由</span><br><span class="line">// 语法:</span><br><span class="line">// this.$router.push(&#123;path: &quot;路由路径&quot;&#125;)</span><br><span class="line">// this.$router.push(&#123;name: &quot;路由名&quot;&#125;)</span><br><span class="line">// 注意:</span><br><span class="line">// 虽然用name跳转, 但是url的hash值还是切换path路径值</span><br><span class="line">// 场景:</span><br><span class="line">// 方便修改: name路由名(在页面上看不见随便定义)</span><br><span class="line">// path可以在url的hash值看到(尽量符合组内规范)</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    btn(targetPath, targetName)&#123;</span><br><span class="line">      // 方式1: path跳转</span><br><span class="line">      this.$router.push(&#123;</span><br><span class="line">        // path: targetPath,</span><br><span class="line">        name: targetName</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="4-2-跳转传参"><a href="#4-2-跳转传参" class="headerlink" title="4.2 跳转传参"></a>4.2 跳转传参</h3><blockquote>
<p>目标: JS跳转路由, 传参</p>
</blockquote>
<p>语法 query / params 任选 一个</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;路由路径&quot;</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;路由名&quot;</span>,</span><br><span class="line">    <span class="attr">query</span>: &#123;</span><br><span class="line">    	<span class="string">&quot;参数名&quot;</span>: 值</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">		<span class="string">&quot;参数名&quot;</span>: 值</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对应路由接收   $route.params.参数名   取值</span></span><br><span class="line"><span class="comment">// 对应路由接收   $route.query.参数名    取值</span></span><br></pre></td></tr></table></figure>
<p>==格外注意: 使用path会自动忽略params==</p>
<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class=&quot;footer_wrap&quot;&gt;</span><br><span class="line">      &lt;span @click=&quot;btn(&#x27;/find&#x27;, &#x27;Find&#x27;)&quot;&gt;发现音乐&lt;/span&gt;</span><br><span class="line">      &lt;span @click=&quot;btn(&#x27;/my&#x27;, &#x27;My&#x27;)&quot;&gt;我的音乐&lt;/span&gt;</span><br><span class="line">      &lt;span @click=&quot;oneBtn&quot;&gt;朋友-小传&lt;/span&gt;</span><br><span class="line">      &lt;span @click=&quot;twoBtn&quot;&gt;朋友-小智&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;top&quot;&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    btn(targetPath, targetNmae) &#123;</span><br><span class="line">      // 方式1：用path跳转</span><br><span class="line">      this.$router.push(&#123;</span><br><span class="line">        // path: targetPath,</span><br><span class="line">        name: targetNmae,</span><br><span class="line">      &#125;);</span><br><span class="line">      //</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结: 传参2种方式</p>
<p>query方式 </p>
<p>params方式 </p>
</blockquote>
<h2 id="5-嵌套和守卫"><a href="#5-嵌套和守卫" class="headerlink" title="5 嵌套和守卫"></a>5 嵌套和守卫</h2><h3 id="5-1-路由嵌套"><a href="#5-1-路由嵌套" class="headerlink" title="5.1 路由嵌套"></a>5.1 路由嵌套</h3><blockquote>
<p>目标: 在现有的一级路由下, 再嵌套二级路由</p>
</blockquote>
<p><a href="https://music.163.com/">二级路由示例-网易云音乐-发现音乐下</a></p>
<p>router-view嵌套架构图</p>
<ol>
<li><p>创建需要用的所有组件</p>
<p>src/views/Find.vue — 发现音乐页</p>
<p>src/views/My.vue — 我的音乐页</p>
<p>src/views/Second/Recommend.vue  — 发现音乐页 / 推荐页面</p>
<p>src/views/Second/Ranking.vue      — 发现音乐页 / 排行榜页面</p>
<p>src/views/Second/SongList.vue     — 发现音乐页 / 歌单页面</p>
</li>
<li><p>main.js– 继续配置2级路由</p>
<p>一级路由path从/开始定义</p>
<p>二级路由往后path直接写名字, 无需/开头</p>
<p>嵌套路由在上级路由的children数组里编写路由信息对象</p>
</li>
<li><p>说明：</p>
<p>App.vue的router-view负责发现音乐和我的音乐页面, 切换</p>
<p>Find.vue的的router-view负责发现音乐下的, 三个页面, 切换</p>
<ol>
<li>在Find.vue中</li>
</ol>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- &lt;p&gt;推荐&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;排行榜&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;歌单&lt;/p&gt; --&gt;</span><br><span class="line">    &lt;div class=&quot;nav_main&quot;&gt;</span><br><span class="line">      &lt;router-link to=&quot;/find/recommend&quot;&gt;推荐&lt;/router-link&gt;</span><br><span class="line">      &lt;router-link to=&quot;/find/ranking&quot;&gt;排行榜&lt;/router-link&gt;</span><br><span class="line">      &lt;router-link to=&quot;/find/songlist&quot;&gt;歌单&lt;/router-link&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div style=&quot;1px solid red;&quot;&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<ol>
<li>配置路由规则-二级路由展示</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// ...省略其他</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/find&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Find&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Find</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;recommend&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Recommend</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;ranking&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Ranking</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;songlist&quot;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">SongList</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...省略其他</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<ol>
<li>说明：</li>
</ol>
<ul>
<li><p>App.vue, 外层的router-view负责发现音乐和我的音乐页面切换</p>
</li>
<li><p>Find.vue 内层的router-view负责发现音乐下的子tab对应的组件切换</p>
</li>
</ul>
<ol>
<li>运行 - 点击导航观察嵌套路由在哪里展示</li>
</ol>
<blockquote>
<p>总结: 嵌套路由, 找准在哪个页面里写router-view和对应规则里写children</p>
</blockquote>
<h3 id="5-2-声明导航-类名区别"><a href="#5-2-声明导航-类名区别" class="headerlink" title="5.2 声明导航 - 类名区别"></a>5.2 声明导航 - 类名区别</h3><blockquote>
<p>目标: router-link自带的2个类名的区别是什么</p>
</blockquote>
<p>观察路由嵌套导航的样式</p>
<ul>
<li><p>router-link-exact-active  (精确匹配) url中hash值路径, 与href属性值完全相同, 设置此类名</p>
</li>
<li><p>router-link-active             (模糊匹配) url中hash值,    包含href属性值这个路径</p>
</li>
</ul>
<h3 id="5-3-全局前置守卫"><a href="#5-3-全局前置守卫" class="headerlink" title="5.3 全局前置守卫"></a>5.3 全局前置守卫</h3><blockquote>
<p>目标: 路由跳转之前, 先执行一次前置守卫函数, 判断是否可以正常跳转</p>
</blockquote>
<p>使用例子: 在跳转路由前, 判断用户登陆了才能去&lt;我的音乐&gt;页面, 未登录弹窗提示回到发现音乐页面</p>
<ol>
<li>在路由对象上使用固定方法beforeEach</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 目标: 路由守卫</span></span><br><span class="line"><span class="comment">// 场景: 当你要对路由权限判断时</span></span><br><span class="line"><span class="comment">// 语法: router.beforeEach((to, from, next)=&gt;&#123;//路由跳转&quot;之前&quot;先执行这里, 决定是否跳转&#125;)</span></span><br><span class="line"><span class="comment">// 参数1: 要跳转到的路由 (路由对象信息)    目标</span></span><br><span class="line"><span class="comment">// 参数2: 从哪里跳转的路由 (路由对象信息)  来源</span></span><br><span class="line"><span class="comment">// 参数3: 函数体 - next()才会让路由正常的跳转切换, next(false)在原地停留, next(&quot;强制修改到另一个路由路径上&quot;)</span></span><br><span class="line"><span class="comment">// 注意: 如果不调用next, 页面留在原地</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 例子: 判断用户是否登录, 是否决定去&quot;我的音乐&quot;/my</span></span><br><span class="line"><span class="keyword">const</span> isLogin = <span class="literal">true</span>; <span class="comment">// 登录状态(未登录)</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (to.<span class="property">path</span> === <span class="string">&quot;/my&quot;</span> &amp;&amp; isLogin === <span class="literal">false</span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;请登录&quot;</span>)</span><br><span class="line">    <span class="title function_">next</span>(<span class="literal">false</span>) <span class="comment">// 阻止路由跳转</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">next</span>() <span class="comment">// 正常放行</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结: next()放行, next(false)留在原地不跳转路由, next(path路径)强制换成对应path路径跳转</p>
</blockquote>
]]></content>
      <categories>
        <category>编程学习</category>
      </categories>
      <tags>
        <tag>vue-router</tag>
        <tag>vue</tag>
        <tag>课程笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring高级50讲</title>
    <url>/2022/08/09/spring%E9%AB%98%E7%BA%A750%E8%AE%B2/</url>
    <content><![CDATA[<h2 id="容器与-bean"><a href="#容器与-bean" class="headerlink" title="容器与 bean"></a>容器与 bean</h2><h3 id="1-容器接口"><a href="#1-容器接口" class="headerlink" title="1) 容器接口"></a>1) 容器接口</h3><ul>
<li><p>BeanFactory 接口，典型功能有：</p>
<ul>
<li>getBean</li>
</ul>
</li>
<li><p>ApplicationContext 接口，是 BeanFactory 的子接口。它扩展了 BeanFactory 接口的功能，如：</p>
<ul>
<li>国际化</li>
<li>通配符方式获取一组 Resource 资源</li>
<li>整合 Environment 环境（能通过它获取各种来源的配置信息）</li>
<li>事件发布与监听，实现组件之间的解耦</li>
</ul>
</li>
</ul>
<p>可以看到，我们课上讲的，都是 BeanFactory 提供的基本功能，ApplicationContext 中的扩展功能都没有用到。</p>
<h4 id="演示1-BeanFactory-与-ApplicationContext-的区别"><a href="#演示1-BeanFactory-与-ApplicationContext-的区别" class="headerlink" title="演示1 - BeanFactory 与 ApplicationContext 的区别"></a>演示1 - BeanFactory 与 ApplicationContext 的区别</h4><h5 id="代码参考"><a href="#代码参考" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a01</strong> 包</p>
<h4 id="收获💡"><a href="#收获💡" class="headerlink" title="收获💡"></a>收获💡</h4><p>通过这个示例结合 debug 查看 ApplicationContext 对象的内部结构，学到：</p>
<ol>
<li><p>到底什么是 BeanFactory</p>
<ul>
<li>它是 ApplicationContext 的父接口</li>
<li>它才是 Spring 的核心容器, 主要的 ApplicationContext 实现都【组合】了它的功能，【组合】是指 ApplicationContext 的一个重要成员变量就是 BeanFactory</li>
</ul>
</li>
<li>BeanFactory 能干点啥<ul>
<li>表面上只有 getBean</li>
<li>实际上控制反转、基本的依赖注入、直至 Bean 的生命周期的各种功能，都由它的实现类提供</li>
<li>例子中通过反射查看了它的成员变量 singletonObjects，内部包含了所有的单例 bean</li>
</ul>
</li>
<li><p>ApplicationContext 比 BeanFactory 多点啥</p>
<ul>
<li>ApplicationContext 组合并扩展了 BeanFactory 的功能</li>
<li>国际化、通配符方式获取一组 Resource 资源、整合 Environment 环境、事件发布与监听</li>
<li>新学一种代码之间解耦途径，事件解耦</li>
</ul>
</li>
</ol>
<p>建议练习：完成用户注册与发送短信之间的解耦，用事件方式、和 AOP 方式分别实现</p>
<blockquote>
<p><strong><em>注意</em></strong></p>
<ul>
<li>如果 jdk &gt; 8, 运行时请添加 —add-opens java.base/java.lang=ALL-UNNAMED，这是因为这些版本的 jdk 默认不允许跨 module 反射</li>
<li>事件发布还可以异步，这个视频中没有展示，请自行查阅 @EnableAsync，@Async 的用法</li>
</ul>
</blockquote>
<h4 id="演示2-国际化"><a href="#演示2-国际化" class="headerlink" title="演示2 - 国际化"></a>演示2 - 国际化</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMessageSource</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">GenericApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GenericApplicationContext</span>();</span><br><span class="line"></span><br><span class="line">        context.registerBean(<span class="string">&quot;messageSource&quot;</span>, MessageSource.class, () -&gt; &#123;</span><br><span class="line">            <span class="type">ResourceBundleMessageSource</span> <span class="variable">ms</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceBundleMessageSource</span>();</span><br><span class="line">            ms.setDefaultEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            ms.setBasename(<span class="string">&quot;messages&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> ms;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        context.refresh();</span><br><span class="line"></span><br><span class="line">        System.out.println(context.getMessage(<span class="string">&quot;hi&quot;</span>, <span class="literal">null</span>, Locale.ENGLISH));</span><br><span class="line">        System.out.println(context.getMessage(<span class="string">&quot;hi&quot;</span>, <span class="literal">null</span>, Locale.CHINESE));</span><br><span class="line">        System.out.println(context.getMessage(<span class="string">&quot;hi&quot;</span>, <span class="literal">null</span>, Locale.JAPANESE));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>国际化文件均在 src/resources 目录下</p>
<p>messages.properties（空）</p>
<p>messages_en.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">hi</span>=<span class="string">Hello</span></span><br></pre></td></tr></table></figure>
<p>messages_ja.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">hi</span>=<span class="string">こんにちは</span></span><br></pre></td></tr></table></figure>
<p>messages_zh.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">hi</span>=<span class="string">你好</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><em>注意</em></strong></p>
<ul>
<li>ApplicationContext 中 MessageSource bean 的名字固定为 messageSource</li>
<li>使用 SpringBoot 时，国际化文件名固定为 messages</li>
<li>空的 messages.properties 也必须存在</li>
</ul>
</blockquote>
<h3 id="2-容器实现"><a href="#2-容器实现" class="headerlink" title="2) 容器实现"></a>2) 容器实现</h3><p>Spring 的发展历史较为悠久，因此很多资料还在讲解它较旧的实现，这里出于怀旧的原因，把它们都列出来，供大家参考</p>
<ul>
<li>DefaultListableBeanFactory，是 BeanFactory 最重要的实现，像<strong>控制反转</strong>和<strong>依赖注入</strong>功能，都是它来实现</li>
<li>ClassPathXmlApplicationContext，从类路径查找 XML 配置文件，创建容器（旧）</li>
<li>FileSystemXmlApplicationContext，从磁盘路径查找 XML 配置文件，创建容器（旧）</li>
<li>XmlWebApplicationContext，传统 SSM 整合时，基于 XML 配置文件的容器（旧）</li>
<li>AnnotationConfigWebApplicationContext，传统 SSM 整合时，基于 java 配置类的容器（旧）</li>
<li>AnnotationConfigApplicationContext，Spring boot 中非 web 环境容器（新）</li>
<li>AnnotationConfigServletWebServerApplicationContext，Spring boot 中 servlet web 环境容器（新）</li>
<li>AnnotationConfigReactiveWebServerApplicationContext，Spring boot 中 reactive web 环境容器（新）</li>
</ul>
<p>另外要注意的是，后面这些带有 ApplicationContext 的类都是 ApplicationContext 接口的实现，但它们是<strong>组合</strong>了 DefaultListableBeanFactory 的功能，并非继承而来</p>
<h4 id="演示1-DefaultListableBeanFactory"><a href="#演示1-DefaultListableBeanFactory" class="headerlink" title="演示1 - DefaultListableBeanFactory"></a>演示1 - DefaultListableBeanFactory</h4><h5 id="代码参考-1"><a href="#代码参考-1" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a02.TestBeanFactory</strong></p>
<h4 id="收获💡-1"><a href="#收获💡-1" class="headerlink" title="收获💡"></a>收获💡</h4><ul>
<li>beanFactory 可以通过 registerBeanDefinition 注册一个 bean definition 对象<ul>
<li>我们平时使用的配置类、xml、组件扫描等方式都是生成 bean definition 对象注册到 beanFactory 当中</li>
<li>bean definition 描述了这个 bean 的创建蓝图：scope 是什么、用构造还是工厂创建、初始化销毁方法是什么，等等</li>
</ul>
</li>
<li>beanFactory 需要手动调用 beanFactory 后处理器对它做增强<ul>
<li>例如通过解析 @Bean、@ComponentScan 等注解，来补充一些 bean definition</li>
</ul>
</li>
<li>beanFactory 需要手动添加 bean 后处理器，以便对后续 bean 的创建过程提供增强<ul>
<li>例如 @Autowired，@Resource 等注解的解析都是 bean 后处理器完成的</li>
<li>bean 后处理的添加顺序会对解析结果有影响，见视频中同时加 @Autowired，@Resource 的例子</li>
</ul>
</li>
<li>beanFactory 需要手动调用方法来初始化单例</li>
<li>beanFactory 需要额外设置才能解析 ${} 与 #{}</li>
</ul>
<h4 id="演示2-常见-ApplicationContext-实现"><a href="#演示2-常见-ApplicationContext-实现" class="headerlink" title="演示2 - 常见 ApplicationContext 实现"></a>演示2 - 常见 ApplicationContext 实现</h4><h5 id="代码参考-2"><a href="#代码参考-2" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a02.A02</strong></p>
<h4 id="收获💡-2"><a href="#收获💡-2" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>常见的 ApplicationContext 容器实现</li>
<li>内嵌容器、DispatcherServlet 的创建方法、作用</li>
</ol>
<h3 id="3-Bean-的生命周期"><a href="#3-Bean-的生命周期" class="headerlink" title="3) Bean 的生命周期"></a>3) Bean 的生命周期</h3><p>一个受 Spring 管理的 bean，生命周期主要阶段有</p>
<ol>
<li>创建：根据 bean 的构造方法或者工厂方法来创建 bean 实例对象</li>
<li>依赖注入：根据 @Autowired，@Value 或其它一些手段，为 bean 的成员变量填充值、建立关系</li>
<li>初始化：回调各种 Aware 接口，调用对象的各种初始化方法</li>
<li>销毁：在容器关闭时，会销毁所有单例对象（即调用它们的销毁方法）<ul>
<li>prototype 对象也能够销毁，不过需要容器这边主动调用</li>
</ul>
</li>
</ol>
<p>一些资料会提到，生命周期中还有一类 bean 后处理器：BeanPostProcessor，会在 bean 的初始化的前后，提供一些扩展逻辑。但这种说法是不完整的，见下面的演示1</p>
<p>1.构造器<br>2.aware接口,InitializingBean<br>3.BeanDefinitionRegistryPostProcessor<br>4.BeanFactoryPostProcessor<br>5.before<br>6.after</p>
<h4 id="演示1-bean-生命周期"><a href="#演示1-bean-生命周期" class="headerlink" title="演示1 - bean 生命周期"></a>演示1 - bean 生命周期</h4><h5 id="代码参考-3"><a href="#代码参考-3" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a03</strong> 包</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">graph LR</span><br><span class="line"></span><br><span class="line">创建 --&gt; 依赖注入</span><br><span class="line">依赖注入 --&gt; 初始化</span><br><span class="line">初始化 --&gt; 可用</span><br><span class="line">可用 --&gt; 销毁</span><br></pre></td></tr></table></figure>
<p>创建前后的增强</p>
<ul>
<li>postProcessBeforeInstantiation<ul>
<li>这里返回的对象若不为 null 会替换掉原本的 bean，并且仅会走 postProcessAfterInitialization 流程</li>
</ul>
</li>
<li>postProcessAfterInstantiation<ul>
<li>这里如果返回 false 会跳过依赖注入阶段</li>
</ul>
</li>
</ul>
<p>依赖注入前的增强</p>
<ul>
<li>postProcessProperties<ul>
<li>如 @Autowired、@Value、@Resource </li>
</ul>
</li>
</ul>
<p>初始化前后的增强</p>
<ul>
<li>postProcessBeforeInitialization<ul>
<li>这里返回的对象会替换掉原本的 bean</li>
<li>如 @PostConstruct、@ConfigurationProperties</li>
</ul>
</li>
<li>postProcessAfterInitialization <ul>
<li>这里返回的对象会替换掉原本的 bean</li>
<li>如代理增强</li>
</ul>
</li>
</ul>
<p>销毁之前的增强</p>
<ul>
<li>postProcessBeforeDestruction<ul>
<li>如 @PreDestroy </li>
</ul>
</li>
</ul>
<h4 id="收获💡-3"><a href="#收获💡-3" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>Spring bean 生命周期各个阶段</li>
<li>模板设计模式, 指大流程已经固定好了, 通过接口回调（bean 后处理器）在一些关键点前后提供扩展</li>
</ol>
<h4 id="演示2-模板方法设计模式"><a href="#演示2-模板方法设计模式" class="headerlink" title="演示2 - 模板方法设计模式"></a>演示2 - 模板方法设计模式</h4><h5 id="关键代码"><a href="#关键代码" class="headerlink" title="关键代码"></a>关键代码</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMethodTemplate</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyBeanFactory</span> <span class="variable">beanFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyBeanFactory</span>();</span><br><span class="line">        beanFactory.addBeanPostProcessor(bean -&gt; System.out.println(<span class="string">&quot;解析 @Autowired&quot;</span>));</span><br><span class="line">        beanFactory.addBeanPostProcessor(bean -&gt; System.out.println(<span class="string">&quot;解析 @Resource&quot;</span>));</span><br><span class="line">        beanFactory.getBean();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 模板方法  Template Method Pattern</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyBeanFactory</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> Object <span class="title function_">getBean</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">            System.out.println(<span class="string">&quot;构造 &quot;</span> + bean);</span><br><span class="line">            System.out.println(<span class="string">&quot;依赖注入 &quot;</span> + bean); <span class="comment">// @Autowired, @Resource</span></span><br><span class="line">            <span class="keyword">for</span> (BeanPostProcessor processor : processors) &#123;</span><br><span class="line">                processor.inject(bean);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;初始化 &quot;</span> + bean);</span><br><span class="line">            <span class="keyword">return</span> bean;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> List&lt;BeanPostProcessor&gt; processors = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addBeanPostProcessor</span><span class="params">(BeanPostProcessor processor)</span> &#123;</span><br><span class="line">            processors.add(processor);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">interface</span> <span class="title class_">BeanPostProcessor</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">inject</span><span class="params">(Object bean)</span>; <span class="comment">// 对依赖注入阶段的扩展</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="演示3-bean-后处理器排序"><a href="#演示3-bean-后处理器排序" class="headerlink" title="演示3 - bean 后处理器排序"></a>演示3 - bean 后处理器排序</h4><h5 id="代码参考-4"><a href="#代码参考-4" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a03.TestProcessOrder</strong></p>
<h4 id="收获💡-4"><a href="#收获💡-4" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>实现了 PriorityOrdered 接口的优先级最高</li>
<li>实现了 Ordered 接口与加了 @Order 注解的平级, 按数字升序</li>
<li>其它的排在最后</li>
</ol>
<h3 id="4-Bean-后处理器"><a href="#4-Bean-后处理器" class="headerlink" title="4) Bean 后处理器"></a>4) Bean 后处理器</h3><h4 id="演示1-后处理器作用"><a href="#演示1-后处理器作用" class="headerlink" title="演示1 - 后处理器作用"></a>演示1 - 后处理器作用</h4><h5 id="代码参考-5"><a href="#代码参考-5" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a04</strong> 包</p>
<h4 id="收获💡-5"><a href="#收获💡-5" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>@Autowired 等注解的解析属于 bean 生命周期阶段（依赖注入, 初始化）的扩展功能，这些扩展功能由 bean 后处理器来完成</li>
<li>每个后处理器各自增强什么功能<ul>
<li>AutowiredAnnotationBeanPostProcessor 解析 @Autowired 与 @Value</li>
<li>CommonAnnotationBeanPostProcessor 解析 @Resource、@PostConstruct、@PreDestroy</li>
<li>ConfigurationPropertiesBindingPostProcessor 解析 @ConfigurationProperties</li>
</ul>
</li>
<li>另外 ContextAnnotationAutowireCandidateResolver 负责获取 @Value 的值，解析 @Qualifier、泛型、@Lazy 等</li>
</ol>
<h4 id="演示2-Autowired-bean-后处理器运行分析"><a href="#演示2-Autowired-bean-后处理器运行分析" class="headerlink" title="演示2 - @Autowired bean 后处理器运行分析"></a>演示2 - @Autowired bean 后处理器运行分析</h4><h5 id="代码参考-6"><a href="#代码参考-6" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a04.DigInAutowired</strong></p>
<h4 id="收获💡-6"><a href="#收获💡-6" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>AutowiredAnnotationBeanPostProcessor.findAutowiringMetadata 用来获取某个 bean 上加了 @Value @Autowired 的成员变量，方法参数的信息，表示为 InjectionMetadata</li>
<li>InjectionMetadata 可以完成依赖注入</li>
<li>InjectionMetadata 内部根据成员变量，方法参数封装为 DependencyDescriptor 类型</li>
<li>有了 DependencyDescriptor，就可以利用 beanFactory.doResolveDependency 方法进行基于类型的查找</li>
</ol>
<h3 id="5-BeanFactory-后处理器"><a href="#5-BeanFactory-后处理器" class="headerlink" title="5) BeanFactory 后处理器"></a>5) BeanFactory 后处理器</h3><h4 id="演示1-BeanFactory-后处理器的作用"><a href="#演示1-BeanFactory-后处理器的作用" class="headerlink" title="演示1 - BeanFactory 后处理器的作用"></a>演示1 - BeanFactory 后处理器的作用</h4><h5 id="代码参考-7"><a href="#代码参考-7" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a05</strong> 包</p>
<ul>
<li>ConfigurationClassPostProcessor 可以解析<ul>
<li>@ComponentScan</li>
<li>@Bean</li>
<li>@Import</li>
<li>@ImportResource</li>
</ul>
</li>
<li>MapperScannerConfigurer 可以解析<ul>
<li>Mapper 接口</li>
</ul>
</li>
</ul>
<h4 id="收获💡-7"><a href="#收获💡-7" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>@ComponentScan, @Bean, @Mapper 等注解的解析属于核心容器（即 BeanFactory）的扩展功能</li>
<li>这些扩展功能由不同的 BeanFactory 后处理器来完成，其实主要就是补充了一些 bean 定义</li>
</ol>
<h4 id="演示2-模拟解析-ComponentScan"><a href="#演示2-模拟解析-ComponentScan" class="headerlink" title="演示2 - 模拟解析 @ComponentScan"></a>演示2 - 模拟解析 @ComponentScan</h4><h5 id="代码参考-8"><a href="#代码参考-8" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a05.ComponentScanPostProcessor</strong></p>
<h4 id="收获💡-8"><a href="#收获💡-8" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>Spring 操作元数据的工具类 CachingMetadataReaderFactory</li>
<li>通过注解元数据（AnnotationMetadata）获取直接或间接标注的注解信息</li>
<li>通过类元数据（ClassMetadata）获取类名，AnnotationBeanNameGenerator 生成 bean 名</li>
<li>解析元数据是基于 ASM 技术</li>
</ol>
<h4 id="演示3-模拟解析-Bean"><a href="#演示3-模拟解析-Bean" class="headerlink" title="演示3 - 模拟解析 @Bean"></a>演示3 - 模拟解析 @Bean</h4><h5 id="代码参考-9"><a href="#代码参考-9" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a05.AtBeanPostProcessor</strong></p>
<h4 id="收获💡-9"><a href="#收获💡-9" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>进一步熟悉注解元数据（AnnotationMetadata）获取方法上注解信息</li>
</ol>
<h4 id="演示4-模拟解析-Mapper-接口"><a href="#演示4-模拟解析-Mapper-接口" class="headerlink" title="演示4 - 模拟解析 Mapper 接口"></a>演示4 - 模拟解析 Mapper 接口</h4><h5 id="代码参考-10"><a href="#代码参考-10" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a05.MapperPostProcessor</strong></p>
<h4 id="收获💡-10"><a href="#收获💡-10" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>Mapper 接口被 Spring 管理的本质：实际是被作为 MapperFactoryBean 注册到容器中</li>
<li>Spring 的诡异做法，根据接口生成的 BeanDefinition 仅为根据接口名生成 bean 名</li>
</ol>
<h3 id="6-Aware-接口"><a href="#6-Aware-接口" class="headerlink" title="6) Aware 接口"></a>6) Aware 接口</h3><h4 id="演示-Aware-接口及-InitializingBean-接口"><a href="#演示-Aware-接口及-InitializingBean-接口" class="headerlink" title="演示 - Aware 接口及 InitializingBean 接口"></a>演示 - Aware 接口及 InitializingBean 接口</h4><h5 id="代码参考-11"><a href="#代码参考-11" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a06</strong> 包</p>
<h4 id="收获💡-11"><a href="#收获💡-11" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li><p>Aware 接口提供了一种【内置】 的注入手段，例如</p>
<ul>
<li>BeanNameAware 注入 bean 的名字</li>
<li>BeanFactoryAware 注入 BeanFactory 容器</li>
<li>ApplicationContextAware 注入 ApplicationContext 容器</li>
<li>EmbeddedValueResolverAware 注入 ${} 解析器</li>
</ul>
</li>
<li><p>InitializingBean 接口提供了一种【内置】的初始化手段</p>
</li>
<li><p>对比</p>
<ul>
<li><p>内置的注入和初始化不受扩展功能的影响，总会被执行</p>
</li>
<li><p>而扩展功能受某些情况影响可能会失效</p>
</li>
<li><p>因此 Spring 框架内部的类常用内置注入和初始化</p>
</li>
</ul>
</li>
</ol>
<h3 id="6）Aware接口补充"><a href="#6）Aware接口补充" class="headerlink" title="6）Aware接口补充"></a>6）Aware接口补充</h3><p>根据你提供的信息，我可以理解你在谈论Spring框架中的一些接口和机制，特别是与依赖注入和初始化相关的内容。让我为你解释一下：</p>
<ol>
<li><p>Aware 接口:<br>Aware 接口是Spring框架中的一组接口，用于在Bean实例化过程中提供额外的元数据信息或资源。这些接口允许Bean获取与Spring容器相关的信息，以便更好地与容器进行交互。例如，不同的 Aware 接口提供了以下信息：</p>
<ul>
<li><code>BeanNameAware</code>: 允许Bean获取其在容器中的名字。</li>
<li><code>BeanFactoryAware</code>: 允许Bean获取访问所在的BeanFactory（容器）。</li>
<li><code>ApplicationContextAware</code>: 允许Bean获取访问所在的ApplicationContext（应用上下文）。</li>
<li><code>EmbeddedValueResolverAware</code>: 允许Bean获取解析 <code>$&#123;&#125;</code> 占位符的功能。</li>
</ul>
<p>这些接口可以通过实现相应的接口并提供相应的回调方法来实现。</p>
</li>
<li><p>InitializingBean 接口:<br><code>InitializingBean</code> 是Spring框架提供的一个接口，当Bean被实例化后，容器会调用它的 <code>afterPropertiesSet()</code> 方法，从而允许Bean在初始化时执行一些自定义的操作。这使得Bean能够在完全被容器创建后，进行一些必要的初始化工作。</p>
</li>
</ol>
<p>对比：</p>
<ul>
<li>内置的注入和初始化（使用 Aware 接口和 InitializingBean 接口）不受扩展功能的影响，它们总会在Bean生命周期的特定阶段被执行，无论是否使用了扩展功能。</li>
<li>而某些扩展功能可能会受到特定条件或情况的影响，导致它们失效或不按预期执行。</li>
<li>因此，Spring框架内部的类通常会使用内置的注入和初始化方法，以确保这些操作始终按照预期执行，无论是否存在扩展功能。</li>
</ul>
<p>总的来说，Aware 接口和 InitializingBean 接口为开发者提供了一种在Bean生命周期的不同阶段执行自定义操作的机制，而且它们在Spring框架内部被广泛使用。不过需要注意的是，随着Spring框架的发展，还可能出现了新的机制或变化，所以建议查阅最新的Spring文档以获取最准确的信息。</p>
<h4 id="配置类-Autowired-失效分析"><a href="#配置类-Autowired-失效分析" class="headerlink" title="配置类 @Autowired 失效分析"></a>配置类 @Autowired 失效分析</h4><p>Java 配置类不包含 BeanFactoryPostProcessor 的情况</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram </span><br><span class="line">participant ac as ApplicationContext</span><br><span class="line">participant bfpp as BeanFactoryPostProcessor</span><br><span class="line">participant bpp as BeanPostProcessor</span><br><span class="line">participant config as Java配置类</span><br><span class="line">ac -&gt;&gt; bfpp : 1. 执行 BeanFactoryPostProcessor</span><br><span class="line">ac -&gt;&gt; bpp : 2. 注册 BeanPostProcessor</span><br><span class="line">ac -&gt;&gt; +config : 3. 创建和初始化</span><br><span class="line">bpp -&gt;&gt; config : 3.1 依赖注入扩展(如 @Value 和 @Autowired)</span><br><span class="line">bpp -&gt;&gt; config : 3.2 初始化扩展(如 @PostConstruct)</span><br><span class="line">ac -&gt;&gt; config : 3.3 执行 Aware 及 InitializingBean</span><br><span class="line">config --&gt;&gt; -ac : 3.4 创建成功</span><br></pre></td></tr></table></figure>
<p>Java 配置类包含 BeanFactoryPostProcessor 的情况，因此要创建其中的 BeanFactoryPostProcessor 必须提前创建 Java 配置类，而此时的 BeanPostProcessor 还未准备好，导致 @Autowired 等注解失效</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram </span><br><span class="line">participant ac as ApplicationContext</span><br><span class="line">participant bfpp as BeanFactoryPostProcessor</span><br><span class="line">participant bpp as BeanPostProcessor</span><br><span class="line">participant config as Java配置类</span><br><span class="line">ac -&gt;&gt; +config : 3. 创建和初始化</span><br><span class="line">ac -&gt;&gt; config : 3.1 执行 Aware 及 InitializingBean</span><br><span class="line">config --&gt;&gt; -ac : 3.2 创建成功</span><br><span class="line"></span><br><span class="line">ac -&gt;&gt; bfpp : 1. 执行 BeanFactoryPostProcessor</span><br><span class="line">ac -&gt;&gt; bpp : 2. 注册 BeanPostProcessor</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>对应代码</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(MyConfig1.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setApplicationContext</span><span class="params">(ApplicationContext applicationContext)</span> &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;注入 ApplicationContext&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;初始化&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span> <span class="comment">//  ⬅️ 注释或添加 beanFactory 后处理器对应上方两种情况</span></span><br><span class="line">    <span class="keyword">public</span> BeanFactoryPostProcessor <span class="title function_">processor1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> beanFactory -&gt; &#123;</span><br><span class="line">            log.debug(<span class="string">&quot;执行 processor1&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><em>注意</em></strong></p>
<p>解决方法：</p>
<ul>
<li>用内置依赖注入和初始化取代扩展依赖注入和初始化</li>
<li>用静态工厂方法代替实例工厂方法，避免工厂对象提前被创建</li>
</ul>
</blockquote>
<h3 id="7-初始化与销毁"><a href="#7-初始化与销毁" class="headerlink" title="7) 初始化与销毁"></a>7) 初始化与销毁</h3><h4 id="演示-初始化销毁顺序"><a href="#演示-初始化销毁顺序" class="headerlink" title="演示 - 初始化销毁顺序"></a>演示 - 初始化销毁顺序</h4><h5 id="代码参考-12"><a href="#代码参考-12" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a07</strong> 包</p>
<h4 id="收获💡-12"><a href="#收获💡-12" class="headerlink" title="收获💡"></a>收获💡</h4><p>Spring 提供了多种初始化手段，除了课堂上讲的 @PostConstruct，@Bean(initMethod) 之外，还可以实现 InitializingBean 接口来进行初始化，如果同一个 bean 用了以上手段声明了 3 个初始化方法，那么它们的执行顺序是</p>
<ol>
<li>@PostConstruct 标注的初始化方法</li>
<li>InitializingBean 接口的初始化方法</li>
<li>@Bean(initMethod) 指定的初始化方法</li>
</ol>
<p>与初始化类似，Spring 也提供了多种销毁手段，执行顺序为</p>
<ol>
<li>@PreDestroy 标注的销毁方法</li>
<li>DisposableBean 接口的销毁方法</li>
<li>@Bean(destroyMethod) 指定的销毁方法</li>
</ol>
<h3 id="8-Scope"><a href="#8-Scope" class="headerlink" title="8) Scope"></a>8) Scope</h3><p>在当前版本的 Spring 和 Spring Boot 程序中，支持五种 Scope</p>
<ul>
<li>singleton，容器启动时创建（未设置延迟），容器关闭时销毁</li>
<li>prototype，每次使用时创建，不会自动销毁，需要调用 DefaultListableBeanFactory.destroyBean(bean) 销毁</li>
<li>request，每次请求用到此 bean 时创建，请求结束时销毁</li>
<li>session，每个会话用到此 bean 时创建，会话结束时销毁</li>
<li>application，web 容器用到此 bean 时创建，容器停止时销毁</li>
</ul>
<p>有些文章提到有 globalSession 这一 Scope，也是陈旧的说法，目前 Spring 中已废弃</p>
<p>但要注意，如果在 singleton 注入其它 scope 都会有问题，解决方法有</p>
<ul>
<li>@Lazy</li>
<li>@Scope(proxyMode = ScopedProxyMode.TARGET_CLASS)</li>
<li>ObjectFactory</li>
<li>ApplicationContext.getBean</li>
</ul>
<h4 id="演示1-request-session-application-作用域"><a href="#演示1-request-session-application-作用域" class="headerlink" title="演示1 - request, session, application 作用域"></a>演示1 - request, session, application 作用域</h4><h5 id="代码参考-13"><a href="#代码参考-13" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a08</strong> 包</p>
<ul>
<li>打开不同的浏览器, 刷新 <a href="http://localhost:8080/test">http://localhost:8080/test</a> 即可查看效果</li>
<li>如果 jdk &gt; 8, 运行时请添加 —add-opens java.base/java.lang=ALL-UNNAMED</li>
</ul>
<h4 id="收获💡-13"><a href="#收获💡-13" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>有几种 scope</li>
<li>在 singleton 中使用其它几种 scope 的方法</li>
<li>其它 scope 的销毁时机<ul>
<li>可以将通过 server.servlet.session.timeout=30s 观察 session bean 的销毁</li>
<li>ServletContextScope 销毁机制疑似实现有误</li>
</ul>
</li>
</ol>
<h4 id="分析-singleton-注入其它-scope-失效"><a href="#分析-singleton-注入其它-scope-失效" class="headerlink" title="分析 - singleton 注入其它 scope 失效"></a>分析 - singleton 注入其它 scope 失效</h4><p>以单例注入多例为例</p>
<p>有一个单例对象 E</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(E.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> F f;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">E</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;E()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setF</span><span class="params">(F f)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.f = f;</span><br><span class="line">        log.info(<span class="string">&quot;setF(F f) &#123;&#125;&quot;</span>, f.getClass());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> F <span class="title function_">getF</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> f;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>要注入的对象 F 期望是多例</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">F</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(F.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">F</span><span class="params">()</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;F()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">E</span> <span class="variable">e</span> <span class="operator">=</span> context.getBean(E.class);</span><br><span class="line"><span class="type">F</span> <span class="variable">f1</span> <span class="operator">=</span> e.getF();</span><br><span class="line"><span class="type">F</span> <span class="variable">f2</span> <span class="operator">=</span> e.getF();</span><br><span class="line">System.out.println(f1);</span><br><span class="line">System.out.println(f2);</span><br></pre></td></tr></table></figure>
<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">com.itheima.demo.cycle.F@6622fc65</span><br><span class="line">com.itheima.demo.cycle.F@6622fc65</span><br></pre></td></tr></table></figure>
<p>发现它们是同一个对象，而不是期望的多例对象</p>
<p>对于单例对象来讲，依赖注入仅发生了一次，后续再没有用到多例的 F，因此 E 用的始终是第一次依赖注入的 F</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">graph LR</span><br><span class="line"></span><br><span class="line">e1(e 创建)</span><br><span class="line">e2(e set 注入 f)</span><br><span class="line"></span><br><span class="line">f1(f 创建)</span><br><span class="line"></span><br><span class="line">e1--&gt;f1--&gt;e2</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>解决</p>
<ul>
<li>仍然使用 @Lazy 生成代理</li>
<li>代理对象虽然还是同一个，但当每次<strong>使用代理对象的任意方法</strong>时，由代理创建新的 f 对象</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">graph LR</span><br><span class="line"></span><br><span class="line">e1(e 创建)</span><br><span class="line">e2(e set 注入 f代理)</span><br><span class="line"></span><br><span class="line">f1(f 创建)</span><br><span class="line">f2(f 创建)</span><br><span class="line">f3(f 创建)</span><br><span class="line"></span><br><span class="line">e1--&gt;e2</span><br><span class="line">e2--使用f方法--&gt;f1</span><br><span class="line">e2--使用f方法--&gt;f2</span><br><span class="line">e2--使用f方法--&gt;f3</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">E</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Lazy</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setF</span><span class="params">(F f)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.f = f;</span><br><span class="line">        log.info(<span class="string">&quot;setF(F f) &#123;&#125;&quot;</span>, f.getClass());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><em>注意</em></strong></p>
<ul>
<li>@Lazy 加在也可以加在成员变量上，但加在 set 方法上的目的是可以观察输出，加在成员变量上就不行了</li>
<li>@Autowired 加在 set 方法的目的类似</li>
</ul>
</blockquote>
<p>输出</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">E: setF(F f) class com.itheima.demo.cycle.F$$EnhancerBySpringCGLIB$$8b54f2bc</span><br><span class="line">F: F()</span><br><span class="line">com.itheima.demo.cycle.F@3a6f2de3</span><br><span class="line">F: F()</span><br><span class="line">com.itheima.demo.cycle.F@56303b57</span><br></pre></td></tr></table></figure>
<p>从输出日志可以看到调用 setF 方法时，f 对象的类型是代理类型</p>
<h4 id="演示2-4种解决方法"><a href="#演示2-4种解决方法" class="headerlink" title="演示2 - 4种解决方法"></a>演示2 - 4种解决方法</h4><h5 id="代码参考-14"><a href="#代码参考-14" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a08.sub</strong> 包</p>
<ul>
<li>如果 jdk &gt; 8, 运行时请添加 —add-opens java.base/java.lang=ALL-UNNAMED</li>
</ul>
<h4 id="收获💡-14"><a href="#收获💡-14" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>单例注入其它 scope 的四种解决方法<ul>
<li>@Lazy</li>
<li>@Scope(value = “prototype”, proxyMode = ScopedProxyMode.TARGET_CLASS)</li>
<li>ObjectFactory</li>
<li>ApplicationContext</li>
</ul>
</li>
<li>解决方法虽然不同，但理念上殊途同归: 都是推迟其它 scope bean 的获取</li>
</ol>
<h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><p>AOP 底层实现方式之一是代理，由代理结合通知和目标，提供增强功能</p>
<p>除此以外，aspectj 提供了两种另外的 AOP 底层实现：</p>
<ul>
<li><p>第一种是通过 ajc 编译器在<strong>编译</strong> class 类文件时，就把通知的增强功能，织入到目标类的字节码中</p>
</li>
<li><p>第二种是通过 agent 在<strong>加载</strong>目标类时，修改目标类的字节码，织入增强功能</p>
</li>
<li>作为对比，之前学习的代理是<strong>运行</strong>时生成新的字节码</li>
</ul>
<p>简单比较的话：</p>
<ul>
<li>aspectj 在编译和加载时，修改目标字节码，性能较高</li>
<li>aspectj 因为不用代理，能突破一些技术上的限制，例如对构造、对静态方法、对 final 也能增强</li>
<li>但 aspectj 侵入性较强，且需要学习新的 aspectj 特有语法，因此没有广泛流行</li>
</ul>
<h3 id="9-AOP-实现之-ajc-编译器"><a href="#9-AOP-实现之-ajc-编译器" class="headerlink" title="9) AOP 实现之 ajc 编译器"></a>9) AOP 实现之 ajc 编译器</h3><p>代码参考项目 <strong>demo6_advanced_aspectj_01</strong></p>
<h4 id="收获💡-15"><a href="#收获💡-15" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>编译器也能修改 class 实现增强</li>
<li>编译器增强能突破代理仅能通过方法重写增强的限制：可以对构造方法、静态方法等实现增强</li>
</ol>
<blockquote>
<p><strong><em>注意</em></strong></p>
<ul>
<li>版本选择了 java 8, 因为目前的 aspectj-maven-plugin 1.14.0 最高只支持到 java 16</li>
<li>一定要用 maven 的 compile 来编译, idea 不会调用 ajc 编译器</li>
</ul>
</blockquote>
<h3 id="10-AOP-实现之-agent-类加载"><a href="#10-AOP-实现之-agent-类加载" class="headerlink" title="10) AOP 实现之 agent 类加载"></a>10) AOP 实现之 agent 类加载</h3><p>代码参考项目 <strong>demo6_advanced_aspectj_02</strong></p>
<h4 id="收获💡-16"><a href="#收获💡-16" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>类加载时可以通过 agent 修改 class 实现增强</li>
</ol>
<h3 id="11-AOP-实现之-proxy"><a href="#11-AOP-实现之-proxy" class="headerlink" title="11) AOP 实现之 proxy"></a>11) AOP 实现之 proxy</h3><h4 id="演示1-jdk-动态代理"><a href="#演示1-jdk-动态代理" class="headerlink" title="演示1 - jdk 动态代理"></a>演示1 - jdk 动态代理</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdkProxyDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Target</span> <span class="keyword">implements</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;target foo&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] param)</span> &#123;</span><br><span class="line">        <span class="comment">// 目标对象</span></span><br><span class="line">        <span class="type">Target</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Target</span>();</span><br><span class="line">        <span class="comment">// 代理对象</span></span><br><span class="line">        <span class="type">Foo</span> <span class="variable">proxy</span> <span class="operator">=</span> (Foo) Proxy.newProxyInstance(</span><br><span class="line">                Target.class.getClassLoader(), <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Foo.class&#125;,</span><br><span class="line">                (p, method, args) -&gt; &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;proxy before...&quot;</span>);</span><br><span class="line">                    <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(target, args);</span><br><span class="line">                    System.out.println(<span class="string">&quot;proxy after...&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span> result;</span><br><span class="line">                &#125;);</span><br><span class="line">        <span class="comment">// 调用代理</span></span><br><span class="line">        proxy.foo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">proxy before...</span><br><span class="line">target foo</span><br><span class="line">proxy after...</span><br></pre></td></tr></table></figure>
<h4 id="收获💡-17"><a href="#收获💡-17" class="headerlink" title="收获💡"></a>收获💡</h4><ul>
<li>jdk 动态代理要求目标<strong>必须</strong>实现接口，生成的代理类实现相同接口，因此代理与目标之间是平级兄弟关系</li>
</ul>
<h4 id="演示2-cglib-代理"><a href="#演示2-cglib-代理" class="headerlink" title="演示2 - cglib 代理"></a>演示2 - cglib 代理</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CglibProxyDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Target</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;target foo&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] param)</span> &#123;</span><br><span class="line">        <span class="comment">// 目标对象</span></span><br><span class="line">        <span class="type">Target</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Target</span>();</span><br><span class="line">        <span class="comment">// 代理对象</span></span><br><span class="line">        <span class="type">Target</span> <span class="variable">proxy</span> <span class="operator">=</span> (Target) Enhancer.create(Target.class, </span><br><span class="line">                (MethodInterceptor) (p, method, args, methodProxy) -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;proxy before...&quot;</span>);</span><br><span class="line">            <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> methodProxy.invoke(target, args);</span><br><span class="line">            <span class="comment">// 另一种调用方法，不需要目标对象实例</span></span><br><span class="line"><span class="comment">//            Object result = methodProxy.invokeSuper(p, args);</span></span><br><span class="line">            System.out.println(<span class="string">&quot;proxy after...&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 调用代理</span></span><br><span class="line">        proxy.foo();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果与 jdk 动态代理相同</p>
<h4 id="收获💡-18"><a href="#收获💡-18" class="headerlink" title="收获💡"></a>收获💡</h4><ul>
<li>cglib 不要求目标实现接口，它生成的代理类是目标的子类，因此代理与目标之间是子父关系</li>
<li>限制⛔：根据上述分析 final 类无法被 cglib 增强</li>
</ul>
<h3 id="12-jdk-动态代理进阶"><a href="#12-jdk-动态代理进阶" class="headerlink" title="12) jdk 动态代理进阶"></a>12) jdk 动态代理进阶</h3><h4 id="演示1-模拟-jdk-动态代理"><a href="#演示1-模拟-jdk-动态代理" class="headerlink" title="演示1 - 模拟 jdk 动态代理"></a>演示1 - 模拟 jdk 动态代理</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A12</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span>;</span><br><span class="line">        <span class="type">int</span> <span class="title function_">bar</span><span class="params">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Target</span> <span class="keyword">implements</span> <span class="title class_">Foo</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;target foo&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">bar</span><span class="params">()</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;target bar&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] param)</span> &#123;</span><br><span class="line">        <span class="comment">// ⬇️1. 创建代理，这时传入 InvocationHandler</span></span><br><span class="line">        <span class="type">Foo</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">$Proxy0</span>(<span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;    </span><br><span class="line">            <span class="comment">// ⬇️5. 进入 InvocationHandler</span></span><br><span class="line">            <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable&#123;</span><br><span class="line">                <span class="comment">// ⬇️6. 功能增强</span></span><br><span class="line">                System.out.println(<span class="string">&quot;before...&quot;</span>);</span><br><span class="line">                <span class="comment">// ⬇️7. 反射调用目标方法</span></span><br><span class="line">                <span class="keyword">return</span> method.invoke(<span class="keyword">new</span> <span class="title class_">Target</span>(), args);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// ⬇️2. 调用代理方法</span></span><br><span class="line">        proxy.foo();</span><br><span class="line">        proxy.bar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>模拟代理实现</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.UndeclaredThrowableException;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ⬇️这就是 jdk 代理类的源码, 秘密都在里面</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$Proxy0</span> <span class="keyword">extends</span> <span class="title class_">Proxy</span> <span class="keyword">implements</span> <span class="title class_">A12</span>.Foo &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> $Proxy0(InvocationHandler h) &#123;</span><br><span class="line">        <span class="built_in">super</span>(h);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ⬇️3. 进入代理方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// ⬇️4. 回调 InvocationHandler</span></span><br><span class="line">            h.invoke(<span class="built_in">this</span>, foo, <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">0</span>]);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RuntimeException | Error e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UndeclaredThrowableException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">bar</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> h.invoke(<span class="built_in">this</span>, bar, <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">return</span> (<span class="type">int</span>) result;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (RuntimeException | Error e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UndeclaredThrowableException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Method foo;</span><br><span class="line">    <span class="keyword">static</span> Method bar;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            foo = A12.Foo.class.getMethod(<span class="string">&quot;foo&quot;</span>);</span><br><span class="line">            bar = A12.Foo.class.getMethod(<span class="string">&quot;bar&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchMethodException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchMethodError</span>(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="收获💡-19"><a href="#收获💡-19" class="headerlink" title="收获💡"></a>收获💡</h4><p>代理一点都不难，无非就是利用了多态、反射的知识</p>
<ol>
<li>方法重写可以增强逻辑，只不过这【增强逻辑】千变万化，不能写死在代理内部</li>
<li>通过接口回调将【增强逻辑】置于代理类之外</li>
<li>配合接口方法反射（是多态调用），就可以再联动调用目标方法</li>
<li>会用 arthas 的 jad 工具反编译代理类</li>
<li>限制⛔：代理增强是借助多态来实现，因此成员变量、静态方法、final 方法均不能通过代理实现</li>
</ol>
<h4 id="演示2-方法反射优化"><a href="#演示2-方法反射优化" class="headerlink" title="演示2 - 方法反射优化"></a>演示2 - 方法反射优化</h4><h5 id="代码参考-15"><a href="#代码参考-15" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a12.TestMethodInvoke</strong></p>
<h4 id="收获💡-20"><a href="#收获💡-20" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>前 16 次反射性能较低</li>
<li>第 17 次调用会生成代理类，优化为非反射调用</li>
<li>会用 arthas 的 jad 工具反编译第 17 次调用生成的代理类</li>
</ol>
<blockquote>
<p><strong><em>注意</em></strong></p>
<p>运行时请添加 —add-opens java.base/java.lang.reflect=ALL-UNNAMED —add-opens java.base/jdk.internal.reflect=ALL-UNNAMED</p>
</blockquote>
<h3 id="13-cglib-代理进阶"><a href="#13-cglib-代理进阶" class="headerlink" title="13) cglib 代理进阶"></a>13) cglib 代理进阶</h3><h4 id="演示-模拟-cglib-代理"><a href="#演示-模拟-cglib-代理" class="headerlink" title="演示 - 模拟 cglib 代理"></a>演示 - 模拟 cglib 代理</h4><h5 id="代码参考-16"><a href="#代码参考-16" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a13</strong> 包</p>
<h4 id="收获💡-21"><a href="#收获💡-21" class="headerlink" title="收获💡"></a>收获💡</h4><p>和 jdk 动态代理原理查不多</p>
<ol>
<li>回调的接口换了一下，InvocationHandler 改成了 MethodInterceptor</li>
<li>调用目标时有所改进，见下面代码片段<ol>
<li>method.invoke 是反射调用，必须调用到足够次数才会进行优化</li>
<li>methodProxy.invoke 是不反射调用，它会正常（间接）调用目标对象的方法（Spring 采用）</li>
<li>methodProxy.invokeSuper 也是不反射调用，它会正常（间接）调用代理对象的方法，可以省略目标对象</li>
</ol>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">A14Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InvocationTargetException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Target</span> <span class="variable">target</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Target</span>();</span><br><span class="line">        <span class="type">Proxy</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>();</span><br><span class="line">        </span><br><span class="line">        proxy.setCallbacks(<span class="keyword">new</span> <span class="title class_">Callback</span>[]&#123;(MethodInterceptor) (p, m, a, mp) -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;proxy before...&quot;</span> + mp.getSignature());</span><br><span class="line">            <span class="comment">// ⬇️调用目标方法(三种)</span></span><br><span class="line"><span class="comment">//            Object result = m.invoke(target, a);  // ⬅️反射调用</span></span><br><span class="line"><span class="comment">//            Object result = mp.invoke(target, a); // ⬅️非反射调用, 结合目标用</span></span><br><span class="line">            <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> mp.invokeSuper(p, a);   <span class="comment">// ⬅️非反射调用, 结合代理用</span></span><br><span class="line">            System.out.println(<span class="string">&quot;proxy after...&quot;</span> + mp.getSignature());</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;&#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ⬇️调用代理方法</span></span><br><span class="line">        proxy.save();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><em>注意</em></strong></p>
<ul>
<li>调用 Object 的方法, 后两种在 jdk &gt;= 9 时都有问题, 需要 —add-opens java.base/java.lang=ALL-UNNAMED</li>
</ul>
</blockquote>
<h3 id="14-cglib-避免反射调用"><a href="#14-cglib-避免反射调用" class="headerlink" title="14) cglib 避免反射调用"></a>14) cglib 避免反射调用</h3><h4 id="演示-cglib-如何避免反射"><a href="#演示-cglib-如何避免反射" class="headerlink" title="演示 - cglib 如何避免反射"></a>演示 - cglib 如何避免反射</h4><h5 id="代码参考-17"><a href="#代码参考-17" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a13.ProxyFastClass</strong>，<strong>com.itheima.a13.TargetFastClass</strong></p>
<h4 id="收获💡-22"><a href="#收获💡-22" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>当调用 MethodProxy 的 invoke 或 invokeSuper 方法时, 会动态生成两个类<ul>
<li>ProxyFastClass 配合代理对象一起使用, 避免反射</li>
<li>TargetFastClass 配合目标对象一起使用, 避免反射 (Spring 用的这种)</li>
</ul>
</li>
<li>TargetFastClass 记录了 Target 中方法与编号的对应关系<ul>
<li>save(long) 编号 2</li>
<li>save(int) 编号 1</li>
<li>save() 编号 0</li>
<li>首先根据方法名和参数个数、类型, 用 switch 和 if 找到这些方法编号</li>
<li>然后再根据编号去调用目标方法, 又用了一大堆 switch 和 if, 但避免了反射</li>
</ul>
</li>
<li>ProxyFastClass 记录了 Proxy 中方法与编号的对应关系，不过 Proxy 额外提供了下面几个方法<ul>
<li>saveSuper(long) 编号 2，不增强，仅是调用 super.save(long)</li>
<li>saveSuper(int) 编号 1，不增强, 仅是调用 super.save(int)</li>
<li>saveSuper() 编号 0，不增强, 仅是调用 super.save()</li>
<li>查找方式与 TargetFastClass 类似</li>
</ul>
</li>
<li>为什么有这么麻烦的一套东西呢？<ul>
<li>避免反射, 提高性能, 代价是一个代理类配两个 FastClass 类, 代理类中还得增加仅调用 super 的一堆方法</li>
<li>用编号处理方法对应关系比较省内存, 另外, 最初获得方法顺序是不确定的, 这个过程没法固定死</li>
</ul>
</li>
</ol>
<h3 id="15-jdk-和-cglib-在-Spring-中的统一"><a href="#15-jdk-和-cglib-在-Spring-中的统一" class="headerlink" title="15) jdk 和 cglib 在 Spring 中的统一"></a>15) jdk 和 cglib 在 Spring 中的统一</h3><p>Spring 中对切点、通知、切面的抽象如下</p>
<ul>
<li>切点：接口 Pointcut，典型实现 AspectJExpressionPointcut</li>
<li>通知：典型接口为 MethodInterceptor 代表环绕通知</li>
<li>切面：Advisor，包含一个 Advice 通知，PointcutAdvisor 包含一个 Advice 通知和一个 Pointcut</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">classDiagram</span><br><span class="line"></span><br><span class="line">class Advice</span><br><span class="line">class MethodInterceptor</span><br><span class="line">class Advisor</span><br><span class="line">class PointcutAdvisor</span><br><span class="line"></span><br><span class="line">Pointcut &lt;|-- AspectJExpressionPointcut</span><br><span class="line">Advice &lt;|-- MethodInterceptor</span><br><span class="line">Advisor &lt;|-- PointcutAdvisor</span><br><span class="line">PointcutAdvisor o-- &quot;一&quot; Pointcut</span><br><span class="line">PointcutAdvisor o-- &quot;一&quot; Advice</span><br><span class="line"></span><br><span class="line">&lt;&lt;interface&gt;&gt; Advice</span><br><span class="line">&lt;&lt;interface&gt;&gt; MethodInterceptor</span><br><span class="line">&lt;&lt;interface&gt;&gt; Pointcut</span><br><span class="line">&lt;&lt;interface&gt;&gt; Advisor</span><br><span class="line">&lt;&lt;interface&gt;&gt; PointcutAdvisor</span><br></pre></td></tr></table></figure>
<p>代理相关类图</p>
<ul>
<li>AopProxyFactory 根据 proxyTargetClass 等设置选择 AopProxy 实现</li>
<li>AopProxy 通过 getProxy 创建代理对象</li>
<li>图中 Proxy 都实现了 Advised 接口，能够获得关联的切面集合与目标（其实是从 ProxyFactory 取得）</li>
<li>调用代理方法时，会借助 ProxyFactory 将通知统一转为环绕通知：MethodInterceptor</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">classDiagram</span><br><span class="line"></span><br><span class="line">Advised &lt;|-- ProxyFactory</span><br><span class="line">ProxyFactory o-- Target</span><br><span class="line">ProxyFactory o-- &quot;多&quot; Advisor</span><br><span class="line"></span><br><span class="line">ProxyFactory --&gt; AopProxyFactory : 使用</span><br><span class="line">AopProxyFactory --&gt; AopProxy</span><br><span class="line">Advised &lt;|-- 基于CGLIB的Proxy</span><br><span class="line">基于CGLIB的Proxy &lt;-- ObjenesisCglibAopProxy : 创建</span><br><span class="line">AopProxy &lt;|-- ObjenesisCglibAopProxy</span><br><span class="line">AopProxy &lt;|-- JdkDynamicAopProxy</span><br><span class="line">基于JDK的Proxy &lt;-- JdkDynamicAopProxy : 创建</span><br><span class="line">Advised &lt;|-- 基于JDK的Proxy</span><br><span class="line"></span><br><span class="line">class AopProxy &#123;</span><br><span class="line">   +getProxy() Object</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class ProxyFactory &#123;</span><br><span class="line">	proxyTargetClass : boolean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class ObjenesisCglibAopProxy &#123;</span><br><span class="line">	advised : ProxyFactory</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class JdkDynamicAopProxy &#123;</span><br><span class="line">	advised : ProxyFactory</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;&lt;interface&gt;&gt; Advised</span><br><span class="line">&lt;&lt;interface&gt;&gt; AopProxyFactory</span><br><span class="line">&lt;&lt;interface&gt;&gt; AopProxy</span><br></pre></td></tr></table></figure>
<h4 id="演示-底层切点、通知、切面"><a href="#演示-底层切点、通知、切面" class="headerlink" title="演示 - 底层切点、通知、切面"></a>演示 - 底层切点、通知、切面</h4><h5 id="代码参考-18"><a href="#代码参考-18" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a15.A15</strong></p>
<h4 id="收获💡-23"><a href="#收获💡-23" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>底层的切点实现</li>
<li>底层的通知实现</li>
<li>底层的切面实现</li>
<li>ProxyFactory 用来创建代理<ul>
<li>如果指定了接口，且 proxyTargetClass = false，使用 JdkDynamicAopProxy</li>
<li>如果没有指定接口，或者 proxyTargetClass = true，使用 ObjenesisCglibAopProxy<ul>
<li>例外：如果目标是接口类型或已经是 Jdk 代理，使用 JdkDynamicAopProxy</li>
</ul>
</li>
</ul>
</li>
</ol>
<blockquote>
<p><strong><em>注意</em></strong></p>
<ul>
<li>要区分本章节提到的 MethodInterceptor，它与之前 cglib 中用的的 MethodInterceptor 是不同的接口</li>
</ul>
</blockquote>
<h3 id="16-切点匹配"><a href="#16-切点匹配" class="headerlink" title="16) 切点匹配"></a>16) 切点匹配</h3><h4 id="演示-切点匹配"><a href="#演示-切点匹配" class="headerlink" title="演示 - 切点匹配"></a>演示 - 切点匹配</h4><h5 id="代码参考-19"><a href="#代码参考-19" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a16.A16</strong></p>
<h4 id="收获💡-24"><a href="#收获💡-24" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>常见 aspectj 切点用法</li>
<li>aspectj 切点的局限性，实际的 @Transactional 切点实现</li>
</ol>
<h3 id="17-从-Aspect-到-Advisor"><a href="#17-从-Aspect-到-Advisor" class="headerlink" title="17) 从 @Aspect 到 Advisor"></a>17) 从 @Aspect 到 Advisor</h3><h4 id="演示1-代理创建器"><a href="#演示1-代理创建器" class="headerlink" title="演示1 - 代理创建器"></a>演示1 - 代理创建器</h4><h5 id="代码参考-20"><a href="#代码参考-20" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>org.springframework.aop.framework.autoproxy</strong> 包</p>
<h4 id="收获💡-25"><a href="#收获💡-25" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>AnnotationAwareAspectJAutoProxyCreator 的作用<ul>
<li>将高级 @Aspect 切面统一为低级 Advisor 切面</li>
<li>在合适的时机创建代理</li>
</ul>
</li>
<li>findEligibleAdvisors 找到有【资格】的 Advisors<ul>
<li>有【资格】的 Advisor 一部分是低级的, 可以由自己编写, 如本例 A17 中的 advisor3</li>
<li>有【资格】的 Advisor 另一部分是高级的, 由解析 @Aspect 后获得</li>
</ul>
</li>
<li>wrapIfNecessary<ul>
<li>它内部调用 findEligibleAdvisors, 只要返回集合不空, 则表示需要创建代理</li>
<li>它的调用时机通常在原始对象初始化后执行, 但碰到循环依赖会提前至依赖注入之前执行</li>
</ul>
</li>
</ol>
<h4 id="演示2-代理创建时机"><a href="#演示2-代理创建时机" class="headerlink" title="演示2 - 代理创建时机"></a>演示2 - 代理创建时机</h4><h5 id="代码参考-21"><a href="#代码参考-21" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>org.springframework.aop.framework.autoproxy.A17_1</strong></p>
<h4 id="收获💡-26"><a href="#收获💡-26" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>代理的创建时机<ul>
<li>初始化之后 (无循环依赖时)</li>
<li>实例创建后, 依赖注入前 (有循环依赖时), 并暂存于二级缓存</li>
</ul>
</li>
<li>依赖注入与初始化不应该被增强, 仍应被施加于原始对象</li>
</ol>
<h4 id="演示3-Before-对应的低级通知"><a href="#演示3-Before-对应的低级通知" class="headerlink" title="演示3 - @Before 对应的低级通知"></a>演示3 - @Before 对应的低级通知</h4><h5 id="代码参考-22"><a href="#代码参考-22" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>org.springframework.aop.framework.autoproxy.A17_2</strong></p>
<h4 id="收获💡-27"><a href="#收获💡-27" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>@Before 前置通知会被转换为原始的 AspectJMethodBeforeAdvice 形式, 该对象包含了如下信息<ol>
<li>通知代码从哪儿来</li>
<li>切点是什么(这里为啥要切点, 后面解释)</li>
<li>通知对象如何创建, 本例共用同一个 Aspect 对象</li>
</ol>
</li>
<li>类似的还有<ol>
<li>AspectJAroundAdvice (环绕通知)</li>
<li>AspectJAfterReturningAdvice</li>
<li>AspectJAfterThrowingAdvice (环绕通知)</li>
<li>AspectJAfterAdvice (环绕通知)</li>
</ol>
</li>
</ol>
<h3 id="18-静态通知调用"><a href="#18-静态通知调用" class="headerlink" title="18) 静态通知调用"></a>18) 静态通知调用</h3><p>代理对象调用流程如下（以 JDK 动态代理实现为例）</p>
<ul>
<li>从 ProxyFactory 获得 Target 和环绕通知链，根据他俩创建 MethodInvocation，简称 mi</li>
<li>首次执行 mi.proceed() 发现有下一个环绕通知，调用它的 invoke(mi)</li>
<li>进入环绕通知1，执行前增强，再次调用 mi.proceed() 发现有下一个环绕通知，调用它的 invoke(mi)</li>
<li>进入环绕通知2，执行前增强，调用 mi.proceed() 发现没有环绕通知，调用 mi.invokeJoinPoint() 执行目标方法</li>
<li>目标方法执行结束，将结果返回给环绕通知2，执行环绕通知2 的后增强</li>
<li>环绕通知2继续将结果返回给环绕通知1，执行环绕通知1 的后增强</li>
<li>环绕通知1返回最终的结果</li>
</ul>
<p>图中不同颜色对应一次环绕通知或目标的调用起始至终结</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant Proxy</span><br><span class="line">participant ih as InvocationHandler</span><br><span class="line">participant mi as MethodInvocation</span><br><span class="line">participant Factory as ProxyFactory</span><br><span class="line">participant mi1 as MethodInterceptor1</span><br><span class="line">participant mi2 as MethodInterceptor2</span><br><span class="line">participant Target</span><br><span class="line"></span><br><span class="line">Proxy -&gt;&gt; +ih : invoke()</span><br><span class="line">ih -&gt;&gt; +Factory : 获得 Target</span><br><span class="line">Factory --&gt;&gt; -ih : </span><br><span class="line">ih -&gt;&gt; +Factory : 获得 MethodInterceptor 链</span><br><span class="line">Factory --&gt;&gt; -ih : </span><br><span class="line">ih -&gt;&gt; +mi : 创建 mi</span><br><span class="line">mi --&gt;&gt; -ih : </span><br><span class="line">rect rgb(200, 223, 255)</span><br><span class="line">ih -&gt;&gt; +mi : mi.proceed()</span><br><span class="line">mi -&gt;&gt; +mi1 : invoke(mi)</span><br><span class="line">mi1 -&gt;&gt; mi1 : 前增强</span><br><span class="line">rect rgb(200, 190, 255)</span><br><span class="line">mi1 -&gt;&gt; mi : mi.proceed()</span><br><span class="line">mi -&gt;&gt; +mi2 : invoke(mi)</span><br><span class="line">mi2 -&gt;&gt; mi2 : 前增强</span><br><span class="line">rect rgb(150, 190, 155)</span><br><span class="line">mi2 -&gt;&gt; mi : mi.proceed()</span><br><span class="line">mi -&gt;&gt; +Target : mi.invokeJoinPoint()</span><br><span class="line">Target -&gt;&gt; Target : </span><br><span class="line">Target --&gt;&gt; -mi2 : 结果</span><br><span class="line">end</span><br><span class="line">mi2 -&gt;&gt; mi2 : 后增强</span><br><span class="line">mi2 --&gt;&gt; -mi1 : 结果</span><br><span class="line">end</span><br><span class="line">mi1 -&gt;&gt; mi1 : 后增强</span><br><span class="line">mi1 --&gt;&gt; -mi : 结果</span><br><span class="line">mi --&gt;&gt; -ih : </span><br><span class="line">end</span><br><span class="line">ih --&gt;&gt; -Proxy : </span><br></pre></td></tr></table></figure>
<h4 id="演示1-通知调用过程"><a href="#演示1-通知调用过程" class="headerlink" title="演示1 - 通知调用过程"></a>演示1 - 通知调用过程</h4><h5 id="代码参考-23"><a href="#代码参考-23" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>org.springframework.aop.framework.A18</strong></p>
<h4 id="收获💡-28"><a href="#收获💡-28" class="headerlink" title="收获💡"></a>收获💡</h4><p>代理方法执行时会做如下工作</p>
<ol>
<li>通过 proxyFactory 的 getInterceptorsAndDynamicInterceptionAdvice() 将其他通知统一转换为 MethodInterceptor 环绕通知<ul>
<li>MethodBeforeAdviceAdapter 将 @Before AspectJMethodBeforeAdvice 适配为 MethodBeforeAdviceInterceptor</li>
<li>AfterReturningAdviceAdapter 将 @AfterReturning AspectJAfterReturningAdvice 适配为 AfterReturningAdviceInterceptor</li>
<li>这体现的是适配器设计模式</li>
</ul>
</li>
<li>所谓静态通知，体现在上面方法的 Interceptors 部分，这些通知调用时无需再次检查切点，直接调用即可</li>
<li>结合目标与环绕通知链，创建 MethodInvocation 对象，通过它完成整个调用</li>
</ol>
<h4 id="演示2-模拟-MethodInvocation"><a href="#演示2-模拟-MethodInvocation" class="headerlink" title="演示2 - 模拟 MethodInvocation"></a>演示2 - 模拟 MethodInvocation</h4><h5 id="代码参考-24"><a href="#代码参考-24" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>org.springframework.aop.framework.A18_1</strong></p>
<h4 id="收获💡-29"><a href="#收获💡-29" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>proceed() 方法调用链中下一个环绕通知</li>
<li>每个环绕通知内部继续调用 proceed()</li>
<li>调用到没有更多通知了, 就调用目标方法</li>
</ol>
<p>MethodInvocation 的编程技巧在实现拦截器、过滤器时能用上</p>
<h3 id="19-动态通知调用"><a href="#19-动态通知调用" class="headerlink" title="19) 动态通知调用"></a>19) 动态通知调用</h3><h4 id="演示-带参数绑定的通知方法调用"><a href="#演示-带参数绑定的通知方法调用" class="headerlink" title="演示 - 带参数绑定的通知方法调用"></a>演示 - 带参数绑定的通知方法调用</h4><h5 id="代码参考-25"><a href="#代码参考-25" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>org.springframework.aop.framework.autoproxy.A19</strong></p>
<h4 id="收获💡-30"><a href="#收获💡-30" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>通过 proxyFactory 的 getInterceptorsAndDynamicInterceptionAdvice() 将其他通知统一转换为 MethodInterceptor 环绕通知</li>
<li>所谓动态通知，体现在上面方法的 DynamicInterceptionAdvice 部分，这些通知调用时因为要为通知方法绑定参数，还需再次利用切点表达式</li>
<li>动态通知调用复杂程度高，性能较低</li>
</ol>
<h2 id="WEB"><a href="#WEB" class="headerlink" title="WEB"></a>WEB</h2><h3 id="20-RequestMappingHandlerMapping-与-RequestMappingHandlerAdapter"><a href="#20-RequestMappingHandlerMapping-与-RequestMappingHandlerAdapter" class="headerlink" title="20) RequestMappingHandlerMapping 与 RequestMappingHandlerAdapter"></a>20) RequestMappingHandlerMapping 与 RequestMappingHandlerAdapter</h3><p>RequestMappingHandlerMapping 与 RequestMappingHandlerAdapter 俩是一对，分别用来</p>
<ul>
<li>处理 @RequestMapping 映射</li>
<li>调用控制器方法、并处理方法参数与方法返回值</li>
</ul>
<h4 id="演示1-DispatcherServlet-初始化"><a href="#演示1-DispatcherServlet-初始化" class="headerlink" title="演示1 - DispatcherServlet 初始化"></a>演示1 - DispatcherServlet 初始化</h4><h5 id="代码参考-26"><a href="#代码参考-26" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a20</strong> 包</p>
<h4 id="收获💡-31"><a href="#收获💡-31" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>DispatcherServlet 是在第一次被访问时执行初始化, 也可以通过配置修改为 Tomcat 启动后就初始化</li>
<li>在初始化时会从 Spring 容器中找一些 Web 需要的组件, 如 HandlerMapping、HandlerAdapter 等，并逐一调用它们的初始化</li>
<li>RequestMappingHandlerMapping 初始化时，会收集所有 @RequestMapping 映射信息，封装为 Map，其中<ul>
<li>key 是 RequestMappingInfo 类型，包括请求路径、请求方法等信息</li>
<li>value 是 HandlerMethod 类型，包括控制器方法对象、控制器对象</li>
<li>有了这个 Map，就可以在请求到达时，快速完成映射，找到 HandlerMethod 并与匹配的拦截器一起返回给 DispatcherServlet</li>
</ul>
</li>
<li><p>RequestMappingHandlerAdapter 初始化时，会准备 HandlerMethod 调用时需要的各个组件，如：</p>
<ul>
<li>HandlerMethodArgumentResolver 解析控制器方法参数</li>
<li>HandlerMethodReturnValueHandler 处理控制器方法返回值</li>
</ul>
<p>5.控制器默认返回视图名称</p>
<p>6.Listenter监听ServletConfig域创建加载spring容器；</p>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">//xml方式</span><br><span class="line"> <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext2.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">//注解方式</span><br><span class="line"> <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextClass<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>com.itheima.util.MyAnnotationConfigWebApplicationContext<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">//spring-mvc.xml存放controller,即使用注解扫描扫描controller</span><br><span class="line">//springapplication.xml 存放其他配置元数据</span><br><span class="line">//当我们将SpringMVC组件例如handlerMapping的默认实现配置导spring容器是原先的默认实现会被替换</span><br></pre></td></tr></table></figure>
<p><img src="C:\Users\19181\Pictures\Vue学习\screenshot-20230809-195048.png" alt="screenshot-20230809-195048"></p>
<p>DispatcherServlet默认组件的实现在此</p>
<p><img src="C:\Users\19181\Pictures\Vue学习\screenshot-20230809-201005.png" alt="screenshot-20230809-201005"></p>
<p>因为实现有多个所以是List</p>
<p><img src="C:\Users\19181\Pictures\Vue学习\screenshot-20230809-200850.png" alt="screenshot-20230809-200850"></p>
<p>默认初始化策略</p>
<p><img src="C:\Users\19181\Pictures\Vue学习\screenshot-20230809-200938.png" alt="screenshot-20230809-200938"></p>
<p>从spring容器中获取用户配置的handelrMapping的实现没有配置则使用默认实现，即加载dispatchservlet.properties中对应的所有实现</p>
<p><img src="C:\Users\19181\Pictures\Vue学习\screenshot-20230809-200950.png" alt="screenshot-20230809-200950"></p>
<p>用户没有在spring容器中指定handlerMapping实现就会执行这个，指定就不会加载dispatchservlet.properties中对应的所有实现</p>
<p>1.转发：服务器内部发生客户端url不改变 “forward: /index.html”</p>
<p>2.重定向：”redirect: index.html”;</p>
<p>同步方式响应数据</p>
<p>1.直接响应加@ResposeBody注解</p>
<p>2.返回视图名</p>
<p>3.返回ModeAndView对象</p>
<h4 id="演示2-自定义参数与返回值处理器"><a href="#演示2-自定义参数与返回值处理器" class="headerlink" title="演示2 - 自定义参数与返回值处理器"></a>演示2 - 自定义参数与返回值处理器</h4><h5 id="代码参考-27"><a href="#代码参考-27" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a20.TokenArgumentResolver</strong> ，<strong>com.itheima.a20.YmlReturnValueHandler</strong></p>
<h4 id="收获💡-32"><a href="#收获💡-32" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>体会参数解析器的作用</li>
<li>体会返回值处理器的作用</li>
</ol>
<h3 id="21-参数解析器"><a href="#21-参数解析器" class="headerlink" title="21) 参数解析器"></a>21) 参数解析器</h3><h4 id="演示-常见参数解析器"><a href="#演示-常见参数解析器" class="headerlink" title="演示 - 常见参数解析器"></a>演示 - 常见参数解析器</h4><h5 id="代码参考-28"><a href="#代码参考-28" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a21</strong> 包</p>
<h4 id="收获💡-33"><a href="#收获💡-33" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>初步了解 RequestMappingHandlerAdapter 的调用过程<ol>
<li>控制器方法被封装为 HandlerMethod</li>
<li>准备对象绑定与类型转换</li>
<li>准备 ModelAndViewContainer 用来存储中间 Model 结果</li>
<li>解析每个参数值</li>
</ol>
</li>
<li>解析参数依赖的就是各种参数解析器，它们都有两个重要方法<ul>
<li>supportsParameter 判断是否支持方法参数</li>
<li>resolveArgument 解析方法参数</li>
</ul>
</li>
<li>常见参数的解析<ul>
<li>@RequestParam（方法参数名和路径参数名一致可以不用加，但是使用List,Map这样的集合时必须要加，因为springmvc会获取参数并创建对象，但是这样的接口无法创建对象，所以会报错）</li>
<li>省略 @RequestParam</li>
<li>@RequestParam(defaultValue)</li>
<li>MultipartFile</li>
<li>@PathVariable</li>
<li>@RequestHeader</li>
<li>@CookieValue</li>
<li>@Value</li>
<li>HttpServletRequest 等</li>
<li>@ModelAttribute    User  , url: ( name = “a” &amp; age =18)</li>
<li>默认省略 @ModelAttribute</li>
<li>@RequestBody</li>
</ul>
</li>
<li>组合模式在 Spring 中的体现</li>
<li>@RequestParam, @CookieValue 等注解中的参数名、默认值, 都可以写成活的, 即从 ${ } #{ }中获取</li>
</ol>
<h3 id="22-参数名解析"><a href="#22-参数名解析" class="headerlink" title="22) 参数名解析"></a>22) 参数名解析</h3><h4 id="演示-两种方法获取参数名"><a href="#演示-两种方法获取参数名" class="headerlink" title="演示 - 两种方法获取参数名"></a>演示 - 两种方法获取参数名</h4><h5 id="代码参考-29"><a href="#代码参考-29" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a22.A22</strong></p>
<h4 id="收获💡-34"><a href="#收获💡-34" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>如果编译时添加了 -parameters 可以生成参数表, 反射时就可以拿到参数名</li>
<li>如果编译时添加了 -g 可以生成调试信息, 但分为两种情况<ul>
<li>普通类, 会包含局部变量表, 用 asm 可以拿到参数名</li>
<li>接口, 不会包含局部变量表, 无法获得参数名<ul>
<li>这也是 MyBatis 在实现 Mapper 接口时为何要提供 @Param 注解来辅助获得参数名</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="23-对象绑定与类型转换"><a href="#23-对象绑定与类型转换" class="headerlink" title="23) 对象绑定与类型转换"></a>23) 对象绑定与类型转换</h3><h4 id="底层第一套转换接口与实现"><a href="#底层第一套转换接口与实现" class="headerlink" title="底层第一套转换接口与实现"></a>底层第一套转换接口与实现</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">classDiagram</span><br><span class="line"></span><br><span class="line">Formatter --|&gt; Printer</span><br><span class="line">Formatter --|&gt; Parser</span><br><span class="line"></span><br><span class="line">class Converters &#123;</span><br><span class="line">   Set~GenericConverter~</span><br><span class="line">&#125;</span><br><span class="line">class Converter</span><br><span class="line"></span><br><span class="line">class ConversionService</span><br><span class="line">class FormattingConversionService</span><br><span class="line"></span><br><span class="line">ConversionService &lt;|-- FormattingConversionService</span><br><span class="line">FormattingConversionService o-- Converters</span><br><span class="line"></span><br><span class="line">Printer --&gt; Adapter1</span><br><span class="line">Adapter1 --&gt; Converters</span><br><span class="line">Parser --&gt; Adapter2</span><br><span class="line">Adapter2 --&gt; Converters</span><br><span class="line">Converter --&gt; Adapter3</span><br><span class="line">Adapter3 --&gt; Converters</span><br><span class="line"></span><br><span class="line">&lt;&lt;interface&gt;&gt; Formatter</span><br><span class="line">&lt;&lt;interface&gt;&gt; Printer</span><br><span class="line">&lt;&lt;interface&gt;&gt; Parser</span><br><span class="line">&lt;&lt;interface&gt;&gt; Converter</span><br><span class="line">&lt;&lt;interface&gt;&gt; ConversionService</span><br></pre></td></tr></table></figure>
<ul>
<li>Printer 把其它类型转为 String</li>
<li>Parser 把 String 转为其它类型</li>
<li>Formatter 综合 Printer 与 Parser 功能</li>
<li>Converter 把类型 S 转为类型 T</li>
<li>Printer、Parser、Converter 经过适配转换成 GenericConverter 放入 Converters 集合</li>
<li>FormattingConversionService 利用其它们实现转换</li>
</ul>
<h4 id="底层第二套转换接口"><a href="#底层第二套转换接口" class="headerlink" title="底层第二套转换接口"></a>底层第二套转换接口</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">classDiagram</span><br><span class="line"></span><br><span class="line">PropertyEditorRegistry o-- &quot;多&quot; PropertyEditor</span><br><span class="line"></span><br><span class="line">&lt;&lt;interface&gt;&gt; PropertyEditorRegistry</span><br><span class="line">&lt;&lt;interface&gt;&gt; PropertyEditor</span><br></pre></td></tr></table></figure>
<ul>
<li>PropertyEditor 把 String 与其它类型相互转换</li>
<li>PropertyEditorRegistry 可以注册多个 PropertyEditor 对象</li>
<li>与第一套接口直接可以通过 FormatterPropertyEditorAdapter 来进行适配</li>
</ul>
<h4 id="高层接口与实现"><a href="#高层接口与实现" class="headerlink" title="高层接口与实现"></a>高层接口与实现</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">TypeConverter &lt;|-- SimpleTypeConverter</span><br><span class="line">TypeConverter &lt;|-- BeanWrapperImpl</span><br><span class="line">TypeConverter &lt;|-- DirectFieldAccessor</span><br><span class="line">TypeConverter &lt;|-- ServletRequestDataBinder</span><br><span class="line"></span><br><span class="line">SimpleTypeConverter --&gt; TypeConverterDelegate</span><br><span class="line">BeanWrapperImpl --&gt; TypeConverterDelegate</span><br><span class="line">DirectFieldAccessor --&gt; TypeConverterDelegate</span><br><span class="line">ServletRequestDataBinder --&gt; TypeConverterDelegate</span><br><span class="line"></span><br><span class="line">TypeConverterDelegate --&gt; ConversionService</span><br><span class="line">TypeConverterDelegate --&gt; PropertyEditorRegistry</span><br><span class="line"></span><br><span class="line">&lt;&lt;interface&gt;&gt; TypeConverter</span><br><span class="line">&lt;&lt;interface&gt;&gt; ConversionService</span><br><span class="line">&lt;&lt;interface&gt;&gt; PropertyEditorRegistry</span><br></pre></td></tr></table></figure>
<ul>
<li>它们都实现了 TypeConverter 这个高层转换接口，在转换时，会用到 TypeConverter Delegate 委派ConversionService 与 PropertyEditorRegistry 真正执行转换（Facade 门面模式）<ul>
<li>首先看是否有自定义转换器, @InitBinder 添加的即属于这种 (用了适配器模式把 Formatter 转为需要的 PropertyEditor)</li>
<li>再看有没有 ConversionService 转换</li>
<li>再利用默认的 PropertyEditor 转换</li>
<li>最后有一些特殊处理</li>
</ul>
</li>
<li>SimpleTypeConverter 仅做类型转换</li>
<li>BeanWrapperImpl 为 bean 的属性赋值，当需要时做类型转换，走 Property</li>
<li>DirectFieldAccessor 为 bean 的属性赋值，当需要时做类型转换，走 Field</li>
<li>ServletRequestDataBinder 为 bean 的属性执行绑定，当需要时做类型转换，根据 directFieldAccess 选择走 Property 还是 Field，具备校验与获取校验结果功能</li>
</ul>
<h4 id="演示1-类型转换与数据绑定"><a href="#演示1-类型转换与数据绑定" class="headerlink" title="演示1 - 类型转换与数据绑定"></a>演示1 - 类型转换与数据绑定</h4><h5 id="代码参考-30"><a href="#代码参考-30" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a23</strong> 包</p>
<h4 id="收获💡-35"><a href="#收获💡-35" class="headerlink" title="收获💡"></a>收获💡</h4><p>基本的类型转换与数据绑定用法</p>
<ul>
<li>SimpleTypeConverter</li>
<li>BeanWrapperImpl</li>
<li>DirectFieldAccessor</li>
<li>ServletRequestDataBinder</li>
</ul>
<h4 id="演示2-数据绑定工厂"><a href="#演示2-数据绑定工厂" class="headerlink" title="演示2 - 数据绑定工厂"></a>演示2 - 数据绑定工厂</h4><h5 id="代码参考-31"><a href="#代码参考-31" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a23.TestServletDataBinderFactory</strong></p>
<h4 id="收获💡-36"><a href="#收获💡-36" class="headerlink" title="收获💡"></a>收获💡</h4><p>ServletRequestDataBinderFactory 的用法和扩展点</p>
<ol>
<li>可以解析控制器的 @InitBinder 标注方法作为扩展点，添加自定义转换器<ul>
<li>控制器私有范围</li>
</ul>
</li>
<li>可以通过 ConfigurableWebBindingInitializer 配置 ConversionService 作为扩展点，添加自定义转换器<ul>
<li>公共范围</li>
</ul>
</li>
<li>同时加了 @InitBinder 和 ConversionService 的转换优先级<ol>
<li>优先采用 @InitBinder 的转换器</li>
<li>其次使用 ConversionService 的转换器</li>
<li>使用默认转换器</li>
<li>特殊处理（例如有参构造）</li>
</ol>
</li>
</ol>
<h4 id="演示3-获取泛型参数"><a href="#演示3-获取泛型参数" class="headerlink" title="演示3 - 获取泛型参数"></a>演示3 - 获取泛型参数</h4><h5 id="代码参考-32"><a href="#代码参考-32" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a23.sub</strong> 包</p>
<h4 id="收获💡-37"><a href="#收获💡-37" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>java api 获取泛型参数</li>
<li>spring api 获取泛型参数</li>
</ol>
<h3 id="24-ControllerAdvice-之-InitBinder"><a href="#24-ControllerAdvice-之-InitBinder" class="headerlink" title="24) @ControllerAdvice 之 @InitBinder"></a>24) @ControllerAdvice 之 @InitBinder</h3><h4 id="演示-准备-InitBinder"><a href="#演示-准备-InitBinder" class="headerlink" title="演示 - 准备 @InitBinder"></a>演示 - 准备 @InitBinder</h4><p><strong>准备 @InitBinder</strong> 在整个 HandlerAdapter 调用过程中所处的位置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant adapter as HandlerAdapter</span><br><span class="line">participant bf as WebDataBinderFactory</span><br><span class="line">participant mf as ModelFactory</span><br><span class="line">participant ihm as ServletInvocableHandlerMethod</span><br><span class="line">participant ar as ArgumentResolvers </span><br><span class="line">participant rh as ReturnValueHandlers</span><br><span class="line">participant container as ModelAndViewContainer</span><br><span class="line">rect rgb(200, 150, 255)</span><br><span class="line">adapter -&gt;&gt; +bf: 准备 @InitBinder</span><br><span class="line">bf --&gt;&gt; -adapter: </span><br><span class="line">end</span><br><span class="line">adapter -&gt;&gt; +mf: 准备 @ModelAttribute</span><br><span class="line">mf -&gt;&gt; +container: 添加Model数据</span><br><span class="line">container --&gt;&gt; -mf: </span><br><span class="line">mf --&gt;&gt; -adapter: </span><br><span class="line"></span><br><span class="line">adapter -&gt;&gt; +ihm: invokeAndHandle</span><br><span class="line">ihm -&gt;&gt; +ar: 获取 args</span><br><span class="line">ar -&gt;&gt; ar: 有的解析器涉及 RequestBodyAdvice</span><br><span class="line">ar -&gt;&gt; container: 有的解析器涉及数据绑定生成Model数据</span><br><span class="line">ar --&gt;&gt; -ihm: args</span><br><span class="line">ihm -&gt;&gt; ihm: method.invoke(bean,args) 得到 returnValue</span><br><span class="line">ihm -&gt;&gt; +rh: 处理 returnValue</span><br><span class="line">rh -&gt;&gt; rh: 有的处理器涉及 ResponseBodyAdvice</span><br><span class="line">rh -&gt;&gt; +container: 添加Model数据,处理视图名,是否渲染等</span><br><span class="line">container --&gt;&gt; -rh: </span><br><span class="line">rh --&gt;&gt; -ihm: </span><br><span class="line">ihm --&gt;&gt; -adapter: </span><br><span class="line">adapter -&gt;&gt; +container: 获取 ModelAndView</span><br><span class="line">container --&gt;&gt; -adapter: </span><br></pre></td></tr></table></figure>
<ul>
<li>RequestMappingHandlerAdapter 在图中缩写为 HandlerAdapter</li>
<li>HandlerMethodArgumentResolverComposite 在图中缩写为 ArgumentResolvers</li>
<li>HandlerMethodReturnValueHandlerComposite 在图中缩写为 ReturnValueHandlers</li>
</ul>
<h4 id="收获💡-38"><a href="#收获💡-38" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>RequestMappingHandlerAdapter 初始化时会解析 @ControllerAdvice 中的 @InitBinder 方法</li>
<li>RequestMappingHandlerAdapter 会以类为单位，在该类首次使用时，解析此类的 @InitBinder 方法</li>
<li>以上两种 @InitBinder 的解析结果都会缓存来避免重复解析</li>
<li>控制器方法调用时，会综合利用本类的 @InitBinder 方法和 @ControllerAdvice 中的 @InitBinder 方法创建绑定工厂</li>
</ol>
<h3 id="25-控制器方法执行流程"><a href="#25-控制器方法执行流程" class="headerlink" title="25) 控制器方法执行流程"></a>25) 控制器方法执行流程</h3><h4 id="图1"><a href="#图1" class="headerlink" title="图1"></a>图1</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">class ServletInvocableHandlerMethod &#123;</span><br><span class="line">	+invokeAndHandle(ServletWebRequest,ModelAndViewContainer)</span><br><span class="line">&#125;</span><br><span class="line">HandlerMethod &lt;|-- ServletInvocableHandlerMethod</span><br><span class="line">HandlerMethod o-- bean</span><br><span class="line">HandlerMethod o-- method</span><br><span class="line">ServletInvocableHandlerMethod o-- WebDataBinderFactory</span><br><span class="line">ServletInvocableHandlerMethod o-- ParameterNameDiscoverer</span><br><span class="line">ServletInvocableHandlerMethod o-- HandlerMethodArgumentResolverComposite</span><br><span class="line">ServletInvocableHandlerMethod o-- HandlerMethodReturnValueHandlerComposite</span><br></pre></td></tr></table></figure>
<p>HandlerMethod 需要</p>
<ul>
<li>bean 即是哪个 Controller</li>
<li>method 即是 Controller 中的哪个方法</li>
</ul>
<p>ServletInvocableHandlerMethod 需要</p>
<ul>
<li>WebDataBinderFactory 负责对象绑定、类型转换</li>
<li>ParameterNameDiscoverer 负责参数名解析</li>
<li>HandlerMethodArgumentResolverComposite 负责解析参数</li>
<li>HandlerMethodReturnValueHandlerComposite 负责处理返回值</li>
</ul>
<h4 id="图2"><a href="#图2" class="headerlink" title="图2"></a>图2</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant adapter as RequestMappingHandlerAdapter</span><br><span class="line">participant bf as WebDataBinderFactory</span><br><span class="line">participant mf as ModelFactory</span><br><span class="line">participant container as ModelAndViewContainer</span><br><span class="line">adapter -&gt;&gt; +bf: 准备 @InitBinder</span><br><span class="line">bf --&gt;&gt; -adapter: </span><br><span class="line">adapter -&gt;&gt; +mf: 准备 @ModelAttribute</span><br><span class="line">mf -&gt;&gt; +container: 添加Model数据</span><br><span class="line">container --&gt;&gt; -mf: </span><br><span class="line">mf --&gt;&gt; -adapter: </span><br></pre></td></tr></table></figure>
<h4 id="图3"><a href="#图3" class="headerlink" title="图3"></a>图3</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant adapter as RequestMappingHandlerAdapter</span><br><span class="line">participant ihm as ServletInvocableHandlerMethod</span><br><span class="line">participant ar as ArgumentResolvers</span><br><span class="line">participant rh as ReturnValueHandlers</span><br><span class="line">participant container as ModelAndViewContainer</span><br><span class="line"></span><br><span class="line">adapter -&gt;&gt; +ihm: invokeAndHandle</span><br><span class="line">ihm -&gt;&gt; +ar: 获取 args</span><br><span class="line">ar -&gt;&gt; ar: 有的解析器涉及 RequestBodyAdvice</span><br><span class="line">ar -&gt;&gt; container: 有的解析器涉及数据绑定生成模型数据</span><br><span class="line">container --&gt;&gt; ar: </span><br><span class="line">ar --&gt;&gt; -ihm: args</span><br><span class="line">ihm -&gt;&gt; ihm: method.invoke(bean,args) 得到 returnValue</span><br><span class="line">ihm -&gt;&gt; +rh: 处理 returnValue</span><br><span class="line">rh -&gt;&gt; rh: 有的处理器涉及 ResponseBodyAdvice</span><br><span class="line">rh -&gt;&gt; +container: 添加Model数据,处理视图名,是否渲染等</span><br><span class="line">container --&gt;&gt; -rh: </span><br><span class="line">rh --&gt;&gt; -ihm: </span><br><span class="line">ihm --&gt;&gt; -adapter: </span><br><span class="line">adapter -&gt;&gt; +container: 获取 ModelAndView</span><br><span class="line">container --&gt;&gt; -adapter: </span><br></pre></td></tr></table></figure>
<h3 id="26-ControllerAdvice-之-ModelAttribute"><a href="#26-ControllerAdvice-之-ModelAttribute" class="headerlink" title="26) @ControllerAdvice 之 @ModelAttribute"></a>26) @ControllerAdvice 之 @ModelAttribute</h3><h4 id="演示-准备-ModelAttribute"><a href="#演示-准备-ModelAttribute" class="headerlink" title="演示 - 准备 @ModelAttribute"></a>演示 - 准备 @ModelAttribute</h4><h5 id="代码参考-33"><a href="#代码参考-33" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a26</strong> 包</p>
<p><strong>准备 @ModelAttribute</strong> 在整个 HandlerAdapter 调用过程中所处的位置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant adapter as HandlerAdapter</span><br><span class="line">participant bf as WebDataBinderFactory</span><br><span class="line">participant mf as ModelFactory</span><br><span class="line">participant ihm as ServletInvocableHandlerMethod</span><br><span class="line">participant ar as ArgumentResolvers </span><br><span class="line">participant rh as ReturnValueHandlers</span><br><span class="line">participant container as ModelAndViewContainer</span><br><span class="line"></span><br><span class="line">adapter -&gt;&gt; +bf: 准备 @InitBinder</span><br><span class="line">bf --&gt;&gt; -adapter: </span><br><span class="line">rect rgb(200, 150, 255)</span><br><span class="line">adapter -&gt;&gt; +mf: 准备 @ModelAttribute</span><br><span class="line">mf -&gt;&gt; +container: 添加Model数据</span><br><span class="line">container --&gt;&gt; -mf: </span><br><span class="line">mf --&gt;&gt; -adapter: </span><br><span class="line">end</span><br><span class="line">adapter -&gt;&gt; +ihm: invokeAndHandle</span><br><span class="line">ihm -&gt;&gt; +ar: 获取 args</span><br><span class="line">ar -&gt;&gt; ar: 有的解析器涉及 RequestBodyAdvice</span><br><span class="line">ar -&gt;&gt; container: 有的解析器涉及数据绑定生成Model数据</span><br><span class="line">ar --&gt;&gt; -ihm: args</span><br><span class="line">ihm -&gt;&gt; ihm: method.invoke(bean,args) 得到 returnValue</span><br><span class="line">ihm -&gt;&gt; +rh: 处理 returnValue</span><br><span class="line">rh -&gt;&gt; rh: 有的处理器涉及 ResponseBodyAdvice</span><br><span class="line">rh -&gt;&gt; +container: 添加Model数据,处理视图名,是否渲染等</span><br><span class="line">container --&gt;&gt; -rh: </span><br><span class="line">rh --&gt;&gt; -ihm: </span><br><span class="line">ihm --&gt;&gt; -adapter: </span><br><span class="line">adapter -&gt;&gt; +container: 获取 ModelAndView</span><br><span class="line">container --&gt;&gt; -adapter: </span><br></pre></td></tr></table></figure>
<h4 id="收获💡-39"><a href="#收获💡-39" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>RequestMappingHandlerAdapter 初始化时会解析 @ControllerAdvice 中的 @ModelAttribute 方法</li>
<li>RequestMappingHandlerAdapter 会以类为单位，在该类首次使用时，解析此类的 @ModelAttribute 方法</li>
<li>以上两种 @ModelAttribute 的解析结果都会缓存来避免重复解析</li>
<li>控制器方法调用时，会综合利用本类的 @ModelAttribute 方法和 @ControllerAdvice 中的 @ModelAttribute 方法创建模型工厂</li>
</ol>
<h3 id="27-返回值处理器"><a href="#27-返回值处理器" class="headerlink" title="27) 返回值处理器"></a>27) 返回值处理器</h3><h4 id="演示-常见返回值处理器"><a href="#演示-常见返回值处理器" class="headerlink" title="演示 - 常见返回值处理器"></a>演示 - 常见返回值处理器</h4><h5 id="代码参考-34"><a href="#代码参考-34" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a27</strong> 包</p>
<h4 id="收获💡-40"><a href="#收获💡-40" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>常见的返回值处理器<ul>
<li>ModelAndView，分别获取其模型和视图名，放入 ModelAndViewContainer</li>
<li>返回值类型为 String 时，把它当做视图名，放入 ModelAndViewContainer</li>
<li>返回值添加了 @ModelAttribute 注解时，将返回值作为模型，放入 ModelAndViewContainer<ul>
<li>此时需找到默认视图名</li>
</ul>
</li>
<li>返回值省略 @ModelAttribute 注解且返回非简单类型时，将返回值作为模型，放入 ModelAndViewContainer<ul>
<li>此时需找到默认视图名</li>
</ul>
</li>
<li>返回值类型为 ResponseEntity 时<ul>
<li>此时走 MessageConverter，并设置 ModelAndViewContainer.requestHandled 为 true</li>
</ul>
</li>
<li>返回值类型为 HttpHeaders 时<ul>
<li>会设置 ModelAndViewContainer.requestHandled 为 true</li>
</ul>
</li>
<li>返回值添加了 @ResponseBody 注解时<ul>
<li>此时走 MessageConverter，并设置 ModelAndViewContainer.requestHandled 为 true</li>
</ul>
</li>
</ul>
</li>
<li>组合模式在 Spring 中的体现 + 1</li>
</ol>
<h3 id="28-MessageConverter"><a href="#28-MessageConverter" class="headerlink" title="28) MessageConverter"></a>28) MessageConverter</h3><h4 id="演示-MessageConverter-的作用"><a href="#演示-MessageConverter-的作用" class="headerlink" title="演示 - MessageConverter 的作用"></a>演示 - MessageConverter 的作用</h4><h5 id="代码参考-35"><a href="#代码参考-35" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a28.A28</strong></p>
<h4 id="收获💡-41"><a href="#收获💡-41" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>MessageConverter 的作用<ul>
<li>@ResponseBody 是返回值处理器解析的</li>
<li>但具体转换工作是 MessageConverter 做的</li>
</ul>
</li>
<li>如何选择 MediaType<ul>
<li>首先看 @RequestMapping 上有没有指定</li>
<li>其次看 request 的 Accept 头有没有指定</li>
<li>最后按 MessageConverter 的顺序, 谁能谁先转换</li>
</ul>
</li>
</ol>
<h3 id="29-ControllerAdvice-之-ResponseBodyAdvice"><a href="#29-ControllerAdvice-之-ResponseBodyAdvice" class="headerlink" title="29) @ControllerAdvice 之 ResponseBodyAdvice"></a>29) @ControllerAdvice 之 ResponseBodyAdvice</h3><h4 id="演示-ResponseBodyAdvice-增强"><a href="#演示-ResponseBodyAdvice-增强" class="headerlink" title="演示 - ResponseBodyAdvice 增强"></a>演示 - ResponseBodyAdvice 增强</h4><h5 id="代码参考-36"><a href="#代码参考-36" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a29</strong> 包</p>
<p><strong>ResponseBodyAdvice 增强</strong> 在整个 HandlerAdapter 调用过程中所处的位置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant adapter as HandlerAdapter</span><br><span class="line">participant bf as WebDataBinderFactory</span><br><span class="line">participant mf as ModelFactory</span><br><span class="line">participant ihm as ServletInvocableHandlerMethod</span><br><span class="line">participant ar as ArgumentResolvers </span><br><span class="line">participant rh as ReturnValueHandlers</span><br><span class="line">participant container as ModelAndViewContainer</span><br><span class="line"></span><br><span class="line">adapter -&gt;&gt; +bf: 准备 @InitBinder</span><br><span class="line">bf --&gt;&gt; -adapter: </span><br><span class="line">adapter -&gt;&gt; +mf: 准备 @ModelAttribute</span><br><span class="line">mf -&gt;&gt; +container: 添加Model数据</span><br><span class="line">container --&gt;&gt; -mf: </span><br><span class="line">mf --&gt;&gt; -adapter: </span><br><span class="line">adapter -&gt;&gt; +ihm: invokeAndHandle</span><br><span class="line">ihm -&gt;&gt; +ar: 获取 args</span><br><span class="line">ar -&gt;&gt; ar: 有的解析器涉及 RequestBodyAdvice</span><br><span class="line">ar -&gt;&gt; container: 有的解析器涉及数据绑定生成Model数据</span><br><span class="line">ar --&gt;&gt; -ihm: args</span><br><span class="line">ihm -&gt;&gt; ihm: method.invoke(bean,args) 得到 returnValue</span><br><span class="line">ihm -&gt;&gt; +rh: 处理 returnValue</span><br><span class="line">rect rgb(200, 150, 255)</span><br><span class="line">rh -&gt;&gt; rh: 有的处理器涉及 ResponseBodyAdvice</span><br><span class="line">end</span><br><span class="line">rh -&gt;&gt; +container: 添加Model数据,处理视图名,是否渲染等</span><br><span class="line">container --&gt;&gt; -rh: </span><br><span class="line">rh --&gt;&gt; -ihm: </span><br><span class="line">ihm --&gt;&gt; -adapter: </span><br><span class="line">adapter -&gt;&gt; +container: 获取 ModelAndView</span><br><span class="line">container --&gt;&gt; -adapter: </span><br></pre></td></tr></table></figure>
<h4 id="收获💡-42"><a href="#收获💡-42" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>ResponseBodyAdvice 返回响应体前包装</li>
</ol>
<h3 id="30-异常解析器"><a href="#30-异常解析器" class="headerlink" title="30) 异常解析器"></a>30) 异常解析器</h3><h4 id="演示-ExceptionHandlerExceptionResolver"><a href="#演示-ExceptionHandlerExceptionResolver" class="headerlink" title="演示 - ExceptionHandlerExceptionResolver"></a>演示 - ExceptionHandlerExceptionResolver</h4><h5 id="代码参考-37"><a href="#代码参考-37" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a30.A30</strong></p>
<h4 id="收获💡-43"><a href="#收获💡-43" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>它能够重用参数解析器、返回值处理器，实现组件重用</li>
<li>它能够支持嵌套异常</li>
</ol>
<h3 id="31-ControllerAdvice-之-ExceptionHandler"><a href="#31-ControllerAdvice-之-ExceptionHandler" class="headerlink" title="31) @ControllerAdvice 之 @ExceptionHandler"></a>31) @ControllerAdvice 之 @ExceptionHandler</h3><h4 id="演示-准备-ExceptionHandler"><a href="#演示-准备-ExceptionHandler" class="headerlink" title="演示 - 准备 @ExceptionHandler"></a>演示 - 准备 @ExceptionHandler</h4><h5 id="代码参考-38"><a href="#代码参考-38" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a31</strong> 包</p>
<h4 id="收获💡-44"><a href="#收获💡-44" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>ExceptionHandlerExceptionResolver 初始化时会解析 @ControllerAdvice 中的 @ExceptionHandler 方法</li>
<li>ExceptionHandlerExceptionResolver 会以类为单位，在该类首次处理异常时，解析此类的 @ExceptionHandler 方法</li>
<li>以上两种 @ExceptionHandler 的解析结果都会缓存来避免重复解析</li>
</ol>
<h3 id="32-Tomcat-异常处理"><a href="#32-Tomcat-异常处理" class="headerlink" title="32) Tomcat 异常处理"></a>32) Tomcat 异常处理</h3><ul>
<li><p>我们知道 @ExceptionHandler 只能处理发生在 mvc 流程中的异常，例如控制器内、拦截器内，那么如果是 Filter 出现了异常，如何进行处理呢？</p>
</li>
<li><p>在 Spring Boot 中，是这么实现的：</p>
<ol>
<li>因为内嵌了 Tomcat 容器，因此可以配置 Tomcat 的错误页面，Filter 与 错误页面之间是通过请求转发跳转的，可以在这里做手脚</li>
<li>先通过 ErrorPageRegistrarBeanPostProcessor 这个后处理器配置错误页面地址，默认为 <code>/error</code> 也可以通过 <code>$&#123;server.error.path&#125;</code> 进行配置</li>
<li>当 Filter 发生异常时，不会走 Spring 流程，但会走 Tomcat 的错误处理，于是就希望转发至 <code>/error</code> 这个地址<ul>
<li>当然，如果没有 @ExceptionHandler，那么最终也会走到 Tomcat 的错误处理</li>
</ul>
</li>
<li>Spring Boot 又提供了一个 BasicErrorController，它就是一个标准 @Controller，@RequestMapping 配置为 <code>/error</code>，所以处理异常的职责就又回到了 Spring</li>
<li>异常信息由于会被 Tomcat 放入 request 作用域，因此 BasicErrorController 里也能获取到</li>
<li>具体异常信息会由 DefaultErrorAttributes 封装好</li>
<li>BasicErrorController 通过 Accept 头判断需要生成哪种 MediaType 的响应<ul>
<li>如果要的不是 text/html，走 MessageConverter 流程</li>
<li>如果需要 text/html，走 mvc 流程，此时又分两种情况<ul>
<li>配置了 ErrorViewResolver，根据状态码去找 View</li>
<li>没配置或没找到，用 BeanNameViewResolver 根据一个固定为 error 的名字找到 View，即所谓的 WhitelabelErrorView</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<blockquote>
<p><strong><em>评价</em></strong></p>
<ul>
<li>一个错误处理搞得这么复杂，就问恶心不？</li>
</ul>
</blockquote>
<h4 id="演示1-错误页处理"><a href="#演示1-错误页处理" class="headerlink" title="演示1 - 错误页处理"></a>演示1 - 错误页处理</h4><h5 id="关键代码-1"><a href="#关键代码-1" class="headerlink" title="关键代码"></a>关键代码</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span> <span class="comment">// ⬅️修改了 Tomcat 服务器默认错误地址, 出错时使用请求转发方式跳转</span></span><br><span class="line"><span class="keyword">public</span> ErrorPageRegistrar <span class="title function_">errorPageRegistrar</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> webServerFactory -&gt; webServerFactory.addErrorPages(<span class="keyword">new</span> <span class="title class_">ErrorPage</span>(<span class="string">&quot;/error&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span> <span class="comment">// ⬅️TomcatServletWebServerFactory 初始化前用它增强, 注册所有 ErrorPageRegistrar</span></span><br><span class="line"><span class="keyword">public</span> ErrorPageRegistrarBeanPostProcessor <span class="title function_">errorPageRegistrarBeanPostProcessor</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ErrorPageRegistrarBeanPostProcessor</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="收获💡-45"><a href="#收获💡-45" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>Tomcat 的错误页处理手段</li>
</ol>
<h4 id="演示2-BasicErrorController"><a href="#演示2-BasicErrorController" class="headerlink" title="演示2 - BasicErrorController"></a>演示2 - BasicErrorController</h4><h5 id="关键代码-2"><a href="#关键代码-2" class="headerlink" title="关键代码"></a>关键代码</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span> <span class="comment">// ⬅️ErrorProperties 封装环境键值, ErrorAttributes 控制有哪些错误信息</span></span><br><span class="line"><span class="keyword">public</span> BasicErrorController <span class="title function_">basicErrorController</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ErrorProperties</span> <span class="variable">errorProperties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ErrorProperties</span>();</span><br><span class="line">    errorProperties.setIncludeException(<span class="literal">true</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BasicErrorController</span>(<span class="keyword">new</span> <span class="title class_">DefaultErrorAttributes</span>(), errorProperties);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span> <span class="comment">// ⬅️名称为 error 的视图, 作为 BasicErrorController 的 text/html 响应结果</span></span><br><span class="line"><span class="keyword">public</span> View <span class="title function_">error</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">View</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">render</span><span class="params">(</span></span><br><span class="line"><span class="params">            Map&lt;String, ?&gt; model, </span></span><br><span class="line"><span class="params">            HttpServletRequest request, </span></span><br><span class="line"><span class="params">            HttpServletResponse response</span></span><br><span class="line"><span class="params">        )</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">            System.out.println(model);</span><br><span class="line">            response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">            response.getWriter().print(<span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                    &lt;h3&gt;服务器内部错误&lt;/h3&gt;</span></span><br><span class="line"><span class="string">                    &quot;&quot;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span> <span class="comment">// ⬅️收集容器中所有 View 对象, bean 的名字作为视图名</span></span><br><span class="line"><span class="keyword">public</span> ViewResolver <span class="title function_">viewResolver</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BeanNameViewResolver</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="收获💡-46"><a href="#收获💡-46" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>Spring Boot 中 BasicErrorController 如何工作</li>
</ol>
<h3 id="33-BeanNameUrlHandlerMapping-与-SimpleControllerHandlerAdapter"><a href="#33-BeanNameUrlHandlerMapping-与-SimpleControllerHandlerAdapter" class="headerlink" title="33) BeanNameUrlHandlerMapping 与 SimpleControllerHandlerAdapter"></a>33) BeanNameUrlHandlerMapping 与 SimpleControllerHandlerAdapter</h3><h4 id="演示-本组映射器和适配器"><a href="#演示-本组映射器和适配器" class="headerlink" title="演示 - 本组映射器和适配器"></a>演示 - 本组映射器和适配器</h4><h5 id="关键代码-3"><a href="#关键代码-3" class="headerlink" title="关键代码"></a>关键代码</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> BeanNameUrlHandlerMapping <span class="title function_">beanNameUrlHandlerMapping</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BeanNameUrlHandlerMapping</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> SimpleControllerHandlerAdapter <span class="title function_">simpleControllerHandlerAdapter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleControllerHandlerAdapter</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean(&quot;/c3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Controller <span class="title function_">controller3</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (request, response) -&gt; &#123;</span><br><span class="line">        response.getWriter().print(<span class="string">&quot;this is c3&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="收获💡-47"><a href="#收获💡-47" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>BeanNameUrlHandlerMapping，以 / 开头的 bean 的名字会被当作映射路径</li>
<li>这些 bean 本身当作 handler，要求实现 Controller 接口</li>
<li>SimpleControllerHandlerAdapter，调用 handler</li>
<li>模拟实现这组映射器和适配器</li>
</ol>
<h3 id="34-RouterFunctionMapping-与-HandlerFunctionAdapter"><a href="#34-RouterFunctionMapping-与-HandlerFunctionAdapter" class="headerlink" title="34) RouterFunctionMapping 与 HandlerFunctionAdapter"></a>34) RouterFunctionMapping 与 HandlerFunctionAdapter</h3><h4 id="演示-本组映射器和适配器-1"><a href="#演示-本组映射器和适配器-1" class="headerlink" title="演示 - 本组映射器和适配器"></a>演示 - 本组映射器和适配器</h4><h5 id="关键代码-4"><a href="#关键代码-4" class="headerlink" title="关键代码"></a>关键代码</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> RouterFunctionMapping <span class="title function_">routerFunctionMapping</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RouterFunctionMapping</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> HandlerFunctionAdapter <span class="title function_">handlerFunctionAdapter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HandlerFunctionAdapter</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> RouterFunction&lt;ServerResponse&gt; <span class="title function_">r1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//           ⬇️映射条件   ⬇️handler</span></span><br><span class="line">    <span class="keyword">return</span> route(GET(<span class="string">&quot;/r1&quot;</span>), request -&gt; ok().body(<span class="string">&quot;this is r1&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="收获💡-48"><a href="#收获💡-48" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>RouterFunctionMapping, 通过 RequestPredicate 条件映射</li>
<li>handler 要实现 HandlerFunction 接口</li>
<li>HandlerFunctionAdapter, 调用 handler</li>
</ol>
<h3 id="35-SimpleUrlHandlerMapping-与-HttpRequestHandlerAdapter"><a href="#35-SimpleUrlHandlerMapping-与-HttpRequestHandlerAdapter" class="headerlink" title="35) SimpleUrlHandlerMapping 与 HttpRequestHandlerAdapter"></a>35) SimpleUrlHandlerMapping 与 HttpRequestHandlerAdapter</h3><h4 id="演示1-本组映射器和适配器"><a href="#演示1-本组映射器和适配器" class="headerlink" title="演示1 - 本组映射器和适配器"></a>演示1 - 本组映射器和适配器</h4><h5 id="代码参考-39"><a href="#代码参考-39" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>org.springframework.boot.autoconfigure.web.servlet.A35</strong></p>
<h5 id="关键代码-5"><a href="#关键代码-5" class="headerlink" title="关键代码"></a>关键代码</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> SimpleUrlHandlerMapping <span class="title function_">simpleUrlHandlerMapping</span><span class="params">(ApplicationContext context)</span> &#123;</span><br><span class="line">    <span class="type">SimpleUrlHandlerMapping</span> <span class="variable">handlerMapping</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleUrlHandlerMapping</span>();</span><br><span class="line">    Map&lt;String, ResourceHttpRequestHandler&gt; map </span><br><span class="line">        = context.getBeansOfType(ResourceHttpRequestHandler.class);</span><br><span class="line">    handlerMapping.setUrlMap(map);</span><br><span class="line">    <span class="keyword">return</span> handlerMapping;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> HttpRequestHandlerAdapter <span class="title function_">httpRequestHandlerAdapter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HttpRequestHandlerAdapter</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean(&quot;/**&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResourceHttpRequestHandler <span class="title function_">handler1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ResourceHttpRequestHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceHttpRequestHandler</span>();</span><br><span class="line">    handler.setLocations(List.of(<span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(<span class="string">&quot;static/&quot;</span>)));</span><br><span class="line">    <span class="keyword">return</span> handler;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean(&quot;/img/**&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResourceHttpRequestHandler <span class="title function_">handler2</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ResourceHttpRequestHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceHttpRequestHandler</span>();</span><br><span class="line">    handler.setLocations(List.of(<span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(<span class="string">&quot;images/&quot;</span>)));</span><br><span class="line">    <span class="keyword">return</span> handler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="收获💡-49"><a href="#收获💡-49" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>SimpleUrlHandlerMapping 不会在初始化时收集映射信息，需要手动收集</li>
<li>SimpleUrlHandlerMapping 映射路径</li>
<li>ResourceHttpRequestHandler 作为静态资源 handler</li>
<li>HttpRequestHandlerAdapter, 调用此 handler</li>
</ol>
<h4 id="演示2-静态资源解析优化"><a href="#演示2-静态资源解析优化" class="headerlink" title="演示2 - 静态资源解析优化"></a>演示2 - 静态资源解析优化</h4><h5 id="关键代码-6"><a href="#关键代码-6" class="headerlink" title="关键代码"></a>关键代码</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean(&quot;/**&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResourceHttpRequestHandler <span class="title function_">handler1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ResourceHttpRequestHandler</span> <span class="variable">handler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceHttpRequestHandler</span>();</span><br><span class="line">    handler.setLocations(List.of(<span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(<span class="string">&quot;static/&quot;</span>)));</span><br><span class="line">    handler.setResourceResolvers(List.of(</span><br><span class="line">        	<span class="comment">// ⬇️缓存优化</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">CachingResourceResolver</span>(<span class="keyword">new</span> <span class="title class_">ConcurrentMapCache</span>(<span class="string">&quot;cache1&quot;</span>)),</span><br><span class="line">        	<span class="comment">// ⬇️压缩优化</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">EncodedResourceResolver</span>(),</span><br><span class="line">        	<span class="comment">// ⬇️原始资源解析</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">PathResourceResolver</span>()</span><br><span class="line">    ));</span><br><span class="line">    <span class="keyword">return</span> handler;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="收获💡-50"><a href="#收获💡-50" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>责任链模式体现</li>
<li>压缩文件需要手动生成</li>
</ol>
<h4 id="演示3-欢迎页"><a href="#演示3-欢迎页" class="headerlink" title="演示3 - 欢迎页"></a>演示3 - 欢迎页</h4><h5 id="关键代码-7"><a href="#关键代码-7" class="headerlink" title="关键代码"></a>关键代码</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> WelcomePageHandlerMapping <span class="title function_">welcomePageHandlerMapping</span><span class="params">(ApplicationContext context)</span> &#123;</span><br><span class="line">    <span class="type">Resource</span> <span class="variable">resource</span> <span class="operator">=</span> context.getResource(<span class="string">&quot;classpath:static/index.html&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WelcomePageHandlerMapping</span>(<span class="literal">null</span>, context, resource, <span class="string">&quot;/**&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> SimpleControllerHandlerAdapter <span class="title function_">simpleControllerHandlerAdapter</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleControllerHandlerAdapter</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="收获💡-51"><a href="#收获💡-51" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>欢迎页支持静态欢迎页与动态欢迎页</li>
<li>WelcomePageHandlerMapping 映射欢迎页（即只映射 ‘/‘）<ul>
<li>它内置的 handler ParameterizableViewController 作用是不执行逻辑，仅根据视图名找视图</li>
<li>视图名固定为 forward:index.html</li>
</ul>
</li>
<li>SimpleControllerHandlerAdapter, 调用 handler<ul>
<li>转发至 /index.html</li>
<li>处理 /index.html 又会走上面的静态资源处理流程</li>
</ul>
</li>
</ol>
<h4 id="映射器与适配器小结"><a href="#映射器与适配器小结" class="headerlink" title="映射器与适配器小结"></a>映射器与适配器小结</h4><ol>
<li>HandlerMapping 负责建立请求与控制器之间的映射关系<ul>
<li>RequestMappingHandlerMapping (与 @RequestMapping 匹配)</li>
<li>WelcomePageHandlerMapping    (/)</li>
<li>BeanNameUrlHandlerMapping    (与 bean 的名字匹配 以 / 开头)</li>
<li>RouterFunctionMapping        (函数式 RequestPredicate, HandlerFunction)</li>
<li>SimpleUrlHandlerMapping      (静态资源 通配符 /<strong> /img/</strong>)</li>
<li>之间也会有顺序问题, boot 中默认顺序如上</li>
</ul>
</li>
<li>HandlerAdapter 负责实现对各种各样的 handler 的适配调用<ul>
<li>RequestMappingHandlerAdapter 处理：@RequestMapping 方法<ul>
<li>参数解析器、返回值处理器体现了组合模式</li>
</ul>
</li>
<li>SimpleControllerHandlerAdapter 处理：Controller 接口</li>
<li>HandlerFunctionAdapter 处理：HandlerFunction 函数式接口</li>
<li>HttpRequestHandlerAdapter 处理：HttpRequestHandler 接口 (静态资源处理)</li>
<li>这也是典型适配器模式体现</li>
</ul>
</li>
</ol>
<h3 id="36-mvc-处理流程"><a href="#36-mvc-处理流程" class="headerlink" title="36) mvc 处理流程"></a>36) mvc 处理流程</h3><p>当浏览器发送一个请求 <code>http://localhost:8080/hello</code> 后，请求到达服务器，其处理流程是：</p>
<ol>
<li><p>服务器提供了 DispatcherServlet，它使用的是标准 Servlet 技术</p>
<ul>
<li>路径：默认映射路径为 <code>/</code>，即会匹配到所有请求 URL，可作为请求的统一入口，也被称之为<strong>前控制器</strong><ul>
<li>jsp 不会匹配到 DispatcherServlet</li>
<li>其它有路径的 Servlet 匹配优先级也高于 DispatcherServlet</li>
</ul>
</li>
<li>创建：在 Boot 中，由 DispatcherServletAutoConfiguration 这个自动配置类提供 DispatcherServlet 的 bean</li>
<li>初始化：DispatcherServlet 初始化时会优先到容器里寻找各种组件，作为它的成员变量<ul>
<li>HandlerMapping，初始化时记录映射关系</li>
<li>HandlerAdapter，初始化时准备参数解析器、返回值处理器、消息转换器</li>
<li>HandlerExceptionResolver，初始化时准备参数解析器、返回值处理器、消息转换器</li>
<li>ViewResolver</li>
</ul>
</li>
</ul>
</li>
<li><p>DispatcherServlet 会利用 RequestMappingHandlerMapping 查找控制器方法</p>
<ul>
<li><p>例如根据 /hello 路径找到 @RequestMapping(“/hello”) 对应的控制器方法</p>
</li>
<li><p>控制器方法会被封装为 HandlerMethod 对象，并结合匹配到的拦截器一起返回给 DispatcherServlet </p>
</li>
<li><p>HandlerMethod 和拦截器合在一起称为 HandlerExecutionChain（调用链）对象</p>
</li>
</ul>
</li>
<li><p>DispatcherServlet 接下来会：</p>
<ol>
<li>调用拦截器的 preHandle 方法</li>
<li>RequestMappingHandlerAdapter 调用 handle 方法，准备数据绑定工厂、模型工厂、ModelAndViewContainer、将 HandlerMethod 完善为 ServletInvocableHandlerMethod<ul>
<li>@ControllerAdvice 全局增强点1️⃣：补充模型数据</li>
<li>@ControllerAdvice 全局增强点2️⃣：补充自定义类型转换器</li>
<li>使用 HandlerMethodArgumentResolver 准备参数<ul>
<li>@ControllerAdvice 全局增强点3️⃣：RequestBody 增强</li>
</ul>
</li>
<li>调用 ServletInvocableHandlerMethod </li>
<li>使用 HandlerMethodReturnValueHandler 处理返回值<ul>
<li>@ControllerAdvice 全局增强点4️⃣：ResponseBody 增强</li>
</ul>
</li>
<li>根据 ModelAndViewContainer 获取 ModelAndView<ul>
<li>如果返回的 ModelAndView 为 null，不走第 4 步视图解析及渲染流程<ul>
<li>例如，有的返回值处理器调用了 HttpMessageConverter 来将结果转换为 JSON，这时 ModelAndView 就为 null</li>
</ul>
</li>
<li>如果返回的 ModelAndView 不为 null，会在第 4 步走视图解析及渲染流程</li>
</ul>
</li>
</ul>
</li>
<li>调用拦截器的 postHandle 方法</li>
<li>处理异常或视图渲染<ul>
<li>如果 1~3 出现异常，走 ExceptionHandlerExceptionResolver 处理异常流程<ul>
<li>@ControllerAdvice 全局增强点5️⃣：@ExceptionHandler 异常处理</li>
</ul>
</li>
<li>正常，走视图解析及渲染流程</li>
</ul>
</li>
<li>调用拦截器的 afterCompletion 方法</li>
</ol>
</li>
</ol>
<h2 id="Boot"><a href="#Boot" class="headerlink" title="Boot"></a>Boot</h2><h3 id="37-Boot-骨架项目"><a href="#37-Boot-骨架项目" class="headerlink" title="37) Boot 骨架项目"></a>37) Boot 骨架项目</h3><p>如果是 linux 环境，用以下命令即可获取 spring boot 的骨架 pom.xml</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -G https://start.spring.io/pom.xml -d dependencies=web,mysql,mybatis -o pom.xml</span><br></pre></td></tr></table></figure>
<p>也可以使用 Postman 等工具实现</p>
<p>若想获取更多用法，请参考</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl https://start.spring.io</span><br></pre></td></tr></table></figure>
<h3 id="38-Boot-War项目"><a href="#38-Boot-War项目" class="headerlink" title="38) Boot War项目"></a>38) Boot War项目</h3><p>步骤1：创建模块，区别在于打包方式选择 war</p>
<p><img src="img/image-20211021160145072.png" alt="image-20211021160145072" style="zoom: 50%;" /></p>
<p>接下来勾选 Spring Web 支持</p>
<p><img src="img/image-20211021162416525.png" alt="image-20211021162416525" style="zoom:50%;" /></p>
<p>步骤2：编写控制器</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">abc</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入了控制器&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>步骤3：编写 jsp 视图，新建 webapp 目录和一个 hello.jsp 文件，注意文件名与控制器方法返回的视图逻辑名一致</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">src</span><br><span class="line">	|- main</span><br><span class="line">		|- java</span><br><span class="line">		|- resources</span><br><span class="line">		|- webapp</span><br><span class="line">			|- hello.jsp</span><br></pre></td></tr></table></figure>
<p>步骤4：配置视图路径，打开 application.properties 文件</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.mvc.view.prefix</span>=<span class="string">/</span></span><br><span class="line"><span class="attr">spring.mvc.view.suffix</span>=<span class="string">.jsp</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>将来 prefix + 控制器方法返回值 + suffix 即为视图完整路径</p>
</blockquote>
<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><p>如果用 mvn 插件 <code>mvn spring-boot:run</code> 或 main 方法测试</p>
<ul>
<li>必须添加如下依赖，因为此时用的还是内嵌 tomcat，而内嵌 tomcat 默认不带 jasper（用来解析 jsp）</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-jasper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>也可以使用 Idea 配置 tomcat 来测试，此时用的是外置 tomcat</p>
<ul>
<li>骨架生成的代码中，多了一个 ServletInitializer，它的作用就是配置外置 Tomcat 使用的，在外置 Tomcat 启动后，去调用它创建和运行 SpringApplication</li>
</ul>
<h4 id="启示"><a href="#启示" class="headerlink" title="启示"></a>启示</h4><p>对于 jar 项目，若要支持 jsp，也可以在加入 jasper 依赖的前提下，把 jsp 文件置入 <code>META-INF/resources</code> </p>
<h3 id="39-Boot-启动过程"><a href="#39-Boot-启动过程" class="headerlink" title="39) Boot 启动过程"></a>39) Boot 启动过程</h3><p>阶段一：SpringApplication 构造</p>
<ol>
<li>记录 BeanDefinition 源</li>
<li>推断应用类型</li>
<li>记录 ApplicationContext 初始化器</li>
<li>记录监听器</li>
<li>推断主启动类</li>
</ol>
<p>阶段二：执行 run 方法</p>
<ol>
<li><p>得到 SpringApplicationRunListeners，名字取得不好，实际是事件发布器</p>
<ul>
<li>发布 application starting 事件1️⃣</li>
</ul>
</li>
<li><p>封装启动 args</p>
</li>
<li><p>准备 Environment 添加命令行参数（*）</p>
</li>
<li><p>ConfigurationPropertySources 处理（*）</p>
<ul>
<li>发布 application environment 已准备事件2️⃣</li>
</ul>
</li>
<li><p>通过 EnvironmentPostProcessorApplicationListener 进行 env 后处理（*）</p>
<ul>
<li>application.properties，由 StandardConfigDataLocationResolver 解析</li>
<li>spring.application.json</li>
</ul>
</li>
<li><p>绑定 spring.main 到 SpringApplication 对象（*）</p>
</li>
<li><p>打印 banner（*）</p>
</li>
<li><p>创建容器</p>
</li>
<li><p>准备容器</p>
<ul>
<li>发布 application context 已初始化事件3️⃣</li>
</ul>
</li>
<li><p>加载 bean 定义</p>
<ul>
<li>发布 application prepared 事件4️⃣</li>
</ul>
</li>
<li><p>refresh 容器</p>
<ul>
<li>发布 application started 事件5️⃣</li>
</ul>
</li>
<li><p>执行 runner</p>
<ul>
<li><p>发布 application ready 事件6️⃣</p>
</li>
<li><p>这其中有异常，发布 application failed 事件7️⃣</p>
</li>
</ul>
</li>
</ol>
<blockquote>
<p>带 * 的有独立的示例</p>
</blockquote>
<h4 id="演示-启动过程"><a href="#演示-启动过程" class="headerlink" title="演示 - 启动过程"></a>演示 - 启动过程</h4><p><strong>com.itheima.a39.A39_1</strong> 对应 SpringApplication 构造</p>
<p><strong>com.itheima.a39.A39_2</strong> 对应第1步，并演示 7 个事件</p>
<p><strong>com.itheima.a39.A39_3</strong> 对应第2、8到12步</p>
<p><strong>org.springframework.boot.Step3</strong></p>
<p><strong>org.springframework.boot.Step4</strong></p>
<p><strong>org.springframework.boot.Step5</strong></p>
<p><strong>org.springframework.boot.Step6</strong></p>
<p><strong>org.springframework.boot.Step7</strong></p>
<h4 id="收获💡-52"><a href="#收获💡-52" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>SpringApplication 构造方法中所做的操作<ul>
<li>可以有多种源用来加载 bean 定义</li>
<li>应用类型推断</li>
<li>添加容器初始化器</li>
<li>添加监听器</li>
<li>演示主类推断</li>
</ul>
</li>
<li>如何读取 spring.factories 中的配置</li>
<li>从配置中获取重要的事件发布器：SpringApplicationRunListeners</li>
<li>容器的创建、初始化器增强、加载 bean 定义等</li>
<li>CommandLineRunner、ApplicationRunner 的作用</li>
<li>环境对象<ol>
<li>命令行 PropertySource</li>
<li>ConfigurationPropertySources 规范环境键名称</li>
<li>EnvironmentPostProcessor 后处理增强<ul>
<li>由 EventPublishingRunListener 通过监听事件2️⃣来调用</li>
</ul>
</li>
<li>绑定 spring.main 前缀的 key value 至 SpringApplication</li>
</ol>
</li>
<li>Banner </li>
</ol>
<h3 id="40-Tomcat-内嵌容器"><a href="#40-Tomcat-内嵌容器" class="headerlink" title="40) Tomcat 内嵌容器"></a>40) Tomcat 内嵌容器</h3><p>Tomcat 基本结构</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Server</span><br><span class="line">└───Service</span><br><span class="line">    ├───Connector (协议, 端口)</span><br><span class="line">    └───Engine</span><br><span class="line">        └───Host(虚拟主机 localhost)</span><br><span class="line">            ├───Context1 (应用1, 可以设置虚拟路径, / 即 url 起始路径; 项目磁盘路径, 即 docBase )</span><br><span class="line">            │   │   index.html</span><br><span class="line">            │   └───WEB-INF</span><br><span class="line">            │       │   web.xml (servlet, filter, listener) 3.0</span><br><span class="line">            │       ├───classes (servlet, controller, service ...)</span><br><span class="line">            │       ├───jsp</span><br><span class="line">            │       └───lib (第三方 jar 包)</span><br><span class="line">            └───Context2 (应用2)</span><br><span class="line">                │   index.html</span><br><span class="line">                └───WEB-INF</span><br><span class="line">                        web.xml</span><br></pre></td></tr></table></figure>
<h4 id="演示1-Tomcat-内嵌容器"><a href="#演示1-Tomcat-内嵌容器" class="headerlink" title="演示1 - Tomcat 内嵌容器"></a>演示1 - Tomcat 内嵌容器</h4><h5 id="关键代码-8"><a href="#关键代码-8" class="headerlink" title="关键代码"></a>关键代码</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> LifecycleException, IOException &#123;</span><br><span class="line">    <span class="comment">// 1.创建 Tomcat 对象</span></span><br><span class="line">    <span class="type">Tomcat</span> <span class="variable">tomcat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Tomcat</span>();</span><br><span class="line">    tomcat.setBaseDir(<span class="string">&quot;tomcat&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.创建项目文件夹, 即 docBase 文件夹</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">docBase</span> <span class="operator">=</span> Files.createTempDirectory(<span class="string">&quot;boot.&quot;</span>).toFile();</span><br><span class="line">    docBase.deleteOnExit();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.创建 Tomcat 项目, 在 Tomcat 中称为 Context</span></span><br><span class="line">    <span class="type">Context</span> <span class="variable">context</span> <span class="operator">=</span> tomcat.addContext(<span class="string">&quot;&quot;</span>, docBase.getAbsolutePath());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.编程添加 Servlet</span></span><br><span class="line">    context.addServletContainerInitializer(<span class="keyword">new</span> <span class="title class_">ServletContainerInitializer</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStartup</span><span class="params">(Set&lt;Class&lt;?&gt;&gt; c, ServletContext ctx)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">            <span class="type">HelloServlet</span> <span class="variable">helloServlet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HelloServlet</span>();</span><br><span class="line">            ctx.addServlet(<span class="string">&quot;aaa&quot;</span>, helloServlet).addMapping(<span class="string">&quot;/hello&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, Collections.emptySet());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5.启动 Tomcat</span></span><br><span class="line">    tomcat.start();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6.创建连接器, 设置监听端口</span></span><br><span class="line">    <span class="type">Connector</span> <span class="variable">connector</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Connector</span>(<span class="keyword">new</span> <span class="title class_">Http11Nio2Protocol</span>());</span><br><span class="line">    connector.setPort(<span class="number">8080</span>);</span><br><span class="line">    tomcat.setConnector(connector);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="演示2-集成-Spring-容器"><a href="#演示2-集成-Spring-容器" class="headerlink" title="演示2 - 集成 Spring 容器"></a>演示2 - 集成 Spring 容器</h4><h5 id="关键代码-9"><a href="#关键代码-9" class="headerlink" title="关键代码"></a>关键代码</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">WebApplicationContext</span> <span class="variable">springContext</span> <span class="operator">=</span> getApplicationContext();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.编程添加 Servlet</span></span><br><span class="line">context.addServletContainerInitializer(<span class="keyword">new</span> <span class="title class_">ServletContainerInitializer</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onStartup</span><span class="params">(Set&lt;Class&lt;?&gt;&gt; c, ServletContext ctx)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="comment">// ⬇️通过 ServletRegistrationBean 添加 DispatcherServlet 等</span></span><br><span class="line">        <span class="keyword">for</span> (ServletRegistrationBean registrationBean : </span><br><span class="line">             springContext.getBeansOfType(ServletRegistrationBean.class).values()) &#123;</span><br><span class="line">            registrationBean.onStartup(ctx);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, Collections.emptySet());</span><br></pre></td></tr></table></figure>
<h3 id="41-Boot-自动配置"><a href="#41-Boot-自动配置" class="headerlink" title="41) Boot 自动配置"></a>41) Boot 自动配置</h3><h4 id="AopAutoConfiguration"><a href="#AopAutoConfiguration" class="headerlink" title="AopAutoConfiguration"></a>AopAutoConfiguration</h4><p>Spring Boot 是利用了自动配置类来简化了 aop 相关配置</p>
<ul>
<li>AOP 自动配置类为 <code>org.springframework.boot.autoconfigure.aop.AopAutoConfiguration</code></li>
<li>可以通过 <code>spring.aop.auto=false</code> 禁用 aop 自动配置</li>
<li>AOP 自动配置的本质是通过 <code>@EnableAspectJAutoProxy</code> 来开启了自动代理，如果在引导类上自己添加了 <code>@EnableAspectJAutoProxy</code> 那么以自己添加的为准</li>
<li><code>@EnableAspectJAutoProxy</code> 的本质是向容器中添加了 <code>AnnotationAwareAspectJAutoProxyCreator</code> 这个 bean 后处理器，它能够找到容器中所有切面，并为匹配切点的目标类创建代理，创建代理的工作一般是在 bean 的初始化阶段完成的</li>
</ul>
<h4 id="DataSourceAutoConfiguration"><a href="#DataSourceAutoConfiguration" class="headerlink" title="DataSourceAutoConfiguration"></a>DataSourceAutoConfiguration</h4><ul>
<li>对应的自动配置类为：org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration</li>
<li>它内部采用了条件装配，通过检查容器的 bean，以及类路径下的 class，来决定该 @Bean 是否生效</li>
</ul>
<p>简单说明一下，Spring Boot 支持两大类数据源：</p>
<ul>
<li>EmbeddedDatabase - 内嵌数据库连接池</li>
<li>PooledDataSource - 非内嵌数据库连接池</li>
</ul>
<p>PooledDataSource 又支持如下数据源</p>
<ul>
<li>hikari 提供的 HikariDataSource</li>
<li>tomcat-jdbc 提供的 DataSource</li>
<li>dbcp2 提供的 BasicDataSource</li>
<li>oracle 提供的 PoolDataSourceImpl</li>
</ul>
<p>如果知道数据源的实现类类型，即指定了 <code>spring.datasource.type</code>，理论上可以支持所有数据源，但这样做的一个最大问题是无法订制每种数据源的详细配置（如最大、最小连接数等）</p>
<h4 id="MybatisAutoConfiguration"><a href="#MybatisAutoConfiguration" class="headerlink" title="MybatisAutoConfiguration"></a>MybatisAutoConfiguration</h4><ul>
<li>MyBatis 自动配置类为 <code>org.mybatis.spring.boot.autoconfigure.MybatisAutoConfiguration</code></li>
<li>它主要配置了两个 bean<ul>
<li>SqlSessionFactory - MyBatis 核心对象，用来创建 SqlSession</li>
<li>SqlSessionTemplate - SqlSession 的实现，此实现会与当前线程绑定</li>
<li>用 ImportBeanDefinitionRegistrar 的方式扫描所有标注了 @Mapper 注解的接口</li>
<li>用 AutoConfigurationPackages 来确定扫描的包</li>
</ul>
</li>
<li>还有一个相关的 bean：MybatisProperties，它会读取配置文件中带 <code>mybatis.</code> 前缀的配置项进行定制配置</li>
</ul>
<p>@MapperScan 注解的作用与 MybatisAutoConfiguration 类似，会注册 MapperScannerConfigurer 有如下区别</p>
<ul>
<li>@MapperScan 扫描具体包（当然也可以配置关注哪个注解）</li>
<li>@MapperScan 如果不指定扫描具体包，则会把引导类范围内，所有接口当做 Mapper 接口</li>
<li>MybatisAutoConfiguration 关注的是所有标注 @Mapper 注解的接口，会忽略掉非 @Mapper 标注的接口</li>
</ul>
<p>这里有同学有疑问，之前介绍的都是将具体类交给 Spring 管理，怎么到了 MyBatis 这儿，接口就可以被管理呢？</p>
<ul>
<li>其实并非将接口交给 Spring 管理，而是每个接口会对应一个 MapperFactoryBean，是后者被 Spring 所管理，接口只是作为 MapperFactoryBean 的一个属性来配置</li>
</ul>
<h4 id="TransactionAutoConfiguration"><a href="#TransactionAutoConfiguration" class="headerlink" title="TransactionAutoConfiguration"></a>TransactionAutoConfiguration</h4><ul>
<li><p>事务自动配置类有两个：</p>
<ul>
<li><code>org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration</code></li>
<li><code>org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration</code></li>
</ul>
</li>
<li><p>前者配置了 DataSourceTransactionManager 用来执行事务的提交、回滚操作</p>
</li>
<li>后者功能上对标 @EnableTransactionManagement，包含以下三个 bean<ul>
<li>BeanFactoryTransactionAttributeSourceAdvisor 事务切面类，包含通知和切点</li>
<li>TransactionInterceptor 事务通知类，由它在目标方法调用前后加入事务操作</li>
<li>AnnotationTransactionAttributeSource 会解析 @Transactional 及事务属性，也包含了切点功能</li>
</ul>
</li>
<li>如果自己配置了 DataSourceTransactionManager 或是在引导类加了 @EnableTransactionManagement，则以自己配置的为准</li>
</ul>
<h4 id="ServletWebServerFactoryAutoConfiguration"><a href="#ServletWebServerFactoryAutoConfiguration" class="headerlink" title="ServletWebServerFactoryAutoConfiguration"></a>ServletWebServerFactoryAutoConfiguration</h4><ul>
<li>提供 ServletWebServerFactory</li>
</ul>
<h4 id="DispatcherServletAutoConfiguration"><a href="#DispatcherServletAutoConfiguration" class="headerlink" title="DispatcherServletAutoConfiguration"></a>DispatcherServletAutoConfiguration</h4><ul>
<li>提供 DispatcherServlet</li>
<li>提供 DispatcherServletRegistrationBean</li>
</ul>
<h4 id="WebMvcAutoConfiguration"><a href="#WebMvcAutoConfiguration" class="headerlink" title="WebMvcAutoConfiguration"></a>WebMvcAutoConfiguration</h4><ul>
<li>配置 DispatcherServlet 的各项组件，提供的 bean 见过的有<ul>
<li>多项 HandlerMapping</li>
<li>多项 HandlerAdapter</li>
<li>HandlerExceptionResolver</li>
</ul>
</li>
</ul>
<h4 id="ErrorMvcAutoConfiguration"><a href="#ErrorMvcAutoConfiguration" class="headerlink" title="ErrorMvcAutoConfiguration"></a>ErrorMvcAutoConfiguration</h4><ul>
<li>提供的 bean 有 BasicErrorController</li>
</ul>
<h4 id="MultipartAutoConfiguration"><a href="#MultipartAutoConfiguration" class="headerlink" title="MultipartAutoConfiguration"></a>MultipartAutoConfiguration</h4><ul>
<li>它提供了 org.springframework.web.multipart.support.StandardServletMultipartResolver</li>
<li>该 bean 用来解析 multipart/form-data 格式的数据</li>
</ul>
<h4 id="HttpEncodingAutoConfiguration"><a href="#HttpEncodingAutoConfiguration" class="headerlink" title="HttpEncodingAutoConfiguration"></a>HttpEncodingAutoConfiguration</h4><ul>
<li>POST 请求参数如果有中文，无需特殊设置，这是因为 Spring Boot 已经配置了 org.springframework.boot.web.servlet.filter.OrderedCharacterEncodingFilter</li>
<li>对应配置 server.servlet.encoding.charset=UTF-8，默认就是 UTF-8</li>
<li>当然，它只影响非 json 格式的数据</li>
</ul>
<h4 id="演示-自动配置类原理"><a href="#演示-自动配置类原理" class="headerlink" title="演示 - 自动配置类原理"></a>演示 - 自动配置类原理</h4><h5 id="关键代码-10"><a href="#关键代码-10" class="headerlink" title="关键代码"></a>关键代码</h5><p>假设已有第三方的两个自动配置类</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// ⬅️第三方的配置类</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AutoConfiguration1</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Bean1 <span class="title function_">bean1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Bean1</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">// ⬅️第三方的配置类</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AutoConfiguration2</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Bean2 <span class="title function_">bean2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Bean2</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>提供一个配置文件 META-INF/spring.factories，key 为导入器类名，值为多个自动配置类名，用逗号分隔</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">MyImportSelector</span>=<span class="string">\</span></span><br><span class="line"><span class="string">AutoConfiguration1,\</span></span><br><span class="line"><span class="string">AutoConfiguration2</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong><em>注意</em></strong></p>
<ul>
<li>上述配置文件中 MyImportSelector 与 AutoConfiguration1，AutoConfiguration2 为简洁均省略了包名，自己测试时请将包名根据情况补全</li>
</ul>
</blockquote>
<p>引入自动配置</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// ⬅️本项目的配置类</span></span><br><span class="line"><span class="meta">@Import(MyImportSelector.class)</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Config</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyImportSelector</span> <span class="keyword">implements</span> <span class="title class_">DeferredImportSelector</span> &#123;</span><br><span class="line">    <span class="comment">// ⬇️该方法从 META-INF/spring.factories 读取自动配置类名，返回的 String[] 即为要导入的配置类</span></span><br><span class="line">    <span class="keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) &#123;</span><br><span class="line">        <span class="keyword">return</span> SpringFactoriesLoader</span><br><span class="line">            .loadFactoryNames(MyImportSelector.class, <span class="literal">null</span>).toArray(<span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="收获💡-53"><a href="#收获💡-53" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>自动配置类本质上就是一个配置类而已，只是用 META-INF/spring.factories 管理，与应用配置类解耦</li>
<li>@Enable 打头的注解本质是利用了 @Import</li>
<li>@Import 配合 DeferredImportSelector 即可实现导入，selectImports 方法的返回值即为要导入的配置类名</li>
<li>DeferredImportSelector 的导入会在最后执行，为的是让其它配置优先解析</li>
</ol>
<h3 id="42-条件装配底层"><a href="#42-条件装配底层" class="headerlink" title="42) 条件装配底层"></a>42) 条件装配底层</h3><p>条件装配的底层是本质上是 @Conditional 与 Condition，这两个注解。引入自动配置类时，期望满足一定条件才能被 Spring 管理，不满足则不管理，怎么做呢？</p>
<p>比如条件是【类路径下必须有 dataSource】这个 bean ，怎么做呢？</p>
<p>首先编写条件判断类，它实现 Condition 接口，编写条件判断逻辑</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyCondition1</span> <span class="keyword">implements</span> <span class="title class_">Condition</span> &#123; </span><br><span class="line">    <span class="comment">// ⬇️如果存在 Druid 依赖，条件成立</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ClassUtils.isPresent(<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其次，在要导入的自动配置类上添加 <code>@Conditional(MyCondition1.class)</code>，将来此类被导入时就会做条件检查</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">// 第三方的配置类</span></span><br><span class="line"><span class="meta">@Conditional(MyCondition1.class)</span> <span class="comment">// ⬅️加入条件</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AutoConfiguration1</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Bean1 <span class="title function_">bean1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Bean1</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>分别测试加入和去除 druid 依赖，观察 bean1 是否存在于容器</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="收获💡-54"><a href="#收获💡-54" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>学习一种特殊的 if - else</li>
</ol>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><h3 id="43-FactoryBean"><a href="#43-FactoryBean" class="headerlink" title="43) FactoryBean"></a>43) FactoryBean</h3><h4 id="演示-FactoryBean"><a href="#演示-FactoryBean" class="headerlink" title="演示 - FactoryBean"></a>演示 - FactoryBean</h4><h5 id="代码参考-40"><a href="#代码参考-40" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a43</strong> 包</p>
<h4 id="收获💡-55"><a href="#收获💡-55" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>它的作用是用制造创建过程较为复杂的产品, 如 SqlSessionFactory, 但 @Bean 已具备等价功能</li>
<li>使用上较为古怪, 一不留神就会用错<ol>
<li>被 FactoryBean 创建的产品<ul>
<li>会认为创建、依赖注入、Aware 接口回调、前初始化这些都是 FactoryBean 的职责, 这些流程都不会走</li>
<li>唯有后初始化的流程会走, 也就是产品可以被代理增强</li>
<li>单例的产品不会存储于 BeanFactory 的 singletonObjects 成员中, 而是另一个 factoryBeanObjectCache 成员中</li>
</ul>
</li>
<li>按名字去获取时, 拿到的是产品对象, 名字前面加 &amp; 获取的是工厂对象</li>
</ol>
</li>
</ol>
<h3 id="44-Indexed-原理"><a href="#44-Indexed-原理" class="headerlink" title="44) @Indexed 原理"></a>44) @Indexed 原理</h3><p>真实项目中，只需要加入以下依赖即可</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-indexer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="演示-Indexed"><a href="#演示-Indexed" class="headerlink" title="演示 - @Indexed"></a>演示 - @Indexed</h4><h5 id="代码参考-41"><a href="#代码参考-41" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a44</strong> 包</p>
<h4 id="收获💡-56"><a href="#收获💡-56" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>在编译时就根据 @Indexed 生成 META-INF/spring.components 文件</li>
<li>扫描时<ul>
<li>如果发现 META-INF/spring.components 存在, 以它为准加载 bean definition</li>
<li>否则, 会遍历包下所有 class 资源 (包括 jar 内的)</li>
</ul>
</li>
<li>解决的问题，在编译期就找到 @Component 组件，节省运行期间扫描 @Component 的时间</li>
</ol>
<h3 id="45-代理进一步理解"><a href="#45-代理进一步理解" class="headerlink" title="45) 代理进一步理解"></a>45) 代理进一步理解</h3><h4 id="演示-代理"><a href="#演示-代理" class="headerlink" title="演示 - 代理"></a>演示 - 代理</h4><h5 id="代码参考-42"><a href="#代码参考-42" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a45</strong> 包</p>
<h4 id="收获💡-57"><a href="#收获💡-57" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li><p>spring 代理的设计特点</p>
<ul>
<li><p>依赖注入和初始化影响的是原始对象</p>
<ul>
<li>因此 cglib 不能用 MethodProxy.invokeSuper()</li>
</ul>
</li>
<li><p>代理与目标是两个对象，二者成员变量并不共用数据</p>
</li>
</ul>
</li>
<li><p>static 方法、final 方法、private 方法均无法增强</p>
<ul>
<li>进一步理解代理增强基于方法重写</li>
</ul>
</li>
</ol>
<h3 id="46-Value-装配底层"><a href="#46-Value-装配底层" class="headerlink" title="46) @Value 装配底层"></a>46) @Value 装配底层</h3><h4 id="按类型装配的步骤"><a href="#按类型装配的步骤" class="headerlink" title="按类型装配的步骤"></a>按类型装配的步骤</h4><ol>
<li>查看需要的类型是否为 Optional，是，则进行封装（非延迟），否则向下走</li>
<li>查看需要的类型是否为 ObjectFactory 或 ObjectProvider，是，则进行封装（延迟），否则向下走</li>
<li>查看需要的类型（成员或参数）上是否用 @Lazy 修饰，是，则返回代理，否则向下走</li>
<li>解析 @Value 的值<ol>
<li>如果需要的值是字符串，先解析 ${ }，再解析 #{ }</li>
<li>不是字符串，需要用 TypeConverter 转换</li>
</ol>
</li>
<li>看需要的类型是否为 Stream、Array、Collection、Map，是，则按集合处理，否则向下走</li>
<li>在 BeanFactory 的 resolvableDependencies 中找有没有类型合适的对象注入，没有向下走</li>
<li>在 BeanFactory 及父工厂中找类型匹配的 bean 进行筛选，筛选时会考虑 @Qualifier 及泛型</li>
<li>结果个数为 0 抛出 NoSuchBeanDefinitionException 异常 </li>
<li>如果结果 &gt; 1，再根据 @Primary 进行筛选</li>
<li>如果结果仍 &gt; 1，再根据成员名或变量名进行筛选</li>
<li>结果仍 &gt; 1，抛出 NoUniqueBeanDefinitionException 异常</li>
</ol>
<h4 id="演示-Value-装配过程"><a href="#演示-Value-装配过程" class="headerlink" title="演示 - @Value 装配过程"></a>演示 - @Value 装配过程</h4><h5 id="代码参考-43"><a href="#代码参考-43" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a46</strong> 包</p>
<h4 id="收获💡-58"><a href="#收获💡-58" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>ContextAnnotationAutowireCandidateResolver 作用之一，获取 @Value 的值</li>
<li>了解 ${ } 对应的解析器</li>
<li>了解 #{ } 对应的解析器</li>
<li>TypeConvert 的一项体现</li>
</ol>
<h3 id="47-Autowired-装配底层"><a href="#47-Autowired-装配底层" class="headerlink" title="47) @Autowired 装配底层"></a>47) @Autowired 装配底层</h3><h4 id="演示-Autowired-装配过程"><a href="#演示-Autowired-装配过程" class="headerlink" title="演示 - @Autowired 装配过程"></a>演示 - @Autowired 装配过程</h4><h5 id="代码参考-44"><a href="#代码参考-44" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a47</strong> 包</p>
<h4 id="收获💡-59"><a href="#收获💡-59" class="headerlink" title="收获💡"></a>收获💡</h4><ol>
<li>@Autowired 本质上是根据成员变量或方法参数的类型进行装配</li>
<li>如果待装配类型是 Optional，需要根据 Optional 泛型找到 bean，再封装为 Optional 对象装配</li>
<li>如果待装配的类型是 ObjectFactory，需要根据 ObjectFactory 泛型创建 ObjectFactory 对象装配<ul>
<li>此方法可以延迟 bean 的获取</li>
</ul>
</li>
<li>如果待装配的成员变量或方法参数上用 @Lazy 标注，会创建代理对象装配<ul>
<li>此方法可以延迟真实 bean 的获取</li>
<li>被装配的代理不作为 bean</li>
</ul>
</li>
<li>如果待装配类型是数组，需要获取数组元素类型，根据此类型找到多个 bean 进行装配</li>
<li>如果待装配类型是 Collection 或其子接口，需要获取 Collection 泛型，根据此类型找到多个 bean</li>
<li>如果待装配类型是 ApplicationContext 等特殊类型<ul>
<li>会在 BeanFactory 的 resolvableDependencies 成员按类型查找装配</li>
<li>resolvableDependencies 是 map 集合，key 是特殊类型，value 是其对应对象</li>
<li>不能直接根据 key 进行查找，而是用 isAssignableFrom 逐一尝试右边类型是否可以被赋值给左边的 key 类型</li>
</ul>
</li>
<li>如果待装配类型有泛型参数<ul>
<li>需要利用 ContextAnnotationAutowireCandidateResolver 按泛型参数类型筛选</li>
</ul>
</li>
<li>如果待装配类型有 @Qualifier<ul>
<li>需要利用 ContextAnnotationAutowireCandidateResolver 按注解提供的 bean 名称筛选</li>
</ul>
</li>
<li>有 @Primary 标注的 @Component 或 @Bean 的处理</li>
<li>与成员变量名或方法参数名同名 bean 的处理</li>
</ol>
<h3 id="48-事件监听器"><a href="#48-事件监听器" class="headerlink" title="48) 事件监听器"></a>48) 事件监听器</h3><h4 id="演示-事件监听器"><a href="#演示-事件监听器" class="headerlink" title="演示 - 事件监听器"></a>演示 - 事件监听器</h4><h5 id="代码参考-45"><a href="#代码参考-45" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a48</strong> 包</p>
<h4 id="收获💡-60"><a href="#收获💡-60" class="headerlink" title="收获💡"></a>收获💡</h4><p>事件监听器的两种方式</p>
<ol>
<li>实现 ApplicationListener 接口<ul>
<li>根据接口泛型确定事件类型</li>
</ul>
</li>
<li>@EventListener 标注监听方法<ul>
<li>根据监听器方法参数确定事件类型</li>
<li>解析时机：在 SmartInitializingSingleton（所有单例初始化完成后），解析每个单例 bean</li>
</ul>
</li>
</ol>
<h3 id="49-事件发布器"><a href="#49-事件发布器" class="headerlink" title="49) 事件发布器"></a>49) 事件发布器</h3><h4 id="演示-事件发布器"><a href="#演示-事件发布器" class="headerlink" title="演示 - 事件发布器"></a>演示 - 事件发布器</h4><h5 id="代码参考-46"><a href="#代码参考-46" class="headerlink" title="代码参考"></a>代码参考</h5><p><strong>com.itheima.a49</strong> 包</p>
<h4 id="收获💡-61"><a href="#收获💡-61" class="headerlink" title="收获💡"></a>收获💡</h4><p>事件发布器模拟实现</p>
<ol>
<li>addApplicationListenerBean 负责收集容器中的监听器<ul>
<li>监听器会统一转换为 GenericApplicationListener 对象，以支持判断事件类型</li>
</ul>
</li>
<li>multicastEvent 遍历监听器集合，发布事件<ul>
<li>发布前先通过 GenericApplicationListener.supportsEventType 判断支持该事件类型才发事件</li>
<li>可以利用线程池进行异步发事件优化</li>
</ul>
</li>
<li>如果发送的事件对象不是 ApplicationEvent 类型，Spring 会把它包装为 PayloadApplicationEvent 并用泛型技术解析事件对象的原始类型<ul>
<li>视频中未讲解</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>编程学习</category>
      </categories>
      <tags>
        <tag>Spring</tag>
        <tag>面试总结</tag>
      </tags>
  </entry>
  <entry>
    <title>vue</title>
    <url>/2023/08/09/vue/</url>
    <content><![CDATA[<h1 id="一、Webpack"><a href="#一、Webpack" class="headerlink" title="一、Webpack"></a>一、Webpack</h1><h2 id="1-Webpack基本概念"><a href="#1-Webpack基本概念" class="headerlink" title="1 Webpack基本概念"></a>1 Webpack基本概念</h2><h3 id="1-0-为什么要学习Webpack"><a href="#1-0-为什么要学习Webpack" class="headerlink" title="1.0 为什么要学习Webpack"></a>1.0 为什么要学习Webpack</h3><ol>
<li><p>减少文件数量 </p>
</li>
<li><p>缩减代码体积  </p>
</li>
<li>提高浏览器打开的速</li>
</ol>
<h3 id="1-1-Webpack基本概述"><a href="#1-1-Webpack基本概述" class="headerlink" title="1.1 Webpack基本概述"></a>1.1 Webpack基本概述</h3><p>Webpack本质是, 一个第三方模块包, 用于分析, 并打包代码</p>
<ul>
<li>支持所有类型文件的打包</li>
<li>支持less/sass =&gt; css</li>
<li>支持ES6/7/8 =&gt; ES5 </li>
<li>压缩代码, 提高加载速度</li>
</ul>
<h2 id="2-Webpack使用步骤"><a href="#2-Webpack使用步骤" class="headerlink" title="2 Webpack使用步骤"></a>2 Webpack使用步骤</h2><h3 id="2-0-环境准备"><a href="#2-0-环境准备" class="headerlink" title="2.0 环境准备"></a>2.0 环境准备</h3><p>初始化包环境</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yarn init</span><br></pre></td></tr></table></figure>
<p>安装依赖包</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yarn add webpack webpack-cil -D</span><br></pre></td></tr></table></figure>
<p>配置scripts (自定义命令)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&quot;script&quot;:&#123;</span><br><span class="line">	&quot;build&quot;:&quot;webpack&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>Webpack基础使用 </p>
<p>需求： 2个js文件 -&gt;打包成1个js文件 </p>
<p>分析： </p>
<p>①：新建src下的资源 </p>
<p>②：add.js – 定义求和函数并导出 </p>
<p>③：index.js – 引入add模块并使用函数输出结果 </p>
<p>④：执行 <code>yarn build</code> 自定义命令, 进行打包 (确保终端路径在src的父级文件夹) </p>
<p>⑤：打包后默认生成dist和main.js, 观察其中代码</p>
<p>webpack再次打包</p>
<p>需求：代码更多后, 如何打包呢? </p>
<p>分析： </p>
<p>①：src下新建tool/tool.js </p>
<p>②：定义数组求和函数导出 </p>
<p>③：index.js – 引入tool模块的函数并使用, 打印结果 </p>
<p>④：执行 <code>yarn build</code> 自定义命令, 进行打包 (确保终端路径在src的父级文件夹)</p>
<p>⑤：打包后默认生成dist和main.js, 观察其中代码</p>
<h2 id="3-Webpack的配置"><a href="#3-Webpack的配置" class="headerlink" title="3 Webpack的配置"></a>3 Webpack的配置</h2><h3 id="3-0-Webpack-入口和出口"><a href="#3-0-Webpack-入口和出口" class="headerlink" title="3.0 Webpack-入口和出口"></a>3.0 Webpack-入口和出口</h3><p>配置文档: <a href="https://webpack.docschina.org/concepts/#entry">https://webpack.docschina.org/concepts/#entry</a></p>
<ol>
<li><p>新建webpack.config.js </p>
</li>
<li><p>填入配置 </p>
</li>
<li>修改入口文件名 </li>
<li>打包观察效果</li>
</ol>
<p><strong>注意:</strong> webpack基于node, 所以导出, 遵守CommonJS规范</p>
<h3 id="3-1-yarn-build执行流程图"><a href="#3-1-yarn-build执行流程图" class="headerlink" title="3.1 yarn build执行流程图"></a>3.1 yarn build执行流程图</h3><h3 id="3-3-html-webpack-plugin插件"><a href="#3-3-html-webpack-plugin插件" class="headerlink" title="3.3 html-webpack-plugin插件"></a>3.3 html-webpack-plugin插件</h3><p>配置文档: <a href="https://webpack.docschina.org/plugins/html-webpack-plugin/">https://webpack.docschina.org/plugins/html-webpack-plugin/</a></p>
<ol>
<li>下载插件</li>
</ol>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yarn add html-webpack-plugin -D</span><br></pre></td></tr></table></figure>
<ol>
<li>webpack.config.js添加配置</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入自动生成 html 的插件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">// ...省略其他代码</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">            <span class="attr">template</span>: <span class="string">&#x27;./public/index.html&#x27;</span> <span class="comment">// 以此为基准生成打包后html文件</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>重新打包后观察dist下是否多出html并运行看效果</li>
</ol>
<p>==打包后的index.html自动引入打包后的js文件==</p>
<blockquote>
<p>总结: webpack就像一个人, webpack.config.js是人物属性, 给它穿什么装备它就干什么活</p>
</blockquote>
<h3 id="3-4-加载器-处理css文件问题"><a href="#3-4-加载器-处理css文件问题" class="headerlink" title="3.4_加载器 - 处理css文件问题"></a>3.4_加载器 - 处理css文件问题</h3><blockquote>
<p>目标: 自己准备css文件, 引入到webpack入口, 测试webpack是否能打包css文件</p>
</blockquote>
<p>1.新建 - src/css/index.css</p>
<p>2.编写去除li圆点样式代码</p>
<p>3.(重要) 一定要引入到入口才会被Webpack打包</p>
<p>4.执行打包命令观察效果</p>
<blockquote>
<p>总结: 保存原因, 因为webpack默认只能处理js类型文件</p>
</blockquote>
<h3 id="3-5-加载器-处理css文件"><a href="#3-5-加载器-处理css文件" class="headerlink" title="3.5_加载器 - 处理css文件"></a>3.5_加载器 - 处理css文件</h3><blockquote>
<p>目标: loaders加载器, 可让webpack处理其他类型的文件, 打包到js中</p>
</blockquote>
<p>原因: Webpack默认只认识 js 文件和 json文件</p>
<p><a href="https://webpack.docschina.org/loaders/style-loader/">style-loader文档</a></p>
<p><a href="https://webpack.docschina.org/loaders/css-loader/">css-loader文档</a></p>
<ol>
<li><p>安装依赖</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yarn add style-loader css-loader -D</span><br></pre></td></tr></table></figure>
</li>
<li><p>Webpack.config.js 配置</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">// ...其他代码</span></span><br><span class="line">    <span class="attr">module</span>: &#123; </span><br><span class="line">        <span class="attr">rules</span>: [ <span class="comment">// loader的规则</span></span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="comment">// 匹配所有的css文件</span></span><br><span class="line">            <span class="comment">// use数组里从右向左运行</span></span><br><span class="line">            <span class="comment">// 先用 css-loader 让webpack能够识别 css 文件的内容并打包</span></span><br><span class="line">            <span class="comment">// 再用 style-loader 将样式, 把css插入到dom中</span></span><br><span class="line">            <span class="attr">use</span>: [ <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>]</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>新建src/css/li.css - 去掉li默认样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">ul</span>, <span class="selector-tag">li</span>&#123;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>引入到main.js (因为这里是入口需要产生关系, 才会被Webpack找到打包起来)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./css/index.css&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>运行打包后dist/index.html观察效果和css引入情况</p>
</li>
</ol>
<blockquote>
<p>总结: 万物皆模块, 引到入口, 才会被webpack打包, css打包进js中, 然后被嵌入在style标签插入dom上</p>
</blockquote>
<h3 id="3-6-加载器-处理less文件"><a href="#3-6-加载器-处理less文件" class="headerlink" title="3.6_加载器 - 处理less文件"></a>3.6_加载器 - 处理less文件</h3><blockquote>
<p>目标: less-loader让webpack处理less文件, less模块翻译less代码</p>
</blockquote>
<p><a href="https://webpack.docschina.org/loaders/less-loader/">less-loader文档</a></p>
<ol>
<li><p>下载依赖包</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add less less-loader -D</span><br></pre></td></tr></table></figure>
</li>
<li><p>Webpack.config.js 配置</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [ <span class="comment">// loader的规则</span></span><br><span class="line">    <span class="comment">// ...省略其他</span></span><br><span class="line">    &#123;</span><br><span class="line">    	<span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">    	<span class="comment">// 使用less-loader, 让webpack处理less文件, 内置还会用less翻译less代码成css内容</span></span><br><span class="line">        <span class="attr">use</span>: [ <span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&#x27;less-loader&#x27;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>src/less/index.less  - 设置li字体大小24px</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@size:</span><span class="number">24px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span>, <span class="selector-tag">li</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="variable">@size</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>引入到main.js中</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./less/index.less&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>打包运行dist/index.html 观察效果</p>
</li>
</ol>
<blockquote>
<p>总结: 只要找到对应的loader加载器, 就能让webpack处理不同类型文件</p>
</blockquote>
<h3 id="3-7-加载器-处理图片文件"><a href="#3-7-加载器-处理图片文件" class="headerlink" title="3.7_加载器 - 处理图片文件"></a>3.7_加载器 - 处理图片文件</h3><blockquote>
<p>目标: 用asset module方式(webpack5版本新增)</p>
</blockquote>
<p><a href="https://webpack.docschina.org/guides/asset-modules/">asset module文档</a></p>
<p>如果使用的是webpack5版本的, 直接配置在webpack.config.js - 的 rules里即可</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif|jpeg)$/i</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;asset&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果你用的是webpack4及以前的, 请使用者里的配置</p>
<p><a href="https://webpack.docschina.org/loaders/url-loader/">url-loader文档</a></p>
<p><a href="https://webpack.docschina.org/loaders/file-loader/">file-loader文档</a></p>
<ol>
<li><p>下载依赖包</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add url-loader file-loader -D</span><br></pre></td></tr></table></figure>
</li>
<li><p>webpack.config.js 配置</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif|jpeg)$/i</span>,</span><br><span class="line">  <span class="attr">use</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>, <span class="comment">// 匹配文件, 尝试转base64字符串打包到js中</span></span><br><span class="line">      <span class="comment">// 配置limit, 超过8k, 不转, file-loader复制, 随机名, 输出文件</span></span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">limit</span>: <span class="number">8</span> * <span class="number">1024</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>图片转成 base64 字符串</p>
<ul>
<li>好处就是浏览器不用发请求了，直接可以读取</li>
<li>坏处就是如果图片太大，再转<code>base64</code>就会让图片的体积增大 30% 左右</li>
</ul>
</li>
<li><p>src/assets/准备老师发的2个图文件</p>
</li>
<li><p>在css/less/index.less - 把小图片用做背景图</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: url(<span class="string">../assets/logo_small.png</span>) no-repeat center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在src/main.js - 把大图插入到创建的img标签上, 添加body上显示</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入图片-使用</span></span><br><span class="line"><span class="keyword">import</span> imgUrl <span class="keyword">from</span> <span class="string">&#x27;./assets/1.gif&#x27;</span></span><br><span class="line"><span class="keyword">const</span> theImg = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;img&quot;</span>)</span><br><span class="line">theImg.<span class="property">src</span> = imgUrl</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(theImg)</span><br></pre></td></tr></table></figure>
</li>
<li><p>打包运行dist/index.html观察2个图片区别</p>
</li>
</ol>
<blockquote>
<p>总结:  url-loader 把文件转base64 打包进js中, 会有30%的增大, file-loader 把文件直接复制输出</p>
</blockquote>
<h3 id="3-8-webpack加载文件优缺点"><a href="#3-8-webpack加载文件优缺点" class="headerlink" title="3.8_webpack加载文件优缺点"></a>3.8_webpack加载文件优缺点</h3><p>图片转成 base64 字符串</p>
<ul>
<li>好处就是浏览器不用发请求了，直接可以读取</li>
<li>坏处就是如果图片太大，再转<code>base64</code>就会让图片的体积增大 30% 左右</li>
</ul>
<h3 id="3-9-加载器-处理字体文件"><a href="#3-9-加载器-处理字体文件" class="headerlink" title="3.9_加载器 - 处理字体文件"></a>3.9_加载器 - 处理字体文件</h3><blockquote>
<p>目标: 用asset module技术, asset/resource直接输出到dist目录下</p>
</blockquote>
<p>webpack5使用这个配置</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123; <span class="comment">// webpack5默认内部不认识这些文件, 所以当做静态资源直接输出即可</span></span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(eot|svg|ttf|woff|woff2)$/</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;asset/resource&#x27;</span>,</span><br><span class="line">    <span class="attr">generator</span>: &#123;</span><br><span class="line">    	<span class="attr">filename</span>: <span class="string">&#x27;font/[name].[hash:6][ext]&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>webpack4及以前使用下面的配置</p>
<ol>
<li><p>webpack.config.js - 准备配置</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123; <span class="comment">// 处理字体图标的解析</span></span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(eot|svg|ttf|woff|woff2)$/</span>,</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                    <span class="attr">limit</span>: <span class="number">2</span> * <span class="number">1024</span>,</span><br><span class="line">                    <span class="comment">// 配置输出的文件名</span></span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;[name].[ext]&#x27;</span>,</span><br><span class="line">                    <span class="comment">// 配置输出的文件目录</span></span><br><span class="line">                    <span class="attr">outputPath</span>: <span class="string">&quot;fonts/&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>src/assets/ - 放入字体库fonts文件夹</p>
</li>
<li><p>在main.js引入iconfont.css</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 引入字体图标文件</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./assets/fonts/iconfont.css&#x27;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在public/index.html使用字体图标样式</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-weixin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>执行打包命令-观察打包后网页效果</p>
</li>
</ol>
<blockquote>
<p>总结: url-loader和file-loader 可以打包静态资源文件</p>
</blockquote>
<h3 id="3-10-加载器-处理高版本js语法"><a href="#3-10-加载器-处理高版本js语法" class="headerlink" title="3.10_加载器 - 处理高版本js语法"></a>3.10_加载器 - 处理高版本js语法</h3><blockquote>
<p>目标: 让webpack对高版本 的js代码, 降级处理后打包</p>
</blockquote>
<p>写代码演示: 高版本的js代码(箭头函数), 打包后, 直接原封不动打入了js文件中, 遇到一些低版本的浏览器就会报错</p>
<p>原因: <strong>webpack 默认仅内置了 模块化的 兼容性处理</strong>   <code>import  export</code></p>
<p>babel 的介绍 =&gt; 用于处理高版本 js语法 的兼容性  <a href="https://www.babeljs.cn/">babel官网</a></p>
<p>解决: 让webpack配合babel-loader 对js语法做处理</p>
<p><a href="https://webpack.docschina.org/loaders/babel-loader/">babel-loader文档</a></p>
<ol>
<li><p>安装包</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add -D babel-loader @babel/core @babel/preset-env</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置规则</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">                <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>] <span class="comment">// 预设:转码规则(用bable开发环境本来预设的)</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol>
<li><p>在main.js中使用箭头函数(高版本js)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 高级语法</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;你好babel&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fn) <span class="comment">// 这里必须打印不能调用/不使用, 不然webpack会精简成一句打印不要函数了/不会编译未使用的代码</span></span><br><span class="line"><span class="comment">// 没有babel集成时, 原样直接打包进lib/bundle.js</span></span><br><span class="line"><span class="comment">// 有babel集成时, 会翻译成普通函数打包进lib/bundle.js</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>打包后观察lib/bundle.js - 被转成成普通函数使用了 - 这就是babel降级翻译的功能</p>
</li>
</ol>
<blockquote>
<p>总结: babel-loader 可以让webpack 对高版本js语法做降级处理后打包</p>
</blockquote>
<h2 id="4-Webpack-开发服务器"><a href="#4-Webpack-开发服务器" class="headerlink" title="4. Webpack 开发服务器"></a>4. Webpack 开发服务器</h2><h3 id="4-0-Webpack开发服务器-为何学"><a href="#4-0-Webpack开发服务器-为何学" class="headerlink" title="4.0_Webpack开发服务器-为何学?"></a>4.0_Webpack开发服务器-为何学?</h3><p>文档地址: <a href="https://webpack.docschina.org/configuration/dev-server/">https://webpack.docschina.org/configuration/dev-server/</a></p>
<p>抛出问题: 每次修改代码, 都需要重新 yarn build 打包, 才能看到最新的效果, 实际工作中, 打包 yarn build 非常费时 (30s - 60s) 之间</p>
<p>为什么费时? </p>
<ol>
<li>构建依赖</li>
<li>磁盘读取对应的文件到内存, 才能加载  </li>
<li>用对应的 loader 进行处理  </li>
<li>将处理完的内容, 输出到磁盘指定目录  </li>
</ol>
<p>解决问题: 起一个开发服务器,  在电脑内存中打包, 缓存一些已经打包过的内容, 只重新打包修改的文件, 最终运行加载在内存中给浏览器使用</p>
<h3 id="4-1-Webpack-dev-server自动刷新"><a href="#4-1-Webpack-dev-server自动刷新" class="headerlink" title="4.1_Webpack-dev-server自动刷新"></a>4.1_Webpack-dev-server自动刷新</h3><blockquote>
<p>目标: 启动本地服务, 可实时更新修改的代码, 打包<strong>变化代码</strong>到内存中, 然后直接提供端口和网页访问</p>
</blockquote>
<ol>
<li><p>下载包</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add webpack-dev-server -D</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置自定义命令</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">scripts</span>: &#123;</span><br><span class="line">	<span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack&quot;</span>,</span><br><span class="line">	<span class="string">&quot;serve&quot;</span>: <span class="string">&quot;webpack serve&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>运行命令-启动webpack开发服务器</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn serve</span><br><span class="line"><span class="comment">#或者 npm run serve</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<blockquote>
<p>总结: 以后改了src下的资源代码, 就会直接更新到内存打包, 然后反馈到浏览器上了</p>
</blockquote>
<h3 id="4-2-Webpack-dev-server配置"><a href="#4-2-Webpack-dev-server配置" class="headerlink" title="4.2_Webpack-dev-server配置"></a>4.2_Webpack-dev-server配置</h3><ol>
<li><p>在webpack.config.js中添加服务器配置</p>
<p>更多配置参考这里: <a href="https://webpack.docschina.org/configuration/dev-server/#devserverafter">https://webpack.docschina.org/configuration/dev-server/#devserverafter</a></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="comment">// ...其他配置</span></span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">      <span class="attr">port</span>: <span class="number">3000</span> <span class="comment">// 端口号</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="二、Vue概念和脚手架"><a href="#二、Vue概念和脚手架" class="headerlink" title="二、Vue概念和脚手架"></a>二、Vue概念和脚手架</h1><h2 id="1-Vue基本概念"><a href="#1-Vue基本概念" class="headerlink" title="1. Vue基本概念"></a>1. Vue基本概念</h2><h3 id="1-0-为什么学习Vue"><a href="#1-0-为什么学习Vue" class="headerlink" title="1.0 为什么学习Vue"></a>1.0 为什么学习Vue</h3><p>更少的时间, 干更多的活. 开发网站速度快</p>
<p>企业里都使用Vue开发网站</p>
<p>市场上90%工作都要求会Vue, 会Vue拿高薪, 甚至JAVA或测试都要学点Vue</p>
<h3 id="1-1-Vue是什么"><a href="#1-1-Vue是什么" class="headerlink" title="1.1 Vue是什么"></a>1.1 Vue是什么</h3><p>渐进式javacript框架, 一套拥有自己规则的语法</p>
<p>官网地址: <a href="https://cn.vuejs.org/">https://cn.vuejs.org/</a> (作者: 尤雨溪)</p>
<h4 id="1-1-1-渐进式"><a href="#1-1-1-渐进式" class="headerlink" title="1.1.1 渐进式"></a>1.1.1 渐进式</h4><p><strong>生活里_渐进式：</strong>逐渐进步, 想用什么就用什么, 不必全都使用</p>
<p><strong>web里_渐进式：</strong> HTML能写网页, CSS能让网页更好看, JS赋予网页交互效果, jQ写的更快, node可以提供动态数据</p>
<p><strong>Vue里_渐进式：</strong>Vue从基础开始, 会循序渐进向前学习, 如下知识点可能你现在不明白, 但是学完整个Vue回过头来看, 会很有帮助</p>
<h4 id="1-1-2-库和框架"><a href="#1-1-2-库和框架" class="headerlink" title="1.1.2 库和框架"></a>1.1.2 库和框架</h4><p>库: 封装的属性或方法 (例jQuery)</p>
<p>框架: 拥有自己的规则和元素, 比库强大的多 (例Vue)</p>
<h3 id="1-2-Vue学习方式"><a href="#1-2-Vue学习方式" class="headerlink" title="1.2 Vue学习方式"></a>1.2 Vue学习方式</h3><p>传统开发模式：基于html文件开发Vue</p>
<p>工程化开发方式：在webpack环境中开发Vue，这是最推荐, 企业常用的方式</p>
<p><strong>Vue如何学</strong></p>
<ol>
<li><p>知识点自测最好做到了如指掌 - 做不到只能花30分钟去记住结论和公式 </p>
</li>
<li><p>记住Vue指令作用, 基础语法 - 弄一个字典(一一映射关系) </p>
</li>
<li>在课上例子, 练习, 案例, 作业, 项目中, 反复磨炼使用</li>
<li>学会查找问题的方式和解决方式(弄个报错总结.md, 避免反复进坑)</li>
</ol>
<h2 id="2-vue-cli脚手架"><a href="#2-vue-cli脚手架" class="headerlink" title="2.@vue/cli脚手架"></a>2.@vue/cli脚手架</h2><h3 id="2-0-vue-cli和脚手架介绍"><a href="#2-0-vue-cli和脚手架介绍" class="headerlink" title="2.0 @vue/cli和脚手架介绍"></a>2.0 @vue/cli和脚手架介绍</h3><ul>
<li>@vue/cli是Vue官方提供的一个全局模块包(得到vue命令), 此包用于创建脚手架项目</li>
<li>脚手架是为了保证各施工过程顺利进行而搭设的工作平台</li>
</ul>
<p><strong>脚手架好处</strong></p>
<ul>
<li>开箱即用</li>
<li>0配置webpack</li>
<li>babel支持</li>
<li>css, less支持</li>
<li>开发服务器支持</li>
</ul>
<h3 id="2-1-vue-cli安装"><a href="#2-1-vue-cli安装" class="headerlink" title="2.1 @vue/cli安装"></a>2.1 @vue/cli安装</h3><p>全局安装@vue/cli 模块包</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yarn global add @vue/cli</span><br></pre></td></tr></table></figure>
<p>查看是否成功</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vue -V</span><br></pre></td></tr></table></figure>
<h3 id="2-2-vue-cli-创建项目"><a href="#2-2-vue-cli-创建项目" class="headerlink" title="2.2 @vue/cli 创建项目"></a>2.2 @vue/cli 创建项目</h3><p>1、创建项目</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vue create vuecli-demo</span><br></pre></td></tr></table></figure>
<p>注意: 项目名不能有大写字母, 中文和特殊符号</p>
<p>2、选择模板和包管理器, 等待脚手架项目创建完毕</p>
<h3 id="2-2-vue-cli-启动开发服务"><a href="#2-2-vue-cli-启动开发服务" class="headerlink" title="2.2 @vue/cli 启动开发服务"></a>2.2 @vue/cli 启动开发服务</h3><ol>
<li>cd进入项目下, 启动内置的webpack本地热更新开发服务器 – 浏览项目页面</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> vuecli-demo</span><br><span class="line">yarn serve</span><br></pre></td></tr></table></figure>
<ol>
<li>如果未自动弹出浏览器, 手动打开输入提示的域名+端口浏览项目页面</li>
</ol>
<h3 id="2-3-vue-cli-目录和代码分析"><a href="#2-3-vue-cli-目录和代码分析" class="headerlink" title="2.3 @vue/cli 目录和代码分析"></a>2.3 @vue/cli 目录和代码分析</h3><p>目标：文件夹和文件含义, 关键文件里代码意思</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vuecil-demo        <span class="comment"># 项目目录</span></span><br><span class="line">   ├── node_modules <span class="comment"># 项目依赖的第三方包</span></span><br><span class="line">   ├── public       <span class="comment"># 静态文件目录</span></span><br><span class="line">     ├── favicon.ico<span class="comment"># 浏览器小图标</span></span><br><span class="line">     └── index.html <span class="comment"># 单页面的html文件(网页浏览的是它)</span></span><br><span class="line">   ├── src          <span class="comment"># 业务文件夹</span></span><br><span class="line">     ├── assets     <span class="comment"># 静态资源</span></span><br><span class="line">       └── logo.png <span class="comment"># vue的logo图片</span></span><br><span class="line">     ├── components <span class="comment"># 组件目录</span></span><br><span class="line">       └── HelloWorld.vue <span class="comment"># 欢迎页面vue代码文件 </span></span><br><span class="line">     ├── App.vue    <span class="comment"># 整个应用的根组件</span></span><br><span class="line">     └── main.js    <span class="comment"># 入口js文件</span></span><br><span class="line">   ├── .gitignore   <span class="comment"># git提交忽略配置</span></span><br><span class="line">   ├── babel.config.js  <span class="comment"># babel配置</span></span><br><span class="line">   ├── package.json  <span class="comment"># 依赖包列表</span></span><br><span class="line">   ├── README.md    <span class="comment"># 项目说明</span></span><br><span class="line">└── yarn.lock    <span class="comment"># 项目包版本锁定和缓存地址</span></span><br></pre></td></tr></table></figure>
<p>主要文件及含义</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">node_modules下都是下载的第三方包</span><br><span class="line">public/index.<span class="property">html</span> – 浏览器运行的网页</span><br><span class="line">src/main.<span class="property">js</span> – webpack打包的入口文件</span><br><span class="line">src/<span class="title class_">App</span>.<span class="property">vue</span> – vue项目入口页面</span><br><span class="line">package.<span class="property">json</span> – 依赖包列表文件</span><br></pre></td></tr></table></figure>
<h3 id="2-4-项目架构了解"><a href="#2-4-项目架构了解" class="headerlink" title="2.4 项目架构了解"></a>2.4 项目架构了解</h3><p>目标：知道项目入口, 以及代码执行顺序和引入关系</p>
<p>main.js和App.vue, 以及index.html作用和关系?</p>
<ol>
<li><p>main.js – 项目打包主入口 – Vue初始化 </p>
</li>
<li><p>App.vue – Vue页面主入口 </p>
</li>
<li>index.html – 浏览器运行的文件</li>
<li>App.vue =&gt; main.js =&gt; index.html</li>
</ol>
<h3 id="2-5-vue-cli-自定义配置"><a href="#2-5-vue-cli-自定义配置" class="headerlink" title="2.5 @vue/cli 自定义配置"></a>2.5 @vue/cli 自定义配置</h3><p>目标：项目中没有webpack.config.js文件，因为Vue脚手架项目用的vue.config.js</p>
<p>src并列处新建vue.config.js, 填入配置, 重启webpack开发服务器</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">module.exports=&#123;</span><br><span class="line">	devServe:&#123;//自定义服务配置</span><br><span class="line">		port:3000,</span><br><span class="line">		open:<span class="literal">true</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-6-eslint检查代码"><a href="#2-6-eslint检查代码" class="headerlink" title="2.6 eslint检查代码"></a>2.6 eslint检查代码</h3><p>如果写代码违反了eslint的规则-报错 演示: 在main.js中随便定义变量 – 不使用 – 观察eslint报错</p>
<p>方式1: 手动解决掉错误, 以后项目中会讲如何自动解决 </p>
<p>方式2: 暂时关闭eslint检查(因为现在主要精力在学习Vue语法上), 在vue.config.js中配置后重启服</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports=&#123;</span><br><span class="line">	lintOnSave:false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-7-单vue文件讲解"><a href="#2-7-单vue文件讲解" class="headerlink" title="2.7 单vue文件讲解"></a>2.7 单vue文件讲解</h3><ul>
<li>Vue推荐采用.vue文件来开发项目 </li>
<li>template里只能有一个根标签 </li>
<li>vue文件-独立模块-作用域互不影响 </li>
<li>style配合scoped属性, 保证样式只针对当前template内标签生效 </li>
<li>vue文件配合webpack, 把他们打包起来插入到index.html</li>
</ul>
<h3 id="2-8脚手架项目清理欢迎界面"><a href="#2-8脚手架项目清理欢迎界面" class="headerlink" title="2.8脚手架项目清理欢迎界面"></a>2.8<em>脚手架项目</em>清理欢迎界面</h3><p>assets 和 components 文件夹下的一切都删除掉 (不要默认的欢迎页面)</p>
<p>src/App.vue默认有很多内容, 可以全部删除留下template和script和style的框</p>
<h1 id="三、Vue指令"><a href="#三、Vue指令" class="headerlink" title="三、Vue指令"></a>三、Vue指令</h1><h2 id="1-Vue基础-插值表达式"><a href="#1-Vue基础-插值表达式" class="headerlink" title="1. Vue基础-插值表达式"></a>1. Vue基础-插值表达式</h2><p>目标：在dom标签中, 直接插入vue数据变量</p>
<p>又叫: 声明式渲染/文本插值</p>
<p>语法: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; obj.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;&#123;&#123; obj.age &gt; 18 ? &#x27;成年&#x27; : &#x27;未成年&#x27; &#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123; // 格式固定, 定义vue数据之处</span><br><span class="line">    return &#123;  // key相当于变量名</span><br><span class="line">      msg: &quot;hello, vue&quot;,</span><br><span class="line">      obj: &#123;</span><br><span class="line">        name: &quot;小vue&quot;,</span><br><span class="line">        age: 5</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>总结: dom中插值表达式赋值, vue的变量必须在data里声明</p>
<h2 id="2-MVVM设计模式"><a href="#2-MVVM设计模式" class="headerlink" title="2. MVVM设计模式"></a>2. MVVM设计模式</h2><p>目的: 转变思维, 用数据驱动视图改变, 操作dom的事, vue源码内干了</p>
<p>设计模式: 是一套被反复使用的、多数人知晓的、经过分类编目的、代码设计经验的总结。</p>
<ul>
<li>MVVM，一种软件架构模式，决定了写代码的思想和层次<ul>
<li>M：   model数据模型          (data里定义)    </li>
<li>V：    view视图                   （html页面）</li>
<li>VM： ViewModel视图模型  (vue.js源码)</li>
</ul>
</li>
</ul>
<ul>
<li>MVVM通过<strong>数据双向绑定</strong>让数据自动地双向同步 <strong>不再需要操作DOM</strong><ul>
<li>V（修改视图） -&gt; M（数据自动同步）</li>
<li>M（修改数据） -&gt; V（视图自动同步）</li>
</ul>
</li>
</ul>
<p><strong>1. 在vue中，不推荐直接手动操作DOM！！！</strong>  </p>
<p><strong>2. 在vue中，通过数据驱动视图，不要在想着怎么操作DOM，而是想着如何操作数据！！</strong>(思想转变)</p>
<p>总结: vue源码内采用MVVM设计模式思想, 大大减少了DOM操作, 挺高开发效率</p>
<h2 id="3-vue指令"><a href="#3-vue指令" class="headerlink" title="3 vue指令"></a>3 vue指令</h2><h3 id="3-1-vue指令-v-bind"><a href="#3-1-vue指令-v-bind" class="headerlink" title="3.1 vue指令-v-bind"></a>3.1 vue指令-v-bind</h3><p>目标：给标签属性设置Vue变量的值</p>
<ul>
<li>v-bind语法和简写<ul>
<li>语法：v-bind:属性名=”vue变量”</li>
<li>简写：:属性名=”vue变量”</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;a v-bind:href=&quot;url&quot;&gt;百度&lt;/a&gt;</span><br><span class="line">&lt;img:src=&quot;imgSrc&quot;&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-2-Vue指令-v-on"><a href="#3-2-Vue指令-v-on" class="headerlink" title="3.2 Vue指令-v-on"></a>3.2 Vue指令-v-on</h3><p>目标：给标签绑定事件</p>
<ul>
<li>语法<ul>
<li>v-on:事件名=“要执行的少量代码”</li>
<li>v-on:事件名=“methods中的函数名”</li>
<li>v-on:事件名=“methods中的函数名(实参)” </li>
</ul>
</li>
<li>方法在methods选项定义</li>
</ul>
<p>目标：v-on: 可以简写成@</p>
<ul>
<li>语法:<ul>
<li>@事件名=“methods中的函数”</li>
</ul>
</li>
</ul>
<h3 id="3-3-Vue指令-v-on事件对象"><a href="#3-3-Vue指令-v-on事件对象" class="headerlink" title="3.3 Vue指令-v-on事件对象"></a>3.3 Vue指令-v-on事件对象</h3><p>目标：Vue事件处理函数中, 拿到事件对象</p>
<ul>
<li><p>语法：</p>
<ul>
<li><p>无传参，通过形参直接接收</p>
</li>
<li><p>传参，通过$event代指事件对象象传给事件处理函数</p>
</li>
</ul>
</li>
</ul>
<h3 id="3-4-Vue指令-v-on修饰符"><a href="#3-4-Vue指令-v-on修饰符" class="headerlink" title="3.4 Vue指令-v-on修饰符"></a>3.4 Vue指令-v-on修饰符</h3><p>目标：在事件后面.修饰符名 - 给事件带来更强大的功能</p>
<ul>
<li>语法 <ul>
<li>@事件名.修饰符=”methods里函数”</li>
</ul>
</li>
<li>修饰符列表 <ul>
<li>.stop - 阻止事件冒泡 </li>
<li>.prevent - 阻止默认行为</li>
<li>.once - 程序运行期间, 只触发一次事件处理函数</li>
</ul>
</li>
</ul>
<h3 id="3-5-Vue指令-v-on按键修饰符"><a href="#3-5-Vue指令-v-on按键修饰符" class="headerlink" title="3.5 Vue指令-v-on按键修饰符"></a>3.5 Vue指令-v-on按键修饰符</h3><p>目标：给键盘事件, 添加修饰符, 增强能力</p>
<ul>
<li><p>语法: </p>
<ul>
<li>@keyup.enter - 监测回车按键 </li>
<li>@keyup.esc - 监测返回按键</li>
</ul>
</li>
<li><p>更多修饰符: <a href="https://cn.vuejs.org/v2/guide/events.html">https://cn.vuejs.org/v2/guide/events.html</a></p>
<h3 id="3-6-课上练习-翻转世界"><a href="#3-6-课上练习-翻转世界" class="headerlink" title="3.6 课上练习-翻转世界"></a>3.6 课上练习-翻转世界</h3><blockquote>
<p>目标: 点击按钮 - 把文字取反显示 - 再点击取反显示(回来了)</p>
<p>提示: 把字符串取反赋予回去</p>
</blockquote>
<p>正确代码:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>逆转世界<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">message</span>: <span class="string">&quot;HELLO, WORLD&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">btn</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">message</span> = <span class="variable language_">this</span>.<span class="property">message</span>.<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结: 记住方法特点, 多做需求, vue是数据变化视图自动更新, 减少操作DOM时间, 提高开发效率</p>
</blockquote>
</li>
</ul>
<h3 id="3-7-Vue指令-v-model"><a href="#3-7-Vue指令-v-model" class="headerlink" title="3.7 Vue指令-v-model"></a>3.7 Vue指令-v-model</h3><p>目标：value属性和Vue数据变量, 双向绑定到一起</p>
<ul>
<li>语法: v-model=”vue数据变量”</li>
<li>双向数据绑定<ul>
<li>数据变化 -&gt; 视图自动同步</li>
<li>视图变化 -&gt; 数据自动同步</li>
</ul>
</li>
<li>演示: 用户名绑定 - vue内部是MVVM设计模式</li>
</ul>
<p>注意：</p>
<p>下拉菜单v-model写在哪里?  </p>
<ul>
<li>在select, value在option上 </li>
</ul>
<p>v-model用在复选框时, 需要注意什么?</p>
<ul>
<li><p>v-model的vue变量是 </p>
<ul>
<li><p>非数组 – 关联的是checked属性 </p>
</li>
<li><p>数组 – 关联的是value属性 </p>
</li>
</ul>
</li>
</ul>
<p>vue变量初始值会不会影响表单的默认状态? </p>
<ul>
<li>会影响, 因为双向数据绑定-互相影响</li>
</ul>
<blockquote>
<p>总结: 本阶段v-model只能用在表单元素上, 以后学组件后讲v-model高级用法</p>
</blockquote>
<h3 id="3-8-vue指令-v-model修饰符"><a href="#3-8-vue指令-v-model修饰符" class="headerlink" title="3.8 vue指令 v-model修饰符"></a>3.8 vue指令 v-model修饰符</h3><p>目标：让v-model拥有更强大的功能</p>
<ul>
<li>语法: v-model.修饰符=”Vue数据变量” <ul>
<li>.number 以parseFloat转成数字类型 ,转成数值类型赋予给Vue数据变量</li>
<li>.trim 去除左右两边空格后把值赋予给Vue数据变量</li>
<li>.lazy 在change时触发而非inupt时, 等表单失去焦点, 才把值赋予给Vue数据变量</li>
</ul>
</li>
</ul>
<h3 id="3-9-Vue指令-v-text和v-html"><a href="#3-9-Vue指令-v-text和v-html" class="headerlink" title="3.9 Vue指令-v-text和v-html"></a>3.9 Vue指令-v-text和v-html</h3><p>目标：更新DOM对象的innerText/innerHTML</p>
<ul>
<li>语法: <ul>
<li>v-text=”Vue数据变量”  </li>
<li>v-html=”Vue数据变量” </li>
</ul>
</li>
<li>注意: 会覆盖插值表达式</li>
</ul>
<p>v-text和v-html有什么作用? </p>
<p>​    都可以设置标签显示的内容 </p>
<p>区别是什么? </p>
<p>​    v-text把值当成普通字符串显示 </p>
<p>​    v-html把值当成标签进行解析显示</p>
<h3 id="3-10-Vue指令-v-show和v-if"><a href="#3-10-Vue指令-v-show和v-if" class="headerlink" title="3.10 Vue指令-v-show和v-if"></a>3.10 Vue指令-v-show和v-if</h3><p>目标：控制标签的隐藏或出现</p>
<ul>
<li>语法: <ul>
<li>v-show=”Vue变量”  </li>
<li>v-if=”Vue变量”  </li>
</ul>
</li>
<li>原理 <ul>
<li>v-show 用的display:none隐藏 (频繁切换使用) </li>
<li>v-if 直接从DOM树上移除 </li>
</ul>
</li>
<li>高级 <ul>
<li>v-else的使用</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;p v-if=&quot;age&gt;=18&quot;&gt;成年了&lt;/p&gt;</span><br><span class="line">	&lt;p v-else&gt;未成年&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    explore default&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            age:&quot;2&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-11-Vue指令-v-for"><a href="#3-11-Vue指令-v-for" class="headerlink" title="3.11 Vue指令-v-for"></a>3.11 Vue指令-v-for</h3><p>目标：列表渲染, 所在标签结构, 按照数据数量, 循环生成</p>
<ul>
<li>语法: <ul>
<li>v-for=”(值变量, 索引变量) in 目标结构” </li>
<li>v-for=”值变量 in 目标结构” </li>
</ul>
</li>
<li>目标结构: <ul>
<li>可以遍历数组 / 对象 / 数字 / 字符串 (可遍历结构) </li>
</ul>
</li>
<li>注意: <ul>
<li>v-for的临时变量名不能用到v-for范围外</li>
</ul>
</li>
</ul>
<h1 id="四、Vue基础"><a href="#四、Vue基础" class="headerlink" title="四、Vue基础"></a>四、Vue基础</h1><h2 id="1-v-for更新监测"><a href="#1-v-for更新监测" class="headerlink" title="1 v-for更新监测"></a>1 v-for更新监测</h2><ul>
<li>目标：目标结构变化, 触发v-for的更新</li>
<li>情况1: 数组翻转</li>
<li>情况2: 数组截取 </li>
<li>情况3: 更新值 </li>
<li>口诀: <ul>
<li>数组变更方法, 就会导致v-for更新, 页面更新 </li>
<li>数组非变更方法, 返回新数组, 就不会导致v-for更新, 可采用覆盖数组或this.$set()</li>
</ul>
</li>
</ul>
<p>会改变原数组的方法：push、pop、shift、unshift、splice、sort、reverse</p>
<p>不会改变原数组的方法：filter、contanct、slice</p>
<h2 id="2-v-for就地更新"><a href="#2-v-for就地更新" class="headerlink" title="2 v-for就地更新"></a>2 v-for就地更新</h2><p>循环出新的虚拟DOM结构, 和旧的虚拟DOM 结构对比, 尝试复用标签就地更新内容</p>
<h2 id="3-真实DOM虚拟DOM"><a href="#3-真实DOM虚拟DOM" class="headerlink" title="3 真实DOM虚拟DOM"></a>3 真实DOM虚拟DOM</h2><p>真实DOM</p>
<p>目标：在document对象上, 渲染到浏览器上显示的标签</p>
<p>虚拟DOM</p>
<p>目标：本质是保存节点信息, 属性和内容的一个JS对象</p>
<h2 id="4-diff算法"><a href="#4-diff算法" class="headerlink" title="4 diff算法"></a>4 diff算法</h2><h3 id="情况1-根元素变了-删除重建"><a href="#情况1-根元素变了-删除重建" class="headerlink" title="情况1: 根元素变了, 删除重建"></a>情况1: 根元素变了, 删除重建</h3><h3 id="情况2-根元素没变-属性改变-元素复用-更新属性"><a href="#情况2-根元素没变-属性改变-元素复用-更新属性" class="headerlink" title="情况2: 根元素没变, 属性改变, 元素复用, 更新属性"></a>情况2: 根元素没变, 属性改变, 元素复用, 更新属性</h3><ol>
<li><p>diff算法如何比较新旧虚拟DOM? </p>
<ul>
<li>同级比较 </li>
</ul>
</li>
<li><p>根元素变化? </p>
<ul>
<li>删除重新建立整个DOM树 </li>
</ul>
</li>
<li>根元素未变, 属性改变? <ul>
<li>DOM复用, 只更新属性</li>
</ul>
</li>
</ol>
<h2 id="5-diff算法-key"><a href="#5-diff算法-key" class="headerlink" title="5 diff算法-key"></a>5 diff算法-key</h2><h3 id="情况3-根元素没变-子元素没变-元素内容改变"><a href="#情况3-根元素没变-子元素没变-元素内容改变" class="headerlink" title="情况3: 根元素没变, 子元素没变, 元素内容改变"></a>情况3: 根元素没变, 子元素没变, 元素内容改变</h3><h4 id="无key-就地更新"><a href="#无key-就地更新" class="headerlink" title="无key - 就地更新"></a>无key - 就地更新</h4><p>v-for不会移动DOM, 而是尝试复用, 就地更新，如果需要v-for移动DOM, 你需要用特殊 attribute <code>key</code> 来提供一个排序提示</p>
<h4 id="有key-值为索引"><a href="#有key-值为索引" class="headerlink" title="有key - 值为索引"></a>有key - 值为索引</h4><ul>
<li>还是就地更新</li>
</ul>
<p>因为新旧虚拟DOM对比, key存在就复用此标签更新内容, 如果不存在就直接建立一个新的</p>
<h4 id="有key-值为id"><a href="#有key-值为id" class="headerlink" title="有key - 值为id"></a>有key - 值为id</h4><p>key的值只能是唯一不重复的, 字符串或数值</p>
<p>v-for不会移动DOM, 而是尝试复用, 就地更新，如果需要v-for移动DOM, 你需要用特殊 attribute <code>key</code> 来提供一个排序提示</p>
<p>新DOM里数据的key存在, 去旧的虚拟DOM结构里找到key标记的标签, 复用标签</p>
<p>新DOM里数据的key存在, 去旧的虚拟DOM结构里没有找到key标签的标签, 创建</p>
<p>旧DOM结构的key, 在新的DOM结构里没有了, 则移除key所在的标签</p>
<h2 id="6-阶段小结"><a href="#6-阶段小结" class="headerlink" title="6 阶段小结"></a>6 阶段小结</h2><p>v-for什么时候会更新页面呢?</p>
<ul>
<li>数组采用更新方法, 才导致v-for更新页面</li>
</ul>
<p>vue是如何提高更新性能的?</p>
<ul>
<li>采用虚拟DOM+diff算法提高更新性能</li>
</ul>
<p>虚拟DOM是什么?</p>
<ul>
<li>本质是保存dom关键信息的JS对象</li>
</ul>
<p>diff算法如何比较新旧虚拟DOM?</p>
<ul>
<li>根元素改变 – 删除当前DOM树重新建</li>
<li>根元素未变, 属性改变 – 更新属性</li>
<li>根元素未变, 子元素/内容改变</li>
<li>无key – 就地更新 / 有key – 按key比较</li>
</ul>
<h2 id="7-动态class"><a href="#7-动态class" class="headerlink" title="7 动态class"></a>7 动态class</h2><blockquote>
<p>目标: 用v-bind给标签class设置动态的值</p>
</blockquote>
<ul>
<li>语法:<ul>
<li>:class=”{类名: 布尔值}”</li>
</ul>
</li>
</ul>
<h2 id="8-动态style"><a href="#8-动态style" class="headerlink" title="8 动态style"></a>8 动态style</h2><blockquote>
<p>目标: 给标签动态设置style的值</p>
</blockquote>
<ul>
<li>语法<ul>
<li>:style=”{css属性: 值}”</li>
</ul>
</li>
</ul>
<h1 id="五、Vue过滤器"><a href="#五、Vue过滤器" class="headerlink" title="五、Vue过滤器"></a>五、Vue过滤器</h1><h2 id="1-定义使用"><a href="#1-定义使用" class="headerlink" title="1 定义使用"></a>1 定义使用</h2><blockquote>
<p>目的: 转换格式, 过滤器就是一个<strong>函数</strong>, 传入值返回处理后的值</p>
</blockquote>
<p>过滤器只能用在, ==插值表达式和v-bind表达式==</p>
<p>Vue中的过滤器场景</p>
<ul>
<li>字母转大写, 输入”hello”, 输出”HELLO”</li>
<li>字符串翻转, “输入hello, world”, 输出”dlrow ,olleh”</li>
</ul>
<p>语法: </p>
<ul>
<li><p>Vue.filter(“过滤器名”, (值) =&gt; {return “返回处理后的值”})</p>
</li>
<li><p>filters: {过滤器名字: (值) =&gt; {return “返回处理后的值”}</p>
</li>
</ul>
<p>例子:</p>
<ul>
<li>全局定义字母都大写的过滤器</li>
<li>局部定义字符串翻转的过滤器</li>
</ul>
<blockquote>
<p>总结: 把值转成另一种形式, 使用过滤器, Vue3用函数替代了过滤器.</p>
<p>全局注册最好在main.js中注册, 一处注册到处使用</p>
</blockquote>
<h2 id="2-传参和多过滤器"><a href="#2-传参和多过滤器" class="headerlink" title="2 传参和多过滤器"></a>2 传参和多过滤器</h2><blockquote>
<p>目标: 可同时使用多个过滤器, 或者给过滤器传参</p>
</blockquote>
<ul>
<li>语法:<ul>
<li>过滤器传参:   vue变量 | 过滤器(实参) </li>
<li>多个过滤器:   vue变量 | 过滤器1 | 过滤器2</li>
</ul>
</li>
</ul>
<h2 id="3-时间格式化"><a href="#3-时间格式化" class="headerlink" title="3 时间格式化"></a>3 时间格式化</h2><ol>
<li><p>下载moment处理日期的第三方工具模块</p>
<p>moment官网文档: <a href="http://momentjs.cn/docs/#/displaying/">http://momentjs.cn/docs/#/displaying/</a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yarn add moment</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义过滤器, 把时间用moment模块格式化, 返回我们想要的格式</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 目标: 处理时间</span></span><br><span class="line"><span class="comment">// 1. 下载moment模块</span></span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">&#x27;moment&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 定义过滤器, 编写内部代码</span></span><br><span class="line"><span class="attr">filters</span>: &#123; </span><br><span class="line">    formatDate (val)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">moment</span>(val).<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- <span class="number">3.</span> 使用过滤器 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; obj.time | formatDate &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="六、Vue计算属性"><a href="#六、Vue计算属性" class="headerlink" title="六、Vue计算属性"></a>六、Vue计算属性</h1><h2 id="1-computed"><a href="#1-computed" class="headerlink" title="1 computed"></a>1 computed</h2><blockquote>
<p>目标: 一个数据, 依赖另外一些数据计算而来的结果</p>
</blockquote>
<p>语法:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="string">&quot;计算属性名&quot;</span> () &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;值&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-缓存"><a href="#2-缓存" class="headerlink" title="2 缓存"></a>2 缓存</h2><p>计算属性优势:<br>  带缓存<br>  计算属性对应函数执行后, 会把return值缓存起来<br>  依赖项不变, 多次调用都是从缓存取值<br>  依赖项值-变化, 函数会”自动”重新执行-并缓存新的值</p>
<h2 id="3-完整写法"><a href="#3-完整写法" class="headerlink" title="3 完整写法"></a>3 完整写法</h2><blockquote>
<p>目标: 计算属性也是变量, 如果想要直接赋值, 需要使用完整写法</p>
</blockquote>
<p>语法:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="string">&quot;属性名&quot;</span>: &#123;</span><br><span class="line">        <span class="title function_">set</span>(<span class="params">值</span>)&#123;</span><br><span class="line">            </span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;值&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="七、Vue侦听器"><a href="#七、Vue侦听器" class="headerlink" title="七、Vue侦听器"></a>七、Vue侦听器</h1><h2 id="1-watch"><a href="#1-watch" class="headerlink" title="1 watch"></a>1 watch</h2><blockquote>
<p>目标: 可以侦听data/computed属性值改变</p>
</blockquote>
<p>语法:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="string">&quot;被侦听的属性名&quot;</span> (newVal, oldVal)&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-深度侦听和立即执行"><a href="#2-深度侦听和立即执行" class="headerlink" title="2 深度侦听和立即执行"></a>2 深度侦听和立即执行</h2><blockquote>
<p>目标: 侦听复杂类型, 或者立即执行侦听函数</p>
</blockquote>
<p>语法:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">    <span class="string">&quot;要侦听的属性名&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="comment">// 立即执行</span></span><br><span class="line">        <span class="attr">deep</span>: <span class="literal">true</span>, <span class="comment">// 深度侦听复杂类型内变化</span></span><br><span class="line">        handler (newVal, oldVal) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="八、Vue组件"><a href="#八、Vue组件" class="headerlink" title="八、Vue组件"></a>八、Vue组件</h1><h2 id="1-为什么用组件"><a href="#1-为什么用组件" class="headerlink" title="1 为什么用组件"></a>1 为什么用组件</h2><p>代码非常的冗余和重复吧? 解决方案呢? 就是采用我们的组件化开发的方式, 往下看</p>
<h2 id="2-概念"><a href="#2-概念" class="headerlink" title="2 概念"></a>2 概念</h2><blockquote>
<p>组件是可复用的 Vue 实例, 封装标签, 样式和JS代码</p>
</blockquote>
<p><strong>组件化</strong> ：封装的思想，把页面上 <code>可重用的部分</code> 封装为 <code>组件</code>，从而方便项目的开发和维护</p>
<p><strong>一个页面， 可以拆分成一个个组件，一个组件就是一个整体, 每个组件可以有自己独立的结构样式和 行为(html, css和js)</strong></p>
<h2 id="3-基础使用"><a href="#3-基础使用" class="headerlink" title="3 基础使用"></a>3 基础使用</h2><blockquote>
<p>目标: 每个组件都是一个独立的个体, 代码里体现为一个独立的.vue文件</p>
</blockquote>
<p>口诀: 哪部分标签复用, 就把哪部分封装到组件内</p>
<p><strong>(重要): 组件内template只能有一个根标签</strong></p>
<p><strong>(重要): 组件内data必须是一个函数, 独立作用域</strong></p>
<p>步骤:</p>
<ol>
<li><p>创建组件 components/Pannel.vue</p>
</li>
<li><p>注册组件: 创建后需要注册后再使用</p>
</li>
</ol>
<h3 id="3-1-全局-注册使用"><a href="#3-1-全局-注册使用" class="headerlink" title="3.1 全局 - 注册使用"></a>3.1 全局 - 注册使用</h3><p>全局入口在main.js, 在new Vue之上注册</p>
<p>语法:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> 组件对象 <span class="keyword">from</span> <span class="string">&#x27;vue文件路径&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&quot;组件名&quot;</span>, 组件对象)</span><br></pre></td></tr></table></figure>
<p>main.js - 立即演示</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 目标: 全局注册 (一处定义到处使用)</span></span><br><span class="line"><span class="comment">// 1. 创建组件 - 文件名.vue</span></span><br><span class="line"><span class="comment">// 2. 引入组件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Pannel</span> <span class="keyword">from</span> <span class="string">&#x27;./components/Pannel&#x27;</span></span><br><span class="line"><span class="comment">// 3. 全局 - 注册组件</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  语法: </span></span><br><span class="line"><span class="comment">  Vue.component(&quot;组件名&quot;, 组件对象)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&quot;PannelG&quot;</span>, <span class="title class_">Pannel</span>)</span><br></pre></td></tr></table></figure>
<p>全局注册PannelG组件名后, 就可以当做标签在任意Vue文件中template里用</p>
<p>单双标签都可以或者小写加-形式, 运行后, 会把这个自定义标签当做组件解析, 使用==组件里封装的标签替换到这个位置==</p>
<h3 id="3-2-局部-注册使用"><a href="#3-2-局部-注册使用" class="headerlink" title="3.2 局部 - 注册使用"></a>3.2 局部 - 注册使用</h3><p>语法:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> 组件对象 <span class="keyword">from</span> <span class="string">&#x27;vue文件路径&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        <span class="string">&quot;组件名&quot;</span>: 组件对象</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>任意vue文件中中引入, 注册, 使用</p>
<p><strong>组件使用总结:</strong></p>
<ol>
<li>(创建)封装html+css+vue到独立的.vue文件中</li>
<li>(引入注册)组件文件 =&gt; 得到组件配置对象</li>
<li>(使用)当前页面当做标签使用</li>
</ol>
<h3 id="3-3-scoped作用"><a href="#3-3-scoped作用" class="headerlink" title="3.3 scoped作用"></a>3.3 scoped作用</h3><blockquote>
<p>目的: 解决多个组件样式名相同, 冲突问题</p>
</blockquote>
<p>需求: div标签名选择器, 设置背景色</p>
<p>问题: 发现组件里的div和外面的div都生效了</p>
<p>解决: 给Pannel.vue组件里style标签上加scoped属性即可</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br></pre></td></tr></table></figure>
<p>在style上加入scoped属性, 就会在此组件的标签上加上一个随机生成的data-v开头的属性</p>
<p>而且必须是当前组件的元素, 才会有这个自定义属性, 才会被这个样式作用到</p>
<blockquote>
<p>总结: style上加scoped, 组件内的样式只在当前vue组件生效</p>
</blockquote>
<h1 id="九、组件通信"><a href="#九、组件通信" class="headerlink" title="九、组件通信"></a>九、组件通信</h1><p>因为每个组件的变量和值都是独立的</p>
<p>组件通信先暂时关注父传子, 子传父</p>
<p>父: 使用其他组件的vue文件</p>
<p>子: 被引入的组件(嵌入)</p>
<h2 id="1-父向子-props"><a href="#1-父向子-props" class="headerlink" title="1 父向子-props"></a>1 父向子-props</h2><ul>
<li>子组件用props接收父组件传过来的值</li>
<li>父组件内引入并注册子组件</li>
<li>父组件通过子组件中props中的值，在子组件标签内通过v-for传给子组件：如果是变量则需要在前面加冒号</li>
</ul>
<blockquote>
<p>单向数据流</p>
</blockquote>
<p>在vue中需要遵循单向数据流原则</p>
<ol>
<li>父组件的数据发生了改变，子组件会自动跟着变</li>
<li>子组件不能直接修改父组件传递过来的props  props是只读的</li>
</ol>
<p>父组件传给子组件的是一个对象，子组件修改对象的属性，是不会报错的，对象是引用类型, 互相更新</p>
<blockquote>
<p>总结: props的值不能重新赋值, 对象引用关系属性值改变, 互相影响</p>
</blockquote>
<h2 id="2-单向数据流"><a href="#2-单向数据流" class="headerlink" title="2 单向数据流"></a>2 单向数据流</h2><blockquote>
<p>目标: props变量本身是只读不能重新赋值</p>
</blockquote>
<p>目标：从<strong>父到子</strong>的数据流向,叫<strong>单向数据流</strong></p>
<p>原因: 子组件修改, 不通知父级, 造成数据不一致性</p>
<p>如果第一个MyProduct.vue内自己修改商品价格为5.5, 但是App.vue里原来还记着18.8 - 数据 不一致了</p>
<p>所以: Vue规定<strong>props</strong>里的变量, 本身是只读的</p>
<blockquote>
<p>总结: 所以props变量本身是不能重新赋值的</p>
</blockquote>
<p>问题:  那我怎么才能修改子组件接收到的值呢? - 其实要影响父亲, 然后数据响应式来影响儿子们</p>
<h2 id="3-子向父"><a href="#3-子向父" class="headerlink" title="3 子向父"></a>3 子向父</h2><p>语法:</p>
<ul>
<li>父组件: @自定义事件名=”父组件methods里的函数”</li>
<li>子组件: this.$emit(“自定义事件名”, 传值) - 执行父methods里函数代码</li>
</ul>
<blockquote>
<p>总结: 父自定义事件和方法, 等待子组件触发事件给方法传值</p>
</blockquote>
<h2 id="4-阶段小结"><a href="#4-阶段小结" class="headerlink" title="4 阶段小结"></a>4 阶段小结</h2><blockquote>
<p>目标: 总结父子组件关系-通信技术口诀</p>
</blockquote>
<p>组件是什么?</p>
<ul>
<li>是一个vue实例, 封装标签, 样式和JS代码</li>
</ul>
<p>组件好处?</p>
<ul>
<li>便于复用, 易于扩展</li>
</ul>
<p>组件通信哪几种, 具体如何实现?</p>
<ul>
<li><p>父 -&gt; 子</p>
</li>
<li><p>父 &lt;- 子</p>
</li>
</ul>
<h2 id="5-vue组件通信-EventBus"><a href="#5-vue组件通信-EventBus" class="headerlink" title="5 vue组件通信-EventBus"></a>5 vue组件通信-EventBus</h2><blockquote>
<p>目标: 常用于跨组件通信时使用</p>
</blockquote>
<p>两个组件的关系非常的复杂，通过父子组件通讯是非常麻烦的。这时候可以使用通用的组件通讯方案：事件总线（event-bus)</p>
<h1 id="十、Vue生命周期"><a href="#十、Vue生命周期" class="headerlink" title="十、Vue生命周期"></a>十、Vue生命周期</h1><h2 id="1-人的生命周期"><a href="#1-人的生命周期" class="headerlink" title="1 人的生命周期"></a>1 人的生命周期</h2><p>出生=&gt;童年=&gt;青少年=&gt;成年=&gt;中年=&gt;老年=&gt;死亡</p>
<p>Vue_生命周期</p>
<p>一组件从创建到销毁的整个过程就是生命周期</p>
<h2 id="2-钩子函数"><a href="#2-钩子函数" class="headerlink" title="2 钩子函数"></a>2 钩子函数</h2><blockquote>
<p>目标: <strong>Vue</strong> 框架内置函数，随着组件的生命周期阶段，自动执行</p>
</blockquote>
<p>作用: 特定的时间点，执行特定的操作</p>
<p>场景: 组件创建完毕后，可以在created 生命周期函数中发起Ajax 请求，从而初始化 data 数据</p>
<p>分类: 4大阶段8个方法</p>
<p><img src="lifecycle.png" style="zoom: 50%;" /></p>
<ul>
<li>初始化</li>
<li>挂载</li>
<li>更新</li>
<li>销毁</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>阶段</th>
<th>方法名</th>
<th>方法名</th>
</tr>
</thead>
<tbody>
<tr>
<td>初始化</td>
<td>beforeCreate</td>
<td>created</td>
</tr>
<tr>
<td>挂载</td>
<td>beforeMount</td>
<td>mounted</td>
</tr>
<tr>
<td>更新</td>
<td>beforeUpdate</td>
<td>updated</td>
</tr>
<tr>
<td>销毁</td>
<td>beforeDestroy</td>
<td>destroyed</td>
</tr>
</tbody>
</table>
</div>
<h2 id="3-初始化阶段"><a href="#3-初始化阶段" class="headerlink" title="3 初始化阶段"></a>3 初始化阶段</h2><blockquote>
<p>目标: 掌握初始化阶段2个钩子函数作用和执行时机</p>
</blockquote>
<p>含义讲解:</p>
<ol>
<li><p>new Vue() – Vue实例化(组件也是一个小的Vue实例)</p>
</li>
<li><p>Init Events &amp; Lifecycle – 初始化事件和生命周期函数</p>
</li>
<li><p>==beforeCreate== – 生命周期钩子函数被执行，<strong>==此时拿不到data中的数据==</strong></p>
</li>
<li><p>Init injections&amp;reactivity – Vue内部添加data和methods等</p>
</li>
<li><p>==created== – 生命周期钩子函数被执行, 实例创建，==<strong>此时可以拿到data中的数据，此时还不能获取真实DOM</strong>==</p>
</li>
<li><p>接下来是编译模板阶段 –开始分析</p>
</li>
<li><p>Has el option? – 是否有el选项 – 检查要挂到哪里</p>
</li>
</ol>
<p>​        没有. 调用$mount()方法</p>
<p>​        有, 继续检查template选项</p>
<h2 id="4-挂载阶段"><a href="#4-挂载阶段" class="headerlink" title="4 挂载阶段"></a>4 挂载阶段</h2><blockquote>
<p>目标: 掌握挂载阶段2个钩子函数作用和执行时机</p>
</blockquote>
<p>含义讲解:</p>
<ol>
<li>template选项检查</li>
</ol>
<p>​        有 - 编译template返回render渲染函数</p>
<p>​        无 – 编译el选项对应标签作为template(要渲染的模板)</p>
<ol>
<li><p>虚拟DOM挂载成真实DOM之前</p>
</li>
<li><p>beforeMount – 生命周期钩子函数被执行</p>
</li>
<li><p>==<strong>Created – 把虚拟DOM和渲染的数据一并挂到真实DOM上</strong>==</p>
</li>
<li><p>真实DOM挂载完毕</p>
</li>
<li><p>mounted – 生命周期钩子函数被执行</p>
</li>
</ol>
<h2 id="5-更新阶段"><a href="#5-更新阶段" class="headerlink" title="5 更新阶段"></a>5 更新阶段</h2><blockquote>
<p>目标: 掌握更新阶段2个钩子函数作用和执行时机</p>
</blockquote>
<p>含义讲解:</p>
<ol>
<li><p>当data里数据改变, 更新DOM之前</p>
</li>
<li><p>beforeUpdate – 生命周期钩子函数被执行</p>
</li>
<li><p>Virtual DOM…… – 虚拟DOM重新渲染, 打补丁到真实DOM</p>
</li>
<li><p>==<strong>updated – 生命周期钩子函数被执行</strong>==</p>
</li>
<li><p>当有data数据改变 – 重复这个循环</p>
</li>
</ol>
<h2 id="6-销毁阶段"><a href="#6-销毁阶段" class="headerlink" title="6 销毁阶段"></a>6 销毁阶段</h2><blockquote>
<p>目标: 掌握销毁阶段2个钩子函数作用和执行时机</p>
</blockquote>
<p>含义讲解:</p>
<ol>
<li><p>当$destroy()被调用 – 比如组件DOM被移除(例v-if)</p>
</li>
<li><p>beforeDestroy – 生命周期钩子函数被执行</p>
</li>
<li><p>拆卸数据监视器、子组件和事件侦听器</p>
</li>
<li><p>实例销毁后, 最后触发一个钩子函数</p>
</li>
<li><p>==<strong>destroyed – 生命周期钩子函数被执行</strong>==</p>
</li>
</ol>
<h1 id="十一、axios"><a href="#十一、axios" class="headerlink" title="十一、axios"></a>十一、axios</h1><h2 id="1-axios基本使用"><a href="#1-axios基本使用" class="headerlink" title="1 axios基本使用"></a>1 axios基本使用</h2><p>特点</p>
<ul>
<li>支持客户端发送Ajax请求</li>
<li>支持服务端Node.js发送请求</li>
<li>支持Promise相关用法</li>
<li>==<strong>支持请求和响应的拦截器功能</strong>==</li>
<li>自动转换JSON数据</li>
<li>axios 底层还是原生js实现, 内部通过Promise封装的</li>
</ul>
<p>axios的基本使用</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;请求方式&#x27;</span>, <span class="comment">// get post</span></span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;请求地址&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;    <span class="comment">// 拼接到请求体的参数,  post请求的参数</span></span><br><span class="line">    <span class="attr">xxx</span>: xxx,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">params</span>: &#123;  <span class="comment">// 拼接到请求行的参数, get请求的参数</span></span><br><span class="line">   	<span class="attr">xxx</span>: xxx </span><br><span class="line">  &#125;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>) <span class="comment">// 后台返回的结果</span></span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(err) <span class="comment">// 后台报错返回</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="2-axios基本使用-获取数据"><a href="#2-axios基本使用-获取数据" class="headerlink" title="2 axios基本使用-获取数据"></a>2 axios基本使用-获取数据</h2><blockquote>
<p>目标: 调用文档最后_获取所有图书信息接口</p>
</blockquote>
<p>功能: 点击调用后台接口, 拿到所有数据 – 打印到控制台</p>
<p>接口: 参考预习资料.md – 接口文档</p>
<p>引入: 下载axios, 引入后才能使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;1. 获取所有图书信息&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;getAllFn&quot;&gt;点击-查看控制台&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 目标1: 获取所有图书信息</span><br><span class="line">// 1. 下载axios</span><br><span class="line">// 2. 引入axios</span><br><span class="line">// 3. 发起axios请求</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    getAllFn() &#123;</span><br><span class="line">      axios(&#123;</span><br><span class="line">        url: &quot;http://123.57.109.30:3006/api/getbooks&quot;,</span><br><span class="line">        method: &quot;GET&quot;, // 默认就是GET方式请求, 可以省略不写</span><br><span class="line">      &#125;).then((res) =&gt; &#123;</span><br><span class="line">        console.log(res);</span><br><span class="line">      &#125;);</span><br><span class="line">      // axios()-原地得到Promise对象</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="3-axios基本使用-传参"><a href="#3-axios基本使用-传参" class="headerlink" title="3 axios基本使用-传参"></a>3 axios基本使用-传参</h2><blockquote>
<p>目标: 调用接口-获取某本书籍信息</p>
</blockquote>
<p>功能: 点击调用后台接口, 查询用户想要的书籍信息 – 打印到控制台</p>
<p>接口: 参考预习资料.md – 接口文档</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;2. 查询某本书籍信息&lt;/p&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; placeholder=&quot;请输入要查询 的书名&quot; v-model=&quot;bName&quot; /&gt;</span><br><span class="line">    &lt;button @click=&quot;findFn&quot;&gt;查询&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      bName: &quot;&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // ...省略了查询所有的代码</span><br><span class="line">    findFn() &#123;</span><br><span class="line">      axios(&#123;</span><br><span class="line">        url: &quot;/api/getbooks&quot;,</span><br><span class="line">        method: &quot;GET&quot;,</span><br><span class="line">        params: &#123; // 都会axios最终拼接到url?后面</span><br><span class="line">            bookname: this.bName</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).then(res =&gt; &#123;</span><br><span class="line">          console.log(res);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="4-axios基本使用-发布书籍"><a href="#4-axios基本使用-发布书籍" class="headerlink" title="4 axios基本使用-发布书籍"></a>4 axios基本使用-发布书籍</h2><blockquote>
<p>目标: 完成发布书籍功能</p>
</blockquote>
<p>功能: 点击新增按钮, 把用户输入的书籍信息, 传递给后台 – 把结果打印在控制台</p>
<p>接口: 参考预习资料.md – 接口文档</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;3. 新增图书信息&lt;/p&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; placeholder=&quot;书名&quot; v-model=&quot;bookObj.bookname&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; placeholder=&quot;作者&quot; v-model=&quot;bookObj.author&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; placeholder=&quot;出版社&quot; v-model=&quot;bookObj.publisher&quot;&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;button @click=&quot;sendFn&quot;&gt;发布&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      bName: &quot;&quot;,</span><br><span class="line">      bookObj: &#123; // 参数名提前和后台的参数名对上-发送请求就不用再次对接了</span><br><span class="line">          bookname: &quot;&quot;,</span><br><span class="line">          author: &quot;&quot;,</span><br><span class="line">          publisher: &quot;&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // ...省略了其他代码</span><br><span class="line">    sendFn()&#123;</span><br><span class="line">       axios(&#123;</span><br><span class="line">           url: &quot;/api/addbook&quot;,</span><br><span class="line">           method: &quot;POST&quot;,</span><br><span class="line">           data: &#123;</span><br><span class="line">               appkey: &quot;7250d3eb-18e1-41bc-8bb2-11483665535a&quot;,</span><br><span class="line">               ...this.bookObj</span><br><span class="line">            // 等同于下面</span><br><span class="line">            // bookname: this.bookObj.bookname,</span><br><span class="line">            // author: this.bookObj.author,</span><br><span class="line">            // publisher: this.bookObj.publisher</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;) </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="5-axios基本使用-全局配置"><a href="#5-axios基本使用-全局配置" class="headerlink" title="5 axios基本使用-全局配置"></a>5 axios基本使用-全局配置</h2><blockquote>
<p>目标: 避免前缀基地址, 暴露在逻辑页面里, 统一设置</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&quot;http://123.57.109.30:3006&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 所有请求的url前置可以去掉, 请求时, axios会自动拼接baseURL的地址在前面</span></span><br><span class="line"><span class="title function_">getAllFn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">axios</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&quot;/api/getbooks&quot;</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>, <span class="comment">// 默认就是GET方式请求, 可以省略不写</span></span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// axios()-原地得到Promise对象</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h1 id="十二、-nextTick和-refs知识"><a href="#十二、-nextTick和-refs知识" class="headerlink" title="十二、 $nextTick和$refs知识"></a>十二、 $nextTick和$refs知识</h1><h2 id="1-refs-获取DOM"><a href="#1-refs-获取DOM" class="headerlink" title="1 $refs-获取DOM"></a>1 $refs-获取DOM</h2><blockquote>
<p>目标: 利用 ref 和 $refs 可以用于获取 dom 元素</p>
</blockquote>
<p>components/More.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;p&gt;1. 获取原生DOM元素&lt;/p&gt;</span><br><span class="line">      &lt;h1 id=&quot;h&quot; ref=&quot;myH&quot;&gt;我是一个孤独可怜又能吃的h1&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 目标: 获取组件对象</span><br><span class="line">// 1. 创建组件/引入组件/注册组件/使用组件</span><br><span class="line">// 2. 组件起别名ref</span><br><span class="line">// 3. 恰当时机, 获取组件对象</span><br><span class="line">export default &#123;</span><br><span class="line">    mounted()&#123;</span><br><span class="line">        console.log(document.getElementById(&quot;h&quot;)); // h1</span><br><span class="line">        console.log(this.$refs.myH); // h1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结: 通过id / ref, 都可以获取原生DOM标签</p>
</blockquote>
<h2 id="2-refs-获取组件对象"><a href="#2-refs-获取组件对象" class="headerlink" title="2 $refs-获取组件对象"></a>2 $refs-获取组件对象</h2><blockquote>
<p>目标: 获取组件对象, 调用组件里方法</p>
</blockquote>
<p>components/Child/Demo.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;p&gt;我是Demo组件&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        fn()&#123;</span><br><span class="line">            console.log(&quot;demo组件内的方法被调用了&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>More.vue - 获取组件对象 - 调用组件方法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;p&gt;1. 获取原生DOM元素&lt;/p&gt;</span><br><span class="line">      &lt;h1 id=&quot;h&quot; ref=&quot;myH&quot;&gt;我是一个孤独可怜又能吃的h1&lt;/h1&gt;</span><br><span class="line">      &lt;p&gt;2. 获取组件对象 - 可调用组件内一切&lt;/p&gt;</span><br><span class="line">      &lt;Demo ref=&quot;de&quot;&gt;&lt;/Demo&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 目标: 获取组件对象</span><br><span class="line">// 1. 创建组件/引入组件/注册组件/使用组件</span><br><span class="line">// 2. 组件起别名ref</span><br><span class="line">// 3. 恰当时机, 获取组件对象</span><br><span class="line">import Demo from &#x27;./Child/Demo&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    mounted()&#123;</span><br><span class="line">        console.log(document.getElementById(&quot;h&quot;)); // h1</span><br><span class="line">        console.log(this.$refs.myH); // h1</span><br><span class="line"></span><br><span class="line">        let demoObj = this.$refs.de;</span><br><span class="line">        demoObj.fn()</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">        Demo</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="3-nextTick使用"><a href="#3-nextTick使用" class="headerlink" title="3 $nextTick使用"></a>3 $nextTick使用</h2><blockquote>
<h4 id="Vue更新DOM-异步的"><a href="#Vue更新DOM-异步的" class="headerlink" title="Vue更新DOM-异步的"></a>Vue更新DOM-异步的</h4><p>目标: 点击count++, 马上通过”原生DOM”拿标签内容, 无法拿到新值</p>
</blockquote>
<p>components/Move.vue - 继续新增第三套代码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;p&gt;1. 获取原生DOM元素&lt;/p&gt;</span><br><span class="line">      &lt;h1 id=&quot;h&quot; ref=&quot;myH&quot;&gt;我是一个孤独可怜又能吃的h1&lt;/h1&gt;</span><br><span class="line">      &lt;p&gt;2. 获取组件对象 - 可调用组件内一切&lt;/p&gt;</span><br><span class="line">      &lt;Demo ref=&quot;de&quot;&gt;&lt;/Demo&gt;</span><br><span class="line">      &lt;p&gt;3. vue更新DOM是异步的&lt;/p&gt;</span><br><span class="line">      &lt;p ref=&quot;myP&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;button @click=&quot;btn&quot;&gt;点击count+1, 马上提取p标签内容&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 目标: 获取组件对象</span><br><span class="line">// 1. 创建组件/引入组件/注册组件/使用组件</span><br><span class="line">// 2. 组件起别名ref</span><br><span class="line">// 3. 恰当时机, 获取组件对象</span><br><span class="line">import Demo from &#x27;./Child/Demo&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    mounted()&#123;</span><br><span class="line">        console.log(document.getElementById(&quot;h&quot;)); // h1</span><br><span class="line">        console.log(this.$refs.myH); // h1</span><br><span class="line"></span><br><span class="line">        let demoObj = this.$refs.de;</span><br><span class="line">        demoObj.fn()</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">        Demo</span><br><span class="line">    &#125;,</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            count: 0</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        btn()&#123;</span><br><span class="line">            this.count++; // vue监测数据更新, 开启一个DOM更新队列(异步任务)</span><br><span class="line">            console.log(this.$refs.myP.innerHTML); // 0</span><br><span class="line"></span><br><span class="line">            // 原因: Vue更新DOM异步</span><br><span class="line">            // 解决: this.$nextTick()</span><br><span class="line">            // 过程: DOM更新完会挨个触发$nextTick里的函数体</span><br><span class="line">             this.$nextTick(() =&gt; &#123;</span><br><span class="line">                console.log(this.$refs.myP.innerHTML); // 1</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结: 因为DOM更新是异步的</p>
</blockquote>
<h2 id="4-nextTick使用场景"><a href="#4-nextTick使用场景" class="headerlink" title="4 $nextTick使用场景"></a>4 $nextTick使用场景</h2><blockquote>
<p>目标: 点击搜索按钮, 弹出聚焦的输入框, 按钮消失</p>
</blockquote>
<p>components/Tick.vue</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;input ref=&quot;myInp&quot; type=&quot;text&quot; placeholder=&quot;这是一个输入框&quot; v-if=&quot;isShow&quot;&gt;</span><br><span class="line">      &lt;button v-else @click=&quot;btn&quot;&gt;点击我进行搜索&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 目标: 点按钮(消失) - 输入框出现并聚焦</span><br><span class="line">// 1. 获取到输入框</span><br><span class="line">// 2. 输入框调用事件方法focus()达到聚焦行为</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            isShow: false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        async btn()&#123;</span><br><span class="line">            this.isShow = true;</span><br><span class="line">            // this.$refs.myInp.focus()</span><br><span class="line">            // 原因: data变化更新DOM是异步的</span><br><span class="line">            // 输入框还没有挂载到真实DOM上</span><br><span class="line">            // 解决:</span><br><span class="line">            // this.$nextTick(() =&gt; &#123;</span><br><span class="line">            //     this.$refs.myInp.focus()</span><br><span class="line">            // &#125;)</span><br><span class="line">            // 扩展: await取代回调函数</span><br><span class="line">            // $nextTick()原地返回Promise对象</span><br><span class="line">            await this.$nextTick()</span><br><span class="line">            this.$refs.myInp.focus()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h1 id="十三、组件进阶"><a href="#十三、组件进阶" class="headerlink" title="十三、组件进阶"></a>十三、组件进阶</h1><h2 id="1-动态组件"><a href="#1-动态组件" class="headerlink" title="1 动态组件"></a>1 动态组件</h2><blockquote>
<p>目标: 多个组件使用同一个挂载点，并动态切换，这就是动态组件</p>
</blockquote>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;button @click=&quot;comName = &#x27;UserName&#x27;&quot;&gt;账号密码填写&lt;/button&gt;</span><br><span class="line">      &lt;button @click=&quot;comName = &#x27;UserInfo&#x27;&quot;&gt;个人信息填写&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">      &lt;p&gt;下面显示注册组件-动态切换:&lt;/p&gt;</span><br><span class="line">      &lt;div style=&quot;border: 1px solid red;&quot;&gt;</span><br><span class="line">          &lt;component :is=&quot;comName&quot;&gt;&lt;/component&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 目标: 动态组件 - 切换组件显示</span><br><span class="line">// 场景: 同一个挂载点要切换 不同组件 显示</span><br><span class="line">// 1. 创建要被切换的组件 - 标签+样式</span><br><span class="line">// 2. 引入到要展示的vue文件内, 注册</span><br><span class="line">// 3. 变量-承载要显示的组件名</span><br><span class="line">// 4. 设置挂载点&lt;component :is=&quot;变量&quot;&gt;&lt;/component&gt;</span><br><span class="line">// 5. 点击按钮-切换comName的值为要显示的组件名</span><br><span class="line"></span><br><span class="line">import UserName from &#x27;../components/01/UserName&#x27;</span><br><span class="line">import UserInfo from &#x27;../components/01/UserInfo&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            comName: &quot;UserName&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">        UserName,</span><br><span class="line">        UserInfo</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结: vue内置component组件, 配合is属性, 设置要显示的组件名字</p>
</blockquote>
<h2 id="2-组件缓存"><a href="#2-组件缓存" class="headerlink" title="2 组件缓存"></a>2 组件缓存</h2><blockquote>
<p>目标: 组件切换会导致组件被频繁销毁和重新创建, 性能不高</p>
</blockquote>
<p>使用Vue内置的keep-alive组件, 可以让包裹的组件保存在内存中不被销毁</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div style=&quot;border: 1px solid red;&quot;&gt;</span><br><span class="line">    &lt;!-- Vue内置keep-alive组件, 把包起来的组件缓存起来 --&gt;</span><br><span class="line">    &lt;keep-alive&gt;</span><br><span class="line">        &lt;component :is=&quot;comName&quot;&gt;&lt;/component&gt;</span><br><span class="line">    &lt;/keep-alive&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>补充生命周期:</p>
<ul>
<li>activated - 激活</li>
<li>deactivated - 失去激活状态</li>
</ul>
<blockquote>
<p>总结: keep-alive可以提高组件的性能, 内部包裹的标签不会被销毁和重新创建, 触发激活和非激活的生命周期方法</p>
</blockquote>
<h2 id="3-激活和非激活"><a href="#3-激活和非激活" class="headerlink" title="3 激活和非激活"></a>3 激活和非激活</h2><blockquote>
<p>目标: 被缓存的组件不再创建和销毁, 而是激活和非激活</p>
</blockquote>
<p>补充2个钩子方法名:</p>
<p>​    activated – 激活时触发</p>
<p>​    deactivated – 失去激活状态触发</p>
<h2 id="4-组件插槽"><a href="#4-组件插槽" class="headerlink" title="4 组件插槽"></a>4 组件插槽</h2><blockquote>
<p>目标: 用于实现组件的内容分发, 通过 slot 标签, 可以接收到写在组件标签内的内容</p>
</blockquote>
<p>vue提供组件插槽能力, 允许开发者在封装组件时，把不确定的部分定义为插槽</p>
<p>语法口诀: </p>
<ol>
<li>组件内用<code>&lt;slot&gt;&lt;/slot&gt;</code>占位</li>
<li>使用组件时<code>&lt;Pannel&gt;&lt;/Pannel&gt;</code>夹着的地方, 传入标签替换slot</li>
</ol>
<blockquote>
<p>总结: 组件内容分发技术, slot占位, 使用组件时传入替换slot位置的标签</p>
</blockquote>
<h2 id="5-插槽默认内容"><a href="#5-插槽默认内容" class="headerlink" title="5 插槽默认内容"></a>5 插槽默认内容</h2><blockquote>
<p>目标: 如果外面不给传, 想给个默认显示内容</p>
</blockquote>
<p>口诀: <code>&lt;slot&gt;</code>夹着内容默认显示内容, 如果不给插槽slot传东西, 则使用<code>&lt;slot&gt;</code>夹着的内容在原地显示</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;slot&gt;默认内容&lt;/slot&gt;</span><br></pre></td></tr></table></figure>
<h2 id="6-具名插槽"><a href="#6-具名插槽" class="headerlink" title="6 具名插槽"></a>6 具名插槽</h2><blockquote>
<p>目标: 当一个组件内有2处以上需要外部传入标签的地方</p>
</blockquote>
<p>传入的标签可以分别派发给不同的slot位置</p>
<p>要求: v-slot一般用跟template标签使用 (template是html5新出标签内容模板元素, 不会渲染到页面上, 一般被vue解析内部标签)</p>
<p>==v-slot可以简化成#使用==</p>
<blockquote>
<p>v-bind可以省略成:    v-on: 可以省略成@   那么v-slot: 可以简化成#</p>
<p>总结: slot的name属性起插槽名, 使用组件时, template配合#插槽名传入具体标签</p>
</blockquote>
<h2 id="7-作用域插槽"><a href="#7-作用域插槽" class="headerlink" title="7 作用域插槽"></a>7 作用域插槽</h2><blockquote>
<p>目标: 子组件里值, 在给插槽赋值时在父组件环境下使用</p>
</blockquote>
<p>复习: 插槽内slot中显示默认内容</p>
<p>例子: 默认内容在子组件中, 但是父亲在给插槽传值, 想要改变插槽显示的默认内容</p>
<p>口诀: </p>
<ol>
<li>子组件, 在slot上绑定属性和子组件内的值</li>
<li>使用组件, 传入自定义标签, 用template和v-slot=”自定义变量名” </li>
<li>scope变量名自动绑定slot上所有属性和值</li>
</ol>
<blockquote>
<p>总结: 组件内变量绑定在slot上, 然后使用组件v-slot=”变量”  变量上就会绑定slot身上属性和值</p>
</blockquote>
<h2 id="8-作用域插槽使用场景"><a href="#8-作用域插槽使用场景" class="headerlink" title="8 作用域插槽使用场景"></a>8 作用域插槽使用场景</h2><p>父组件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> &lt;tr v-for=&quot;(obj, index) in arr&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">                  &lt;td&gt;&#123;&#123; index + 1 &#125;&#125;&lt;/td&gt;</span><br><span class="line">                  &lt;td&gt;&#123;&#123; obj.name &#125;&#125;&lt;/td&gt;</span><br><span class="line">                  &lt;td&gt;&#123;&#123; obj.age &#125;&#125;&lt;/td&gt;</span><br><span class="line">                  &lt;td&gt;</span><br><span class="line">                      &lt;slot :row=&quot;obj&quot;&gt;</span><br><span class="line">                          &lt;!-- 默认值给上,如果使用组件不自定义标签显示默认文字 --&gt;</span><br><span class="line">                          &#123;&#123; obj.headImgUrl&#125;&#125;</span><br><span class="line">                      &lt;/slot&gt;</span><br><span class="line">                  &lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br></pre></td></tr></table></figure>
<p>子组件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;MyTable :arr=&quot;list&quot;&gt;&lt;/MyTable&gt;</span><br><span class="line">  &lt;MyTable :arr=&quot;list&quot;&gt;</span><br><span class="line">      &lt;!-- scope: &#123;row: obj&#125; --&gt;</span><br><span class="line">     &lt;template v-slot=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;a :href=&quot;scope.row.headImgUrl&quot;&gt;&#123;&#123; scope.row.headImgUrl &#125;&#125;&lt;/a&gt;</span><br><span class="line">     &lt;/template&gt;</span><br><span class="line">  &lt;/MyTable&gt;</span><br><span class="line">  &lt;MyTable :arr=&quot;list&quot;&gt;</span><br><span class="line">     &lt;template v-slot=&quot;scope&quot;&gt;</span><br><span class="line">          &lt;img style=&quot;width: 100px;&quot; :src=&quot;scope.row.headImgUrl&quot; alt=&quot;&quot;&gt;</span><br><span class="line">     &lt;/template&gt;</span><br><span class="line">  &lt;/MyTable&gt;</span><br></pre></td></tr></table></figure>
<h1 id="十四、自定义指令"><a href="#十四、自定义指令" class="headerlink" title="十四、自定义指令"></a>十四、自定义指令</h1><p>除了核心功能默认内置的指令 (<code>v-model</code> 和 <code>v-show</code>)，Vue 也允许注册自定义指令。 <code>v-xxx</code>  </p>
<p>html+css的复用的主要形式是组件</p>
<p>你需要对普通 DOM 元素进行底层操作，这时候就会用到自定义指令</p>
<h2 id="1-注册"><a href="#1-注册" class="headerlink" title="1 注册"></a>1 注册</h2><h3 id="1-1-局部注册"><a href="#1-1-局部注册" class="headerlink" title="1.1 局部注册"></a>1.1 局部注册</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">directives: &#123;</span><br><span class="line">      focus: &#123;</span><br><span class="line">          inserted(el)&#123;</span><br><span class="line">              el.focus()</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-2-全局注册"><a href="#1-2-全局注册" class="headerlink" title="1.2 全局注册"></a>1.2 全局注册</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 全局指令 - 到处&quot;直接&quot;使用</span><br><span class="line">Vue.directive(&quot;gfocus&quot;, &#123;</span><br><span class="line">  inserted(el) &#123;</span><br><span class="line">    el.focus() // 触发标签的事件方法</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结: 全局注册自定义指令, 哪里都能用, 局部注册, 只能在当前vue文件里用</p>
</blockquote>
<h2 id="2-传值"><a href="#2-传值" class="headerlink" title="2 传值"></a>2 传值</h2><blockquote>
<p>目标: 使用自定义指令, 传入一个值</p>
</blockquote>
<p>main.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 目标: 自定义指令传值</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;color&#x27;</span>, &#123;</span><br><span class="line">  <span class="title function_">inserted</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">    el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">update</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">    el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;p v-color=&quot;colorStr&quot; @click=&quot;changeColor&quot;&gt;修改文字颜色&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      theColor: &quot;red&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    changeColor() &#123;</span><br><span class="line">      this.theColor = &#x27;blue&#x27;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>总结: v-xxx, 自定义指令, 获取原生DOM, 自定义操作</p>
</blockquote>
]]></content>
      <categories>
        <category>编程学习</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>课程笔记</tag>
        <tag>入门</tag>
      </tags>
  </entry>
  <entry>
    <title>vuex</title>
    <url>/2023/08/09/vuex/</url>
    <content><![CDATA[<h1 id="Vuex状态管理"><a href="#Vuex状态管理" class="headerlink" title="Vuex状态管理"></a>Vuex状态管理</h1><h2 id="一、state-存储数据"><a href="#一、state-存储数据" class="headerlink" title="一、state:存储数据"></a>一、state:存储数据</h2><h3 id="1-定义state："><a href="#1-定义state：" class="headerlink" title="1.定义state："></a>1.定义state：</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">state</span>: &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">price</span>: <span class="number">100</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="2-原始方式：通过"><a href="#2-原始方式：通过" class="headerlink" title="2.原始方式：通过"></a>2.原始方式：通过</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;p&gt;组件A&#123;&#123; $store.state.count &#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-辅助函数方式：mapState"><a href="#3-辅助函数方式：mapState" class="headerlink" title="3.辅助函数方式：mapState"></a>3.辅助函数方式：mapState</h3><h4 id="3-1-引入mapState"><a href="#3-1-引入mapState" class="headerlink" title="3.1 引入mapState"></a>3.1 引入mapState</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br></pre></td></tr></table></figure>
<h4 id="3-2-在computed里，通过…mapState-‘变量名1’"><a href="#3-2-在computed里，通过…mapState-‘变量名1’" class="headerlink" title="3.2 在computed里，通过…mapState([‘变量名1’])"></a>3.2 在computed里，通过…mapState([‘变量名1’])</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">    ...<span class="title function_">mapState</span>([<span class="string">&#x27;count&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-3-使用变量，通过"><a href="#3-3-使用变量，通过" class="headerlink" title="3.3 使用变量，通过"></a>3.3 使用变量，通过</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;p&gt;&#123;&#123;count&#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<h2 id="二、mutations：同步修改数据"><a href="#二、mutations：同步修改数据" class="headerlink" title="二、mutations：同步修改数据"></a>二、mutations：同步修改数据</h2><h3 id="1-定义mutations"><a href="#1-定义mutations" class="headerlink" title="1.定义mutations"></a>1.定义mutations</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(<span class="params">state, val</span>) &#123;</span><br><span class="line">        state.<span class="property">count</span> += val.<span class="property">a</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-原始方式：methods里，通过this-store-commit"><a href="#2-原始方式：methods里，通过this-store-commit" class="headerlink" title="2.原始方式：methods里，通过this.$store.commit"></a>2.原始方式：methods里，通过this.$store.commit</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"> <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">btn</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&quot;setCount&quot;</span>, &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-辅助函数方式：mapMutations"><a href="#3-辅助函数方式：mapMutations" class="headerlink" title="3.辅助函数方式：mapMutations"></a>3.辅助函数方式：mapMutations</h3><h4 id="3-1-引入mapMutations"><a href="#3-1-引入mapMutations" class="headerlink" title="3.1 引入mapMutations"></a>3.1 引入mapMutations</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;mapMutations&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-2-在methods里，通过…-mapMutations-“方法名”"><a href="#3-2-在methods里，通过…-mapMutations-“方法名”" class="headerlink" title="3.2 在methods里，通过….mapMutations([“方法名”])"></a>3.2 在methods里，通过….mapMutations([“方法名”])</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">...<span class="title function_">mapMutations</span>([<span class="string">&quot;setCount&quot;</span>]),</span><br></pre></td></tr></table></figure>
<h4 id="3-3-在标签中绑定事件"><a href="#3-3-在标签中绑定事件" class="headerlink" title="3.3 在标签中绑定事件"></a>3.3 在标签中绑定事件</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;button @click=&quot;setCount(&#123; a: 1, b: 2 &#125;)&quot;&gt;修改数据&lt;/button&gt;</span><br></pre></td></tr></table></figure>
<h2 id="三、actions-异步操作数据"><a href="#三、actions-异步操作数据" class="headerlink" title="三、actions:异步操作数据"></a>三、actions:异步操作数据</h2><h3 id="1-定义actions"><a href="#1-定义actions" class="headerlink" title="1.定义actions"></a>1.定义actions</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">//一般为ajax请求</span></span><br><span class="line">    <span class="title function_">setCount2</span>(<span class="params">context, val</span>) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        context.<span class="title function_">commit</span>(<span class="string">&#x27;setCount&#x27;</span>, val)</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="2-原始方式：在methods里，通过-this-store-dispatch"><a href="#2-原始方式：在methods里，通过-this-store-dispatch" class="headerlink" title="2.原始方式：在methods里，通过 this.$store.$dispatch"></a>2.原始方式：在methods里，通过 this.$store.$dispatch</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">btn2</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.$dispatch(<span class="string">&quot;setCount2&quot;</span>, &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="3-辅助函数方式：mapActions"><a href="#3-辅助函数方式：mapActions" class="headerlink" title="3.辅助函数方式：mapActions"></a>3.辅助函数方式：mapActions</h3><h4 id="3-1-引入mapActions"><a href="#3-1-引入mapActions" class="headerlink" title="3.1 引入mapActions"></a>3.1 引入mapActions</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;mapActions&#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br></pre></td></tr></table></figure>
<h4 id="3-2-在methods里，通过…-mapActions-“方法名”"><a href="#3-2-在methods里，通过…-mapActions-“方法名”" class="headerlink" title="3.2 在methods里，通过….mapActions([“方法名”])"></a>3.2 在methods里，通过….mapActions([“方法名”])</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  ...<span class="title function_">mapActions</span>([<span class="string">&quot;setCount2&quot;</span>]),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h4 id="3-3-在标签中绑定事件-1"><a href="#3-3-在标签中绑定事件-1" class="headerlink" title="3.3 在标签中绑定事件"></a>3.3 在标签中绑定事件</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;button @click=&quot;setCount2(&#123; a: 1, b: 2 &#125;)&quot;&gt;异步修改数据&lt;/button&gt;</span><br></pre></td></tr></table></figure>
<h2 id="四、getters-处理数据"><a href="#四、getters-处理数据" class="headerlink" title="四、getters:处理数据"></a>四、getters:处理数据</h2><h3 id="1-定义getters"><a href="#1-定义getters" class="headerlink" title="1.定义getters"></a>1.定义getters</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">showCount</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (state.<span class="property">count</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;男&#x27;</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state.<span class="property">count</span> == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;女&#x27;</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;人妖&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="2-原始方式：-store-getters-方法名"><a href="#2-原始方式：-store-getters-方法名" class="headerlink" title="2.原始方式：$store.getters.方法名"></a>2.原始方式：$store.getters.方法名</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;P&gt;&#123; $store.getters.showCount &#125;&#125;&lt;/P&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-辅助函数方式-mapGetters"><a href="#3-辅助函数方式-mapGetters" class="headerlink" title="3.辅助函数方式:mapGetters"></a>3.辅助函数方式:mapGetters</h3><h4 id="3-1-引入mapGetters"><a href="#3-1-引入mapGetters" class="headerlink" title="3.1 引入mapGetters"></a>3.1 引入mapGetters</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br></pre></td></tr></table></figure>
<h4 id="3-2-在computed里，通过-…mapGetters-“方法名”"><a href="#3-2-在computed里，通过-…mapGetters-“方法名”" class="headerlink" title="3.2 在computed里，通过 …mapGetters([“方法名”])"></a>3.2 在computed里，通过 …mapGetters([“方法名”])</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  ...<span class="title function_">mapGetters</span>([<span class="string">&quot;showCount&quot;</span>]),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h4 id="3-3-在标签中绑定事件-2"><a href="#3-3-在标签中绑定事件-2" class="headerlink" title="3.3 在标签中绑定事件"></a>3.3 在标签中绑定事件</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;button @click=&quot;setCount2(&#123; a: 1, b: 2 &#125;)&quot;&gt;异步修改数据&lt;/button&gt;</span><br></pre></td></tr></table></figure>
<h2 id="五、modules模块化"><a href="#五、modules模块化" class="headerlink" title="五、modules模块化"></a>五、modules模块化</h2><h3 id="1-模块化的简单应用"><a href="#1-模块化的简单应用" class="headerlink" title="1. 模块化的简单应用"></a>1. 模块化的简单应用</h3><h4 id="1-1-定义modules"><a href="#1-1-定义modules" class="headerlink" title="1. 1. 定义modules"></a>1. 1. 定义modules</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store  = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    <span class="attr">user</span>: &#123;</span><br><span class="line">       <span class="attr">state</span>: &#123;</span><br><span class="line">         <span class="attr">token</span>: <span class="string">&#x27;12345&#x27;</span></span><br><span class="line">       &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">setting</span>: &#123;</span><br><span class="line">      <span class="attr">state</span>: &#123;</span><br><span class="line">         <span class="attr">name</span>: <span class="string">&#x27;Vuex实例&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<h4 id="1-2-直接调用"><a href="#1-2-直接调用" class="headerlink" title="1.2. 直接调用"></a>1.2. 直接调用</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>用户token &#123;&#123; $store.state.user.token &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>网站名称 &#123;&#123; $store.state.setting.name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="1-3-通过getters修改"><a href="#1-3-通过getters修改" class="headerlink" title="1.3. 通过getters修改"></a>1.3. 通过getters修改</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store  = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">     <span class="attr">getters</span>: &#123;</span><br><span class="line">   <span class="attr">token</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">user</span>.<span class="property">token</span>,</span><br><span class="line">   <span class="attr">name</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">setting</span>.<span class="property">name</span></span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-4-通过mapGetters引用"><a href="#1-4-通过mapGetters引用" class="headerlink" title="1.4. 通过mapGetters引用"></a>1.4. 通过mapGetters引用</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">      ...<span class="title function_">mapGetters</span>([<span class="string">&#x27;token&#x27;</span>, <span class="string">&#x27;name&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-命名空间"><a href="#2-命名空间" class="headerlink" title="2. 命名空间"></a>2. 命名空间</h3><h4 id="2-1-定义"><a href="#2-1-定义" class="headerlink" title="2.1. 定义"></a>2.1. 定义</h4><p>在store/index.js中，定义modules</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">...</span><br><span class="line"><span class="attr">modules</span>:&#123;</span><br><span class="line">       <span class="attr">user</span>: &#123;</span><br><span class="line">        <span class="comment">//开启命名空间</span></span><br><span class="line">      <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">token</span>: <span class="string">&#x27;12345&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="comment">//  这里的state表示的是user的state</span></span><br><span class="line">         updateToken (state) &#123;</span><br><span class="line">            state.<span class="property">token</span> = <span class="number">678910</span></span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;, </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="2-2-直接调用"><a href="#2-2-直接调用" class="headerlink" title="2.2. 直接调用"></a>2.2. 直接调用</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;user/updateToken&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-3-通过辅助函数调用"><a href="#2-3-通过辅助函数调用" class="headerlink" title="2.3. 通过辅助函数调用"></a>2.3. 通过辅助函数调用</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">     ...<span class="title function_">mapMutations</span>([<span class="string">&#x27;user/updateToken&#x27;</span>]),</span><br><span class="line">       test () &#123;</span><br><span class="line">           <span class="variable language_">this</span>[<span class="string">&#x27;user/updateToken&#x27;</span>]()</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-4-createNamespacedHelpers"><a href="#2-4-createNamespacedHelpers" class="headerlink" title="2.4. createNamespacedHelpers"></a>2.4. createNamespacedHelpers</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createNamespacedHelpers&#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">const</span> &#123;mapMutations&#125; =<span class="title function_">createNamespacedHelpers</span>(<span class="string">&#x27;user&#x27;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">...</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        ...<span class="title function_">mapMutations</span>([<span class="string">&#x27;updateToken&#x27;</span>])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>编程学习</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>课程笔记</tag>
        <tag>vuex</tag>
      </tags>
  </entry>
</search>
